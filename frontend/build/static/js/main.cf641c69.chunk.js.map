{"version":3,"sources":["staticData/types.ts","staticData/Constants.ts","staticData/Routes.tsx","redux/actions.ts","redux/freezer.ts","redux/reducers/tasklist.ts","redux/reducers/serverState.ts","redux/reducers/storeState.ts","redux/reducers/userinfo.ts","redux/reducers/index.ts","redux/selectors.ts","redux/configureStore.ts","components/Navbar.tsx","assets/images/logo.png","components/animations/Expand.tsx","components/helpers/WaitingOverlay.tsx","components/Login.tsx","components/Tasklist/CreateTasklist.tsx","components/Homepage.tsx","components/Register.tsx","components/Logout.tsx","components/helpers/PopupMenu.tsx","components/Tasklist/ModifyTask.tsx","components/Tasklist/Task.tsx","components/Tasklist/CreateTask.tsx","components/Tasklist/TaskColumn.tsx","components/helpers/GridPlus.tsx","components/Tasklist/Tasklist.tsx","components/App.tsx","components/Root.tsx","index.tsx"],"names":["UpdateType","ADD_TASK","REMOVE_TASK","MODIFY_TASK","REMOVE_TASKLIST","MODIFY_TASKLIST","UPDATE_USER","RESTAGE_TASK","REORDER_TASK","LOGIN_COMPLETE","LOGOUT_COMPLETE","FETCH_FAILURE","FETCHING_DATA","UPDATE_FAILURE","UPDATING_SERVER","TASKLIST_UPDATED","TASKLIST_CREATED","FAKE_IDS","isUserInfo","info","infoParsed","__v","color","createdAt","email","icon","updatedAt","username","isTasklists","lists","Array","isArray","every","e","isTasklist","list","tasklist","undefined","_id","description","name","isStage","stage1","stage2","stage3","stage4","isTasks","tasks","stage","isTask","obj","task","assignedUserIcon","assignedUsername","TaskStage","ID_ADDITION","RequestFails","UpdateFails","PASSWORD_REQ","RegExp","USER_REGEX","EMAIL_REGEX","hashPassword","password","crypto","createHash","update","String","digest","mainRoute","arr","i","strNum","toString","length","IconGeneration","route","loggedOutRoutes","loggedInRoutes","nonNavbarRoutes","loginRouter","logoutRouter","registerRouter","usersPrivateInfo","updateTasklist","addTasklist","deleteTasklist","fetching","type","types","payload","updating","loginFail","reason","updateFail","id","loginSuccess","login","user","userInfo","tasklists","extractPrivateInfo","Promise","reject","Date","extractTasklist","resolve","updateTasklistAttempt","store","dispatch","axios","post","withCredentials","then","response","data","catch","console","warn","updateTasklistRequest","tasklistObj","state","getState","waitingNext","storeState","TasklistsHelper","holder","j","Object","freeze","ids","StoreStateHelper","values","forEach","ServerStateHelper","serverState","UserStateHelper","userState","Freezer","reducer","action","tasklistHolder","FreezeState","defaultTasklists","now","RANDOM_garbageLOL1235","restageHelper","index","reduce","accumulator","element","taskID","toReturn","oldStage","filter","splice","priority","removeTaskHelper","map","updateTasklistHelper","sliced","slice","createValidTasklist","stageCount","keys","key","realKey","parseInt","push","index2","tasklistID","lists1","ids1","stages","defaultStatus","status","lastFetchFailure","lastUpdateFailure","loggedIn","addUpdate","typesObject","existing","SET_TASKS","SET_STAGES","TASKLIST_INFO","stateRemoved","stateCopy","id2","rootReducer","combineReducers","getTasklists","getTasklistById","props","getTasklistIDS","getLoggedIn","getStoreStatus","getUserInfo","getLastFetchFailure","separateTasksByType","twoDArr","configureStore","createStore","applyMiddleware","thunk","subscribe","throttle","updates","getUpdateObject","REMOVE_USER","USER_INFO","endObject","remove","taskslength","empty","error","styles","makeStyles","theme","title","flexGrow","display","justifyContent","root","position","paper","backgroundColor","image","marginTop","width","height","breakpoints","up","lowercase","textTransform","connect","onClick","history","useHistory","classes","useState","scrollUp","setScrollUp","lastScrollTop","setLastScrollTop","latestScrollTop","setLatestScrollTop","loggedOutItems","routes","arrItems","Button","variant","style","marginLeft","_e","Typography","genid","createButtons","loggedInIcon","noWrap","scrollEvent","window","pageYOffset","useEffect","addEventListener","removeEventListener","Fragment","AppBar","elevation","Toolbar","className","src","alt","Fade","children","start","end","transitionProps","defaultStyle","transition","timeout","transform","transitionStyles","entering","entered","exiting","exited","unmounted","Transition","backdrop","zIndex","drawer","WaitingOverlay","wait","Backdrop","open","CircularProgress","card","maxWidth","minWidth","margin","minHeight","down","cardContent","flexDirection","flex","inputs","cardActions","alignItems","alert","top","mapActionsToProps","tryLogin","credentials","loginRequest","failReason","showPassword","setShowPassword","alertActive","setAlertActive","setUsername","setPassword","Collapse","in","Alert","severity","timer","setTimeout","clearTimeout","Card","onSubmit","submission","userAuth","preventDefault","search","autoComplete","CardContent","TextField","required","autoFocus","label","value","onChange","updateUsername","target","InputProps","endAdornment","InputAdornment","IconButton","aria-label","onMouseDown","Visibility","VisibilityOff","updatePassword","fullWidth","endIcon","Input","marginRight","leftButton","createATasklist","addTasklistRouter","addTasklistRequest","onCancel","onComplete","onExit","nameRef","useRef","sentRequest","setSentRequest","alertMessage","setAlertMessage","descriptionRef","borrowedStyles","loginStyles","errmsg","Grow","unmountOnExit","onExited","CardHeader","current","inputRef","Close","InputOutlined","paddingLeft","paddingRight","outer","toolbar","create","palette","success","dark","addButton","fontSize","createText","CreateTasklistCard","callback","hover","setHover","Expand","Grid","item","onMouseOver","onMouseLeave","AddCircle","TasklistStub","date","setDate","taskStages","setTaskStages","toLocaleDateString","subheader","disableGutters","OpenInNew","setCreate","createForm","setCreateForm","displayable","tasklistArr","tasklistsecondary","sort","a","b","getTime","displayTasklists","edit","container","spacing","signUp","signupRequest","showPasswordDuplicate","setShowPasswordDuplicate","passwordDuplicate","setPasswordDuplicate","passwordMatches","setPasswordMatches","passwordOkay","setPasswordOkay","setEmail","emailOkay","setEmailOkay","usernameOkay","setUsernameOkay","errorMessage","setErrorMessage","checkMatches","p","p2","duplicate","test","validatePassword","earlyReturn","CheckSubmittable","helperText","updateEmail","updatePasswordDuplicate","dialog","tryLogout","getLastUpdateFailure","logoutRequest","handleClose","logoutRequested","goBack","Dialog","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogActions","PopupMenu","menuID","anchor","Menu","anchorEl","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","ModifyTask","newTask","defaultValue","taskStyles","grow","marginBottom","growToDo","primary","growOngoing","background","growComplete","growCancelled","dragging","main","border","taskButton","text","padding","menuText","Task","columnId","onDelete","onUpdate","setAnchorEl","menuItems","setMenuItems","fullTaskView","setFullTaskView","modifyMode","setModifyMode","node","menuOpen","Boolean","normalClass","getClass","menuOffClick","menuOpenHandler","event","currentTarget","stopPropagation","taskClicked","handleClick","contains","document","runDelete","runModify","menuItemInfos","Edit","DeleteOutlineRounded","MenuItem","createMenuItems","ref","draggableId","provided","snapshot","isDragging","draggableProps","dragHandleProps","innerRef","direction","justify","wrap","createSpecificStyles","addATask","preciseClasses","header","headerComplete","headerCancelled","headerToDo","alignContent","headerOngoing","taskCardContentOngoing","light","taskCardContentToDo","taskCardContentComplete","taskCardContentCancelled","taskCardContent","small","normalGrid","removeATask","modifyATask","openAdd","setOpenAdd","headerClass","getHeaderClass","contentClass","getContentClass","taskDeleter","taskModifier","closeDialog","edge","size","Add","droppableId","_snapshot","droppableProps","placeholder","GridPlus","crossFill","orderBy","fillCount","childClassName","childProps","gridChildren","arr2D","childrenArr","React","Children","child","isValidElement","filteredChildren","arrIndex","Math","floor","createAndFillGrids","gridChild","gridChildMedium","gridChildSmall","gridParent","cancelButton","deleteDialog","restageTasks","oldPriority","delete","deleteTasklistRequest","tasklistDeleteSuccess","otherProps","location","openDeleteDialog","setOpenDeleteDialog","waitForDelete","setWaitForDelete","completionPercent","setCompletionPercent","isDesktop","useMediaQuery","isMedium","toFixed","separatedTasks","taskCards","arr2d","TaskViews","closeDeleteDialog","titleTypographyProps","onDragEnd","result","source","destination","startIcon","DeleteForever","cookieLogin","get","infoRequest","exact","path","component","Homepage","Register","Login","Logout","Tasklist","CreateTasklist","unchangedThemeOptions","secondary","warning","themeMobile","responsiveFontSizes","createMuiTheme","typography","fontFamily","themeDesktop","Root","themeSwap","ThemeProvider","CssBaseline","ReactDOM","render","getElementById"],"mappings":"uUA0EYA,E,kEAxECC,EAAW,WAEXC,EAAc,cAEdC,EAAc,cAEdC,EAAkB,kBAElBC,EAAkB,kBAElBC,EAAc,cAEdC,EAAe,eAEfC,EAAe,eAEfC,EAAiB,iBAEjBC,EAAkB,kBAElBC,EAAgB,gBAEhBC,EAAgB,gBAEhBC,EAAiB,iBAEjBC,EAAkB,kBAElBC,EAAmB,mBAEnBC,EAAmB,mBAMnBC,EAAW,CAAC,OAAQ,a,SAoCrBjB,O,qCAAAA,I,6BAAAA,I,iCAAAA,I,uBAAAA,I,yBAAAA,I,2BAAAA,I,0BAAAA,M,KAyHL,IAoCMkB,EAAa,SAACC,GACzB,GAAa,OAATA,GAAiC,kBAATA,EAAmB,OAAO,EACtD,IAAMC,EAAaD,EACnB,MAC4B,kBAAnBC,EAAWC,KACU,kBAArBD,EAAWE,OACc,kBAAzBF,EAAWG,WACU,kBAArBH,EAAWI,OACS,kBAApBJ,EAAWK,MACc,kBAAzBL,EAAWM,WACa,kBAAxBN,EAAWO,UAKTC,EAAc,SAACC,GAC1B,OAAOC,MAAMC,QAAQF,IAAUA,EAAMG,OAAM,SAACC,GAAD,OAAOC,EAAWD,OAGlDC,EAAa,SAACC,GACzB,GAAa,OAATA,GAAiC,kBAATA,EAAmB,OAAO,EACtD,IAAMC,EAAWD,EACjB,YACmBE,IAAjBD,EAASE,UACcD,IAAvBD,EAASb,gBACgBc,IAAzBD,EAASG,kBACSF,IAAlBD,EAASI,WACcH,IAAvBD,EAASV,WACqB,kBAAvBU,EAASb,WAChBkB,EAAQL,EAASM,SACjBD,EAAQL,EAASO,SACjBF,EAAQL,EAASQ,SACjBH,EAAQL,EAASS,SACjBC,EAAQV,EAASW,QAIRN,EAAU,SAACO,GACtB,OAAOlB,MAAMC,QAAQiB,IAAUA,EAAMhB,OAAM,SAACC,GAAD,MAAoB,kBAANA,MAG9Ca,EAAU,SAACC,GACtB,OAAOjB,MAAMC,QAAQgB,IAAUA,EAAMf,OAAM,SAACC,GAAD,OAAOgB,EAAOhB,OAG9CgB,EAAS,SAACC,GAErB,GAAY,OAARA,GAA+B,kBAARA,EAAkB,OAAO,EACpD,IAAMC,EAAOD,EACb,MACsB,kBAAbC,EAAKb,KACgB,kBAArBa,EAAKZ,aACS,kBAAdY,EAAKX,MACqB,kBAA1BW,EAAKC,kBACqB,kBAA1BD,EAAKE,kB,mCC3RHC,EAAY,CACvB,QACA,cACA,WACA,aAIWC,EAAc,IAKdC,EAAe,CAC1B,QACA,aACA,kBACA,cACA,iBACA,2BACA,SACA,UACA,WACA,YACA,eAIWC,EAAc,CACzB,SACA,oBACA,QACA,UACA,WACA,eAoBWC,EAAe,IAAIC,OAAJ,oEANJ,GAMI,YALJ,IAKI,OAGfC,EAAa,IAAID,OAAO,4BACxBE,EAAc,IAAIF,OAAJ,uBA8BdG,EAAe,SAACC,GAE3B,OADYC,IAAOC,WAAW,UAAUC,OAAOC,OAAOJ,IAC3CK,OAAO,QClFPC,GDoDU,WAGrB,IAFA,IACMC,EAAMxC,MADA,KAEHyC,EAAI,EAAGA,EAFJ,IAEaA,IAAK,CAC5B,IAAIC,EAASD,EAAEE,SAAS,IAEtBD,EADoB,IAAlBA,EAAOE,OACA,OAASF,EACS,IAAlBA,EAAOE,OACP,MAAQF,EAER,KAAOA,EAElBF,EAAIC,GAAKC,GAqBuBG,GCrFI,CAAEnC,KAAM,iBAAkBoC,MAAO,MAC5DC,EAAwC,CAEnD,CAAErC,KAAM,UAAWoC,MAAO,SAC1B,CAAEpC,KAAM,QAASoC,MAAO,WAEbE,EAAuC,CAClD,CAAEtC,KAAM,eAAgBoC,MAAO,cAC/B,CAAEpC,KAAM,mBAAoBoC,MAAO,kBACnC,CAAEpC,KAAM,UAAWoC,MAAO,YAC1B,CAAEpC,KAAM,SAAUoC,MAAO,YAEdG,EAAwC,CACnD,CAAEvC,KAAM,WAAYoC,MAAO,cAC3B,CAAEpC,KAAM,kBAAmBoC,MAAO,oBAClC,CAAEpC,KAAM,eAAgBoC,MAAO,kBAC/B,CAAEpC,KAAM,sBAAuBoC,MAAO,yBAE3BI,EACJ,aAGIC,EACJ,cAGIC,EACJ,gBAgCIC,GACJ,oBAKIC,GACJ,wBAIIC,GACJ,qBASIC,GACJ,wBCUIC,GAAW,SAACjD,GAAD,MAAqC,CAC3DkD,KAAMC,EACNC,QAAS,CAAEpD,SAGAqD,GAAW,SAACrD,GAAD,MAAsC,CAC5DkD,KAAMC,EACNC,QAAS,CAAEpD,SAUAsD,GAAY,SAACC,GAAD,MAAoD,CAC3EL,KAAMC,EACNC,QAAS,CACPG,YAISC,GAAa,SACxBD,GADwB,IAExBE,EAFwB,uDAEnB,GAFmB,MAGM,CAC9BP,KAAMC,EACNC,QAAS,CACPG,SACAvD,IAAKyD,KAIIC,GAAe,SAC1BC,GAD0B,MAEK,CAC/BT,KAAMC,EACNC,QAAS,CACPQ,KAAMD,EAAME,SACZC,UAAWH,EAAMG,aA8CfC,GAAqB,SAAClF,GAC1B,IAAM+E,EHMuB,SAAC/E,GAC9B,OAAKD,EAAWC,GAGT,CACLE,IAAKF,EAAKE,IACVI,KAAMN,EAAKM,KACXH,MAAOH,EAAKG,MACZE,MAAOL,EAAKK,MACZG,SAAUR,EAAKQ,SACfJ,UAAWJ,EAAKI,UAChBG,UAAWP,EAAKO,WATT,KGRI+D,CAAsBtE,GACnC,GAAa,OAAT+E,EACF,OAAOI,QAAQC,OAAO/C,EAAa,IAErC,IAAM4C,EHiBwB,SAACjF,GAC/B,IAAKS,EAAW,OAACT,QAAD,IAACA,OAAD,EAACA,EAAMiF,WACrB,OAAO,KAET,IAAK,IAAI7B,EAAI,EAAGA,EAAIpD,EAAKiF,UAAU1B,OAAQH,IAAK,CAC9C,IAAInC,EAAWjB,EAAKiF,UAAU7B,GAC9BnC,EAASV,UAAY,IAAI8E,KAAKpE,EAASV,WACvCU,EAASb,UAAY,IAAIiF,KAAKpE,EAASb,WAEzC,OAAOJ,EAAKiF,UG1BMX,CAAuBtE,GACzC,OAAkB,OAAdiF,EACKE,QAAQC,OAAO/C,EAAa,IAE9B,CAAE2C,SAAUD,EAAME,UAAWA,IAGhCK,GAAkB,SAACtF,GACvB,IAAMiB,EHqBuB,SAACjB,GAC9B,OAAKe,EAAWf,EAAKiB,WAGrBjB,EAAKiB,SAASV,UAAY,IAAI8E,KAAKrF,EAAKiB,SAASV,WACjDP,EAAKiB,SAASb,UAAY,IAAIiF,KAAKrF,EAAKiB,SAASb,WAC1CJ,EAAKiB,UAJH,KGvBQqD,CAAsBtE,GACvC,OAAiB,OAAbiB,EACKkE,QAAQC,OAAO9C,EAAY,IAE7B6C,QAAQI,QAAQ,CAAEtE,SAAUA,KA6KxBuE,GAAwB,SACnCvE,EACAwE,GAOA,OAAO,SAAUC,GACf,IAAMd,EAAK3D,EAASE,IAEpB,OADAsE,EAAMC,SAASlB,GAASvD,EAASE,MArLP,SAC5BF,GAEA,OAAO0E,IACJC,KACC3B,GAAuBhD,EAASE,IAGhCF,EACA,CAAE4E,iBAAiB,IAEpBC,MAAK,SAACC,GAAD,OAAcT,GAAgBS,EAASC,SAC5CC,OAAM,YAAkC,IAA/BF,EAA8B,EAA9BA,SAER,OADAG,QAAQC,KAAKJ,EAASC,MACfb,QAAQC,OAAO9C,EAAY,OAwK7B8D,CAAsBnF,GAC1B6E,MAAK,SAACO,GAAD,OACJZ,EAAMC,UAjPZ3D,EAiP2CsE,EAhP3CC,EAgPwDb,EAAMc,WA9OvD,CACLlC,KAAMC,EACNC,QAAS,CACPtD,SAAUc,EAAId,SACduF,iBAC4DtF,IAA1DoF,EAAMG,WAAN,UAAoB1E,EAAId,SAASE,KAAjC,OAAuCiB,QATV,IACnCL,EACAuE,KAkPKL,OAAM,SAACvB,GAAD,OAAyBe,EAAMC,SAASf,GAAWD,EAAQE,SCxXlE8B,GAAkB,SAACC,GACvB,QAAezF,IAAXyF,EAAsB,OAAOA,EACjC,IAAK,IAAIvD,EAAI,EAAGA,EAAIuD,EAAO1B,UAAU1B,OAAQH,IAAK,CAChD,IAAK,IAAIwD,EAAI,EAAGA,EAAID,EAAO1B,UAAU7B,GAAGxB,MAAM2B,OAAQqD,IACpDC,OAAOC,OAAOH,EAAO1B,UAAU7B,GAAGxB,MAAMgF,IAE1CC,OAAOC,OAAOH,EAAO1B,UAAU7B,GAAGxB,OAClCiF,OAAOC,OAAOH,EAAO1B,UAAU7B,IAGjC,OADAyD,OAAOC,OAAOH,EAAOI,KACdJ,GAGHK,GAAmB,SAACP,GACxB,YAAmBvF,IAAfuF,IACJI,OAAOI,OAAOR,GAAYS,SAAQ,SAACpG,GACjC+F,OAAOC,OAAOhG,EAAEwD,OAChBuC,OAAOC,OAAOhG,MAEhB+F,OAAOC,OAAOL,IALuBA,GASjCU,GAAoB,SAACC,GACzB,YAAoBlG,IAAhBkG,GACJP,OAAOC,OAAOM,GADwBA,GAKlCC,GAAkB,SAACC,GACvB,YAAkBpG,IAAdoG,GACJT,OAAOC,OAAOQ,GADsBA,GAavBC,OANR,SAAiBC,GACtB,OAAO,SAAClB,EAA8BmB,GACpC,OAhDuB,SAACnB,GAM1B,OALAI,GAAgBJ,EAAMoB,gBACtBP,GAAkBb,EAAMc,aACxBJ,GAAiBV,EAAMG,YACvBY,GAAgBf,EAAMtB,UACtB6B,OAAOC,OAAOR,GACPA,EA0CEqB,CAAYH,EAAQlB,EAAOmB,M,0BCpDzBG,GAA2C,CACtD3C,UAAW,CACT,CACE7D,YAAa,GACbD,IAAK,wBACLE,KAAM,GACNjB,UAAW,IAAIiF,KAAKA,KAAKwC,OACzBtH,UAAW,IAAI8E,KAAKA,KAAKwC,OACzBjG,MAAO,CACL,CACEP,KAAM,GACND,YAAa,GACbD,IAAK,GACLe,iBAAkB,GAClBD,iBAAkB,KAGtBV,OAAQ,CAAC,GACTC,OAAQ,GACRC,OAAQ,GACRC,OAAQ,KAGZqF,IAAK,CAAEe,sBAAuB,IAI1BC,GAAgB,SACpB9G,EACAwG,GAGA,IAAMO,EAAQ/G,EAASW,MAAMqG,QAC3B,SAACC,EAAaC,EAASH,GAAvB,OACEG,EAAQhH,MAAQsG,EAAOlD,QAAQ6D,OAASJ,EAAQE,KACjD,GAGGG,EAAkC,CACtC9G,OAAO,aAAKN,EAASM,QACrBC,OAAO,aAAKP,EAASO,QACrBC,OAAO,aAAKR,EAASQ,QACrBC,OAAO,aAAKT,EAASS,SAEvB,OAAQ+F,EAAOlD,QAAQ+D,UACrB,KAAKnG,EAAU,GACbkG,EAAS9G,OAAS8G,EAAS9G,OAAOgH,QAAO,SAACzH,GAAD,OAAOA,IAAMkH,KACtD,MACF,KAAK7F,EAAU,GACbkG,EAAS7G,OAAS6G,EAAS7G,OAAO+G,QAAO,SAACzH,GAAD,OAAOA,IAAMkH,KACtD,MACF,KAAK7F,EAAU,GACbkG,EAAS5G,OAAS4G,EAAS5G,OAAO8G,QAAO,SAACzH,GAAD,OAAOA,IAAMkH,KACtD,MACF,KAAK7F,EAAU,GACbkG,EAAS3G,OAAS2G,EAAS3G,OAAO6G,QAAO,SAACzH,GAAD,OAAOA,IAAMkH,KAM1D,OAAQP,EAAOlD,QAAQ1C,OACrB,KAAKM,EAAU,GACbkG,EAAS9G,OAAOiH,OAAOf,EAAOlD,QAAQkE,SAAU,EAAGT,GACnD,MACF,KAAK7F,EAAU,GACbkG,EAAS7G,OAAOgH,OAAOf,EAAOlD,QAAQkE,SAAU,EAAGT,GACnD,MACF,KAAK7F,EAAU,GACbkG,EAAS5G,OAAO+G,OAAOf,EAAOlD,QAAQkE,SAAU,EAAGT,GACnD,MACF,KAAK7F,EAAU,GACbkG,EAAS3G,OAAO8G,OAAOf,EAAOlD,QAAQkE,SAAU,EAAGT,GAKvD,OAAOK,GAGHK,GAAmB,SACvBzH,EACAwG,GAEA,IAAMO,EAAQ/G,EAASW,MAAMqG,QAC3B,SAACC,EAAaC,EAASH,GAAvB,OACEG,EAAQhH,MAAQsG,EAAOlD,QAAQvC,KAAKb,IAAM6G,EAAQE,KACnD,GAEH,MAAO,CAGL3G,OAAQN,EAASM,OACdgH,QAAO,SAACzH,GAAD,OAAOA,IAAMkH,KACpBW,KAAI,SAAC7H,GAAD,OAAQA,EAAIkH,EAAQlH,EAAI,EAAIA,KACnCU,OAAQP,EAASO,OACd+G,QAAO,SAACzH,GAAD,OAAOA,IAAMkH,KACpBW,KAAI,SAAC7H,GAAD,OAAQA,EAAIkH,EAAQlH,EAAI,EAAIA,KACnCW,OAAQR,EAASQ,OACd8G,QAAO,SAACzH,GAAD,OAAOA,IAAMkH,KACpBW,KAAI,SAAC7H,GAAD,OAAQA,EAAIkH,EAAQlH,EAAI,EAAIA,KACnCY,OAAQT,EAASS,OACd6G,QAAO,SAACzH,GAAD,OAAOA,IAAMkH,KACpBW,KAAI,SAAC7H,GAAD,OAAQA,EAAIkH,EAAQlH,EAAI,EAAIA,OAIjC8H,GAAuB,SAC3BtC,EACAmB,GAEA,IAAMO,EAA4B1B,EAAMS,IAAIU,EAAOlD,QAAQtD,SAASE,KAEpE,IAAK6G,GAAmB,IAAVA,EAAa,OAAO1B,EAClC,IAAIuC,EAASvC,EAAMrB,UAAU6D,QAE7B,OADAD,EAAOb,GAASP,EAAOlD,QAAQtD,SACxB,CACLgE,UAAW4D,EACX9B,IAAKT,EAAMS,MAITgC,GAAsB,SAAC9H,GAC3B,IAAI+H,EAAa/H,EAASW,MAAM2B,OAChC,GACEyF,IACA/H,EAASM,OAAOgC,OACdtC,EAASO,OAAO+B,OAChBtC,EAASQ,OAAO8B,OAChBtC,EAASS,OAAO6B,OAClB,CAEA,IADA,IAAMxB,EAAiC,GAC9BqB,EAAI,EAAGA,EAAI4F,EAAY5F,IAAKrB,EAAIqB,GAAK,EA+B9C,OA9BAnC,EAASM,OAASN,EAASM,OACxBoH,KAAI,SAAC7H,GAEJ,OADAiB,EAAIjB,GAAK,EACFA,EAAIkI,GAAclI,GAAK,EAAIA,GAAK,KAExCyH,QAAO,SAACzH,GAAD,OAAc,IAAPA,KACjBG,EAASO,OAASP,EAASO,OACxBmH,KAAI,SAAC7H,GAEJ,OADAiB,EAAIjB,GAAK,EACFA,EAAIkI,GAAclI,GAAK,EAAIA,GAAK,KAExCyH,QAAO,SAACzH,GAAD,OAAc,IAAPA,KACjBG,EAASQ,OAASR,EAASQ,OACxBkH,KAAI,SAAC7H,GAEJ,OADAiB,EAAIjB,GAAK,EACFA,EAAIkI,GAAclI,GAAK,EAAIA,GAAK,KAExCyH,QAAO,SAACzH,GAAD,OAAc,IAAPA,KACjBG,EAASS,OAAST,EAASS,OACxBiH,KAAI,SAAC7H,GAEJ,OADAiB,EAAIjB,GAAK,EACFA,EAAIkI,GAAclI,GAAK,EAAIA,GAAK,KAExCyH,QAAO,SAACzH,GAAD,OAAc,IAAPA,KACjB+F,OAAOoC,KAAKlH,GAAKmF,SAAQ,SAACgC,GACxB,IAAMC,EAAUC,SAASF,GACJ,IAAjBnH,EAAIoH,IACNlI,EAASM,OAAO8H,KAAKF,MAGlBlI,EAEP,OAAOA,GAWEyG,GAAiB,WAIA,IAF5BpB,EAE2B,uDAFKsB,GAChCH,EAC2B,uCAC3B,OAAQA,EAAOpD,MACb,KAAKC,EACH,OAAOsD,GACT,KAAKtD,EACH,IAAI5D,EAA0B+G,EAAOlD,QAAQU,UACvC8B,EAAkB,GAExBrG,EAAQA,EAAMiI,KAAI,SAAC1H,GAAD,OAAc8H,GAAoB9H,MACpD,IAAK,IAAImC,EAAI,EAAGA,EAAI1C,EAAM6C,OAAQH,IAChC2D,EAAIrG,EAAM0C,GAAGjC,KAAOiC,EAEtB,MAAO,CACL6B,UAAWvE,EACXqG,IAAKA,GAET,KAAKzC,EACH,MAAO,CACLW,UAAU,GAAD,oBAAMqB,EAAMrB,WAAZ,CAAuBwC,EAAOlD,QAAQtD,WAC/C8F,IAAI,6BACCT,EAAMS,KADR,mBAEAU,EAAOlD,QAAQtD,SAASE,IAAMmF,EAAMrB,UAAU1B,UAGrD,KAAKe,EACH,OAAImD,EAAOlD,QAAQiC,YAAoBF,EAChCsC,GAAqBtC,EAAOmB,GACrC,KAAKnD,EACH,OAAOsE,GAAqBtC,EAAOmB,GACrC,KAAKnD,EACH,IAAMgF,EAA6BhD,EAAMS,IAAIU,EAAOlD,QAAQgF,YAC5D,IAAKD,GAAqB,IAAXA,EAAc,OAAOhD,EAOpC,IANA,IAAMkD,EAAM,uBACPlD,EAAMrB,UAAU6D,MAAM,EAAGQ,IADlB,aAEPhD,EAAMrB,UAAU6D,MAAMQ,EAAS,KAE9BG,EAAmB,GAEhBrG,EAAI,EAAGA,EAAIoG,EAAOjG,OAAQH,IACjCqG,EAAKD,EAAOpG,GAAGjC,KAAOiC,EAExB,MAAO,CACL6B,UAAWuE,EACXzC,IAAK0C,GAET,KAAKnF,EACH,MAAO,CACLW,UAAWqB,EAAMrB,UAAU0D,KAAI,SAAC1H,GAC9B,OAAIA,EAASE,MAAQsG,EAAOlD,QAAQgF,WAAmBtI,EAChD,6BACFA,GADL,IAEEM,OAAO,GAAD,oBAAMN,EAASM,QAAf,CAAuBN,EAASW,MAAM2B,SAC5C3B,MAAM,GAAD,oBAAMX,EAASW,OAAf,CAAsB6F,EAAOlD,QAAQvC,YAG9C+E,IAAKT,EAAMS,KAGf,KAAKzC,EACH,MAAO,CACLW,UAAWqB,EAAMrB,UAAU0D,KAAI,SAAC1H,GAC9B,OAAIA,EAASE,MAAQsG,EAAOlD,QAAQgF,WAAmBtI,EAChD,6BACFA,GADL,IAEEW,MAAOX,EAASW,MAAM+G,KAAI,SAAC3G,GACzB,OAAIA,EAAKb,MAAQsG,EAAOlD,QAAQvC,KAAKb,IAAYa,EAC1CyF,EAAOlD,QAAQvC,aAI5B+E,IAAKT,EAAMS,KAEf,KAAKzC,EACH,MAAO,CACLW,UAAWqB,EAAMrB,UAAU0D,KAAI,SAAC1H,GAC9B,GAAIA,EAASE,MAAQsG,EAAOlD,QAAQgF,WAAY,OAAOtI,EACvD,IAAMW,EAAQX,EAASW,MAAM2G,QAC3B,SAACJ,GAAD,OAAaA,EAAQhH,MAAQsG,EAAOlD,QAAQvC,KAAKb,OAE7CuI,EAAShB,GAAiBzH,EAAUwG,GAC1C,OAAO,0CACFxG,GACAyI,GAFL,IAGE9H,MAAOA,OAGXmF,IAAKT,EAAMS,KAEf,KAAKzC,EACH,MAAO,CACLW,UAAWqB,EAAMrB,UAAU0D,KAAI,SAAC1H,GAC9B,OAAIA,EAASE,MAAQsG,EAAOlD,QAAQgF,WAAmBtI,EAChD,6BACFA,GACA8G,GAAc9G,EAAUwG,OAG/BV,IAAKT,EAAMS,KAEf,QACE,OAAOT,IC9QPqD,GAAoC,CACxCC,OAAQ,UACRC,iBAAkB,WAClBC,kBAAmB,WACnBC,UAAU,GAsCG3C,GAnCY,WAID,IAFxBd,EAEuB,uDAFKqD,GAC5BlC,EACuB,uCACvB,OAAQA,EAAOpD,MACb,KAAKC,EACH,OAAO,6BAAKgC,GAAZ,IAAmBsD,OAAQ,aAC7B,KAAKtF,EACH,OAAO,6BAAKgC,GAAZ,IAAmBsD,OAAQ,aAC7B,KAAKtF,EACH,OAAO,6BAAKgC,GAAZ,IAAmByD,UAAU,EAAMH,OAAQ,WAC7C,KAAKtF,EACH,OAAO,6BAAKgC,GAAZ,IAAmByD,UAAU,EAAOH,OAAQ,WAC9C,KAAKtF,EACH,OAAO,6BAAKgC,GAAZ,IAAmBsD,OAAQ,eAAgBC,iBAAkBpC,EAAOlD,QAAQG,SAC9E,KAAKJ,EACH,OAAO,6BAAKgC,GAAZ,IAAmBsD,OAAQ,gBAAiBE,kBAAmBrC,EAAOlD,QAAQG,SAChF,KAAKJ,EACL,KAAKA,EACH,OAAO,6BAAKgC,GAAZ,IAAmBsD,OAAQ,WAC7B,KAAKtF,EACL,KAAKA,EACL,KAAKA,EACL,KAAKA,EACL,KAAKA,EACL,KAAKA,EACL,KAAKA,EACL,KAAKA,EACH,OAAO,6BAAKgC,GAAZ,IAAmBsD,OAAQ,kBAC7B,QACE,OAAOtD,ICjBPqD,GAAqC,GAKrCK,GAAY,SAChBpF,EACAqF,EACA3D,GACI,IAAD,EACH,GAAW,KAAP1B,EAAW,OAAO0B,EACtB,IAAM4D,EAAW5D,EAAM1B,GAMvB,OAJIsF,GAAYA,EAAS1F,WACvBI,GAAMxC,GAGD,6BACFkE,GADL,mBAEG1B,EAAK,CACJJ,UAAU,EACVF,MAAM,6BAAD,QAAC,EACDgC,EAAM1B,UADN,aACA,EAAWN,OACX2F,OAiFIxD,GA3EW,WAIC,IAFzBH,EAEwB,uDAFKqD,GAC7BlC,EACwB,uCAClBwC,EAAkC,GACpCrF,EAAK,GACT,OAAQ6C,EAAOpD,MAGb,KAAKC,EACH2F,EAAY3F,EAAiBxF,UAAY,EACzC8F,EAAK6C,EAAOlD,QAAQgF,WACpB,MACF,KAAKjF,EACH2F,EAAY3F,EAAiB6F,WAAa,EAC1CvF,EAAK6C,EAAOlD,QAAQgF,WACpB,MACF,KAAKjF,EACH2F,EAAY3F,EAAiB8F,YAAc,EAC3CxF,EAAK6C,EAAOlD,QAAQgF,WACpB,MACF,KAAKjF,EACH2F,EAAY3F,EAAiB6F,WAAa,EAC1CF,EAAY3F,EAAiB8F,YAAc,EAC3CxF,EAAK6C,EAAOlD,QAAQgF,WACpB,MAEF,KAAKjF,EACH2F,EAAY3F,EAAiB+F,eAAiB,EAC9CzF,EAAK6C,EAAOlD,QAAQtD,SAASE,IAC7B,MAEF,KAAKmD,EACH,IAAMgG,EAAY,gBAAOhE,GAGzB,cAFOgE,EAAa7C,EAAOlD,QAAQgF,mBAC5Be,EAAa,GAAD,OAAI7C,EAAOlD,QAAQgF,YAAnB,OAAgCnH,IAC5CkI,EAET,KAAKhG,EACL,KAAKA,EACH,OAAOqF,GACT,KAAKrF,EACH,IAAIvC,EAAMuE,EAAMmB,EAAOlD,QAAQpD,KAC/B,YAAYD,IAARa,EACK,6BAAKuE,GAAZ,mBAAoBmB,EAAOlD,QAAQpD,IAAnC,6BAA8CY,GAA9C,IAAmDyC,UAAU,MAExD8B,EAET,KAAKhC,EAEH,YAAYpD,KADZa,EAAMuE,EAAMmB,EAAOlD,QAAQpD,MAElB,6BAAKmF,GAAZ,mBAAoBmB,EAAOlD,QAAQpD,IAAnC,6BAA8CY,GAA9C,IAAmDyC,UAAU,MAExD8B,EACT,KAAKhC,EAGH,IAAMiG,EAAS,gBAAQjE,GACjBkE,EAAM/C,EAAOlD,QAAQtD,SAASE,IAOpC,YANqCD,IAAjCqJ,EAAUC,EAAMpI,IAClBmI,EAAUC,GAAV,gBAAsBD,EAAUC,EAAMpI,WAC/BmI,EAAUC,EAAMpI,WAEhBmI,EAAUC,GAEZD,EAET,QACE,OAAOjE,EAGX,OAAO0D,GAAUpF,EAAIqF,EAAa3D,IC1H9BqD,GAAiC,CACrCnJ,SAAU,OACVN,IAAK,EACLC,MAAO,OACPC,UAAW,IAAIiF,KAAKA,KAAKwC,OACzBxH,MAAO,OACPC,KAAM,OACNC,UAAW,IAAI8E,KAAKA,KAAKwC,QAgBZ7C,GAbE,WAIM,IAFrBsB,EAEoB,uDAFKqD,GACzBlC,EACoB,uCACpB,OAAOA,EAAOpD,MACZ,KAAKC,EACH,OAAOmD,EAAOlD,QAAQQ,KACxB,QACE,OAAOuB,ICrBEmE,GAFKC,YAAgB,CAAEhD,kBAAgBN,eAAaX,cAAYzB,cCPlE2F,GAAe,SAACrE,GAAD,OAC1BA,EAAMoB,eAAezC,WA8BV2F,GAAkB,SAACtE,EAAkBuE,GAChD,IAAI5F,EAAY0F,GAAarE,GAEvB1B,EAhCsB,SAAC0B,GAAD,OAAsBA,EAAMoB,eAAeX,IA+B7D+D,CAAexE,GACVuE,EAAMjG,IACrB,YAAW1D,IAAP0D,GAAoBA,EAAK,GAAKA,GAAMK,EAAU1B,OAAe,KAC1D0B,EAAUL,IAGNmG,GAAc,SAACzE,GAC1B,OAAOA,EAAMc,YAAY2C,UAGdiB,GAAiB,SAAC1E,GAC7B,OAAOA,EAAMc,YAAYwC,QAGdqB,GAAc,SAAC3E,GAC1B,OAAOA,EAAMtB,UAOFkG,GAAsB,SAAC5E,GAClC,OAAOA,EAAMc,YAAYyC,kBAedsB,GAAsB,SAAClK,GAElC,IADA,IAAMmK,EAAU,IAAIzK,MAAoBwB,EAAUoB,OAAS,GAClDH,EAAI,EAAGA,EAAIgI,EAAQ7H,OAAQH,IAClCgI,EAAQhI,GAAK,GAcf,OAZAnC,EAASM,OAAO2F,SAAQ,SAACiB,GAAD,OACtBiD,EAAQ,GAAG/B,KAAKpI,EAASW,MAAMuG,OAEjClH,EAASO,OAAO0F,SAAQ,SAACiB,GAAD,OACtBiD,EAAQ,GAAG/B,KAAKpI,EAASW,MAAMuG,OAEjClH,EAASQ,OAAOyF,SAAQ,SAACiB,GAAD,OACtBiD,EAAQ,GAAG/B,KAAKpI,EAASW,MAAMuG,OAEjClH,EAASS,OAAOwF,SAAQ,SAACiB,GAAD,OACtBiD,EAAQ,GAAG/B,KAAKpI,EAASW,MAAMuG,OAE1BiD,GCEMC,GApFQ,WACrB,IAAM5F,EAAQ6F,YAAY/D,GAAQkD,IAAcc,YAAgBC,MAgFhE,OA5EA/F,EAAMgG,UACJC,oBAAS,WAEP,IAAMpF,EAAQb,EAAMc,WACdoF,EDoCmB,SAACrF,GAC9B,OAAOA,EAAMG,WCrCOmF,CAAgBtF,GAC1BtF,EAAO6F,OAAOoC,KAAK0C,GACzB,KAAI3K,EAAKuC,QAAU,GAAnB,CAEA,IADA,IAAIH,EAAI,EACDA,EAAIpC,EAAKuC,UAEoB,IAA9BoI,EAAQ3K,EAAKoC,IAAIoB,UACZxD,EAAKoC,GAAGpC,EAAKoC,GAAGG,OAAS,KAAOnB,GAHnBgB,KAKxB,GAAIA,IAAMpC,EAAKuC,OAAf,CAGA,IAAMqB,EAAK5D,EAAKoC,GACVL,EAAS4I,EAAQ/G,GACvB,QAA6C1D,IAAzC6B,EAAOuB,MAAMzF,EAAWgN,aAI5B,QAA2C3K,IAAvC6B,EAAOuB,MAAMzF,EAAWiN,WAA5B,CAIA,IAAM7K,EAAW2J,GAAgBtE,EAAO,CAAE1B,OAC1C,GAAiB,OAAb3D,EAAJ,CAMA,IAAM8K,EAA2B,CAAE5K,IAAKyD,GAC1BiC,OAAOoC,KAAKlG,EAAOuB,OAC3B4C,SAAQ,SAAC7C,GACb,OAAQ+E,SAAS/E,IAEf,KAAKxF,EAAWC,SACdiN,EAAUnK,MAAQX,EAASW,MAC3BmK,EAAUrC,OAAS,CACjBnI,OAAQN,EAASM,OACjBC,OAAQP,EAASO,OACjBC,OAAQR,EAASQ,OACjBC,OAAQT,EAASS,QAEnB,MACF,KAAK7C,EAAWsL,UACd4B,EAAUnK,MAAQX,EAASW,MAC3B,MACF,KAAK/C,EAAWI,gBACd8M,EAAUC,QAAS,EACnB,MACF,KAAKnN,EAAWuL,WACd2B,EAAUrC,OAAS,CACjBnI,OAAQN,EAASM,OACjBC,OAAQP,EAASO,OACjBC,OAAQR,EAASQ,OACjBC,OAAQT,EAASS,QAEnBqK,EAAUE,YAAchL,EAASW,MAAM2B,OACvC,MACF,KAAK1E,EAAWwL,cACd0B,EAAU1K,KAAOJ,EAASI,KAC1B0K,EAAU3K,YAAcH,EAASG,qBAMfF,IAApB6K,EAAUnK,OAAuBmK,EAAUnK,MAAM2B,OAAS,IAAGwI,EAAUG,OAAQ,GAEnFzG,EAAMC,SAASF,GAAsBuG,EAAWtG,SA5C9CS,QAAQiG,MACN,sFANFjG,QAAQC,KAAK,0DAJbD,QAAQC,KAAK,4DAsDd,OAGEV,G,6HC3CH2G,GAASC,cAAW,SAACC,GAAD,MAAY,CACpCC,MAAO,CAAEC,SAAU,IAAKC,QAAS,OAAQC,eAAgB,QACzDC,KAAM,CACJC,SAAU,SACVC,MAAO,CACLC,gBAAiB,WAGrBC,MAAM,cACJC,UAAW,MACXC,MAAO,OACPC,OAAQ,QACPZ,EAAMa,YAAYC,GAAG,MAAQ,CAAEH,MAAO,OAAQC,OAAQ,SAEzDG,UAAW,CAAEC,cAAe,YA4GfC,iBARS,SAACjH,GAKvB,MAAO,CAAEyD,SAAUgB,GAAYzE,GAAQtB,SAAUiG,GAAY3E,MAGhDiH,EAzGwB,SAAC,GAMjC,IAtCLC,EACAhN,EAgCA0C,EAKI,EALJA,UACAQ,EAII,EAJJA,gBAEAqG,GAEI,EAHJpG,eAGI,EAFJoG,UACA/E,EACI,EADJA,SAGMyI,EAAUC,eACVC,EAAUvB,KAHZ,EAI4BwB,oBAAS,GAJrC,oBAIGC,EAJH,KAIaC,EAJb,OAKsCF,mBAAS,GAL/C,oBAKGG,EALH,KAKkBC,EALlB,OAM0CJ,mBAAS,GANnD,oBAMGK,EANH,KAMoBC,EANpB,KA6BEC,EAtBgB,SAACC,GAErB,IADA,IAAMC,EAA+B,IAAI1N,MAAMyN,EAAO7K,QADA,WAE7CH,GACPiL,EAASjL,GACP,cAACkL,GAAA,EAAD,CACEnO,MAAM,UACNoO,QAAQ,WACRC,MAAO,CAAEC,WAAY,WACrBjB,QAAS,SAACkB,GACRjB,EAAQpE,KAAK+E,EAAOhL,GAAGK,QAL3B,SASE,cAACkL,GAAA,EAAD,CAAYJ,QAAQ,QAApB,SAA6BH,EAAOhL,GAAG/B,QAFlCuN,iBATFxL,EAAI,EAAGA,EAAIiL,EAAS9K,OAAQH,IAAM,EAAlCA,GAeT,OAAOiL,EAKcQ,CAAcnL,GAC/BoL,GApENtB,EAiEqB,kBAAMC,EAAQpE,KAAK,WAhExC7I,EAmEsDwE,EAASxE,SAhE7D,8BACE,eAACmO,GAAA,EAAD,CAAYJ,QAAQ,QAAQQ,QAAM,EAAlC,sBACY,IAAMvO,EAAW,IAC3B,cAAC8N,GAAA,EAAD,CAAQd,QAASA,EAASrN,MAAM,UAAhC,0BA+DA6O,EAAc,SAAClO,GACnBoN,EAAmBe,OAAOC,cAuB5B,OApBAC,qBAAU,WAGR,OAFAF,OAAOG,iBAAiB,SAAUJ,GAE3B,WACLC,OAAOI,oBAAoB,SAAUL,MAEtC,IAEHG,qBAAU,WACJlB,EAAkBF,GACpBD,GAAY,GACZE,EAAiBC,IACRA,EAAkBF,GAC3BD,GAAY,GACZE,EAAiBC,IACY,IAApBA,GACTH,GAAY,KAEb,CAACC,EAAeE,IAGjB,eAAC,IAAMqB,SAAP,YACsB,IAAlBvB,IAAwBF,IACxB,cAAC0B,GAAA,EAAD,CACE3C,SAAS,QACTzM,MAAQ0N,EAAuB,cAAZ,UACnB2B,UAAY3B,EAAe,EAAJ,EAHzB,SAKE,eAAC4B,GAAA,EAAD,WACE,sBAAKC,UAAW/B,EAAQpB,MAAxB,UACE,qBACEoD,IC1ID,6zSD2ICD,UAAW/B,EAAQZ,MACnB6C,IAAI,yBAEN,cAACtB,GAAA,EAAD,CACEoB,UAAW/B,EAAQN,UACnBlN,MAAM,UACNqN,QAAS,kBAAMC,EAAQpE,KAAKnG,EAAUO,QAHxC,SAKE,cAACkL,GAAA,EAAD,CAAYJ,QAAQ,KAApB,SACGrL,EAAU7B,YAIhB0I,GAAY+E,GACX/E,GAAYoE,OAIpB,cAACsB,GAAA,EAAD,U,mGE/FSI,GA/CiC,SAAC,GAM1C,IALLC,EAKI,EALJA,SACAC,EAII,EAJJA,MACAC,EAGI,EAHJA,IACAxB,EAEI,EAFJA,MACGyB,EACC,mDACEC,EAA+B,CACnCC,WAAW,aAAD,OAAeF,EAAgBG,QAA/B,kBACVC,UAAU,SAAD,OAAWN,EAAX,aAAqBA,EAArB,MAGLO,EAAkE,CACtEC,SAAU,CACRF,UAAU,SAAD,OAAWL,EAAX,aAAmBA,EAAnB,MAEXQ,QAAS,CACPH,UAAU,SAAD,OAAWL,EAAX,aAAmBA,EAAnB,MAEXS,QAAS,CACPJ,UAAU,SAAD,OAAWN,EAAX,aAAqBA,EAArB,MAEXW,OAAQ,CACNL,UAAU,SAAD,OAAWN,EAAX,aAAqBA,EAArB,MAEXY,UAAW,CACTN,UAAU,SAAD,OAAWL,EAAX,aAAmBA,EAAnB,OAIb,OACE,cAACY,GAAA,EAAD,6BAAgBX,GAAhB,aACG,SAAC3J,GAAD,OACC,qBACEkI,MAAK,0CACAA,GACA0B,GACAI,EAAiBhK,IAJxB,SAOGwJ,S,oBChDL1D,GAASC,cAAW,SAACC,GAAD,MAAY,CACpCuE,SAAU,CACRC,OAAQxE,EAAMwE,OAAOC,OAAS,EAC9B5Q,MAAO,YAaI6Q,GATgC,SAAC,GAAc,IAAZC,EAAW,EAAXA,KAC1CtD,EAAUvB,KAChB,OACE,cAAC8E,GAAA,EAAD,CAAUxB,UAAW/B,EAAQkD,SAAUM,KAAMF,EAA7C,SACE,cAACG,GAAA,EAAD,CAAkBjR,MAAM,e,0FCqBjBiM,GAASC,cAAW,SAACC,GAAD,MAAY,CAC3C+E,KAAK,cACHC,SAAU,QACVC,SAAU,QACVC,OAAQ,OACRxE,UAAW,OACXyE,UAAW,QACXhF,QAAS,QACRH,EAAMa,YAAYuE,KAAK,MAAQ,CAAE1E,UAAW,SAE/CL,KAAM,CACJF,QAAS,OACTC,eAAgB,UAElBiF,YAAa,CACXlF,QAAS,OACTmF,cAAe,SACflF,eAAgB,gBAChBmF,KAAM,GAERC,OAAQ,CACND,KAAM,GAERE,YAAa,CACXF,KAAM,EACNpF,QAAS,OACTmF,cAAe,MACflF,eAAgB,QAChBsF,WAAY,UAEdC,MAAO,CACLrF,SAAU,WACVsF,IAAK,YA2JHC,GAAoB,CACxBC,SbwE0B,SAC1BC,GAOA,OAAO,SAAU3M,GAEf,OADAA,EAAStB,GAASE,EAAe,KA/DhB,SACnB+N,GAEA,OAAO1M,IACJC,KAAK/B,EAAmBwO,GACxBvM,MAAK,SAACC,GAAD,OAAcb,GAAmBa,EAASC,KAAKjB,SACpDkB,OAAM,qBAAGF,SAA8BZ,QAAQC,OAAO/C,EAAa,OA0D7DiQ,CAAaD,GACjBvM,MAAK,SAAChB,GAAD,OAA+BY,EAASb,GAAaC,OAC1DmB,OAAM,SAACvB,GAAD,OAA0BgB,EAASjB,GAAUC,UajF3C6I,iBAfS,SAACjH,GAQvB,MAAO,CAAEyD,SAPQgB,GAAYzE,GAOVsD,OANJoB,GAAe1E,GAMHiM,WALRrH,GAAoB5E,MAYD6L,GAAzB5E,EA3Je,SAAC,GAAgD,IAA9CxD,EAA6C,EAA7CA,SAAUqI,EAAmC,EAAnCA,SAAUxI,EAAyB,EAAzBA,OAAQ2I,EAAiB,EAAjBA,WAAiB,EACpC3E,oBAAS,GAD2B,oBACrE4E,EADqE,KACvDC,EADuD,OAEtC7E,oBAAS,GAF6B,oBAErE8E,EAFqE,KAExDC,EAFwD,OAG5C/E,mBAAS,IAHmC,oBAGrEpN,EAHqE,KAG3DoS,EAH2D,OAI5ChF,mBAAS,IAJmC,oBAIrEhL,EAJqE,KAI3DiQ,EAJ2D,KAKtElF,EAAUvB,KACVqB,EAAUC,eAYVuE,EARF,cAACa,GAAA,EAAD,CAAUC,GAAIL,EAAahD,UAAW/B,EAAQsE,MAA9C,SACE,cAACe,GAAA,EAAD,CAAOzE,QAAQ,SAAS0E,SAAS,QAAjC,mCASN9D,qBAAU,WACJpF,GACF0D,EAAQpE,KAAK,OAEd,CAACU,EAAU0D,IAEd0B,qBAAU,WACR,GAAIuD,EAAa,CACf,IAAIQ,EAAQC,YAAW,WACjBT,GACFC,GAAe,KAEhB,KACH,OAAO,kBAAMS,aAAaF,OAG3B,CAACR,IAEJvD,qBAAU,WACR,GAAe,iBAAXvF,EACJ,OAAQ2I,GACN,IAAK,QAEH,YADAI,GAAe,GAEjB,QACE,UAEH,CAAC/I,EAAQ2I,IAsBZ,OACE,sBAAK7C,UAAW/B,EAAQhB,KAAxB,UACGsF,EACD,cAACoB,GAAA,EAAD,CAAM3D,UAAW/B,EAAQ0D,KAAzB,SACE,uBACEiC,SAjBS,SAACC,GAGhB,IAAIC,GAFJD,EAAWE,iBACI,aAAX7J,GAAoC,aAAXA,KAG3B4J,GAD4B,IAA1BhT,EAASkT,OAAO,KACP,CAAE9Q,SAAUD,EAAaC,GAAWvC,MAAOG,GAE3C,CAAEoC,SAAUD,EAAaC,GAAWpC,YAEjD4R,EAASoB,KASHG,aAAa,KACbjE,UAAW/B,EAAQgE,YAHrB,UAKE,eAACiC,GAAA,EAAD,CAAalE,UAAW/B,EAAQgE,YAAhC,UACE,cAAChD,GAAA,EAAD,CAAYJ,QAAQ,KAAKmB,UAAW/B,EAAQmE,OAA5C,mBAGA,sBACA,cAAC+B,GAAA,EAAD,CACEnE,UAAW/B,EAAQmE,OACnBgC,UAAQ,EACRC,WAAS,EACTnP,GAAG,WACHoP,MAAM,mBACNzF,QAAQ,WACRoF,aAAa,WACbM,MAAOzT,EACP0T,SAAU,SAACpT,GAAD,OAvCC,SAACA,GACtB8R,EAAY9R,GAsCeqT,CAAerT,EAAEsT,OAAOH,UAE3C,sBACA,cAACJ,GAAA,EAAD,CACEnE,UAAW/B,EAAQmE,OACnBgC,UAAQ,EACRlP,GAAG,WACHP,KAAMmO,EAAe,OAAS,WAC9BwB,MAAM,WACNL,aAAa,mBACbpF,QAAQ,WACR0F,MAAOrR,EACPyR,WAAY,CACVC,aACE,cAACC,GAAA,EAAD,CAAgB3H,SAAS,MAAzB,SACE,cAAC4H,GAAA,EAAD,CACEC,aAAW,6BACXjH,QAAS,SAACkB,GAAD,OAAQ+D,GAAiBD,IAClCkC,YAAa,SAAC5T,GAAD,OACXA,EAAE2S,kBAJN,SAOGjB,EAAe,cAACmC,GAAA,EAAD,IAAiB,cAACC,GAAA,EAAD,SAKzCV,SAAU,SAACpT,GAAD,OAtEC,SAACA,GACtB+R,EAAY/R,GAqEe+T,CAAe/T,EAAEsT,OAAOH,aAG7C,cAACL,GAAA,EAAD,CAAalE,UAAW/B,EAAQoE,YAAhC,SACE,cAACzD,GAAA,EAAD,CACEC,QAAQ,WACRpO,MAAM,UACN8T,MAAM,QACNa,WAAS,EACTC,QAAS,cAACC,GAAA,EAAD,IACT3Q,KAAK,SANP,SAQE,cAACsK,GAAA,EAAD,CAAYJ,QAAQ,KAApB,kCCtKRnC,GAASC,cAAW,SAACC,GAAD,MAAY,CACpC+E,KAAM,CACJpE,MAAO,MACPwB,WAAY,KACZwG,YAAa,MAEflD,YAAa,CACXtF,QAAS,OACTmF,cAAe,MACflF,eAAgB,YAElBwI,WAAY,CACVD,YAAa,YAwIX9C,GAAoB,CACxBgD,gBd2KgC,SAChClU,GAOA,OAAO,SAAUyE,GAEf,OADAA,EAASlB,GAASF,EAAe,KA/IV,SACzBrD,GAEA,OAAO0E,IACJC,KAAKwP,GAAyBnU,EAAU,CAAE4E,iBAAiB,IAC3DC,MAAK,SAACC,GAAD,OAAcT,GAAgBS,EAASC,SAC5CC,OAAM,qBAAGF,SAA8BZ,QAAQC,OAAO9C,EAAY,OA0I5D+S,CAAmBpU,GACvB6E,MAAK,SAACO,GAAD,OACJX,EAnM2B,CACjCrB,KAAMC,EACNC,QAAS,CACPtD,SAgMmCoF,EAhMrBpF,eAkMXgF,OAAM,SAACvB,GAAD,OAAyBgB,EAASf,GAAWD,UctL3C6I,iBARS,SAACjH,GACvB,MAAO,CAAEG,WAAYuE,GAAe1E,MAOE6L,GAAzB5E,EAxIwB,SAAC,GAOjC,IANL9G,EAMI,EANJA,WACA0O,EAKI,EALJA,gBACAG,EAII,EAJJA,SACAC,EAGI,EAHJA,WACApE,EAEI,EAFJA,KACAqE,EACI,EADJA,OAEMC,EAAUC,iBAAO,CAAEzB,MAAO,KAD5B,EAEkCrG,oBAAS,GAF3C,oBAEG+H,EAFH,KAEgBC,EAFhB,OAGoChI,mBAAS,IAH7C,oBAGGiI,EAHH,KAGiBC,EAHjB,OAIkClI,oBAAS,GAJ3C,oBAIG8E,EAJH,KAIgBC,EAJhB,KAKElF,EAAUC,eACVqI,EAAiBL,iBAAO,CAAEzB,MAAO,KACjCtG,EAAUvB,KACV4J,EAAiBC,KAYjBhE,EARF,cAACa,GAAA,EAAD,CAAUC,GAAIL,EAAahD,UAAWsG,EAAe/D,MAArD,SACE,cAACe,GAAA,EAAD,CAAOzE,QAAQ,SAAS0E,SAAS,QAAjC,SACG4C,MAQT1G,qBAAU,WACR,GAAIuD,EAAa,CACf,IAAIwD,EAASL,EACT3C,EAAQC,YAAW,WACjB+C,IAAWL,GAAclD,GAAe,KAC3C,KACH,OAAO,kBAAMS,aAAaF,OAG3B,CAACR,EAAamD,IAEjB1G,qBAAU,WACJwG,GAA8B,WAAflP,IACjBmP,GAAe,GACfL,KAEEI,GAA8B,kBAAflP,IACjBmP,GAAe,GACfE,EAAgB,sDAChBnD,GAAe,MAEhB,CAACgD,EAAalP,EAAYgH,EAAS8H,IAmBtC,OACE,cAACY,GAAA,EAAD,CAAMpD,GAAI5B,EAAMiF,eAAe,EAAMC,SAAUb,EAA/C,SACE,sBAAK9F,UAAWsG,EAAerJ,KAA/B,UACE,cAAC,GAAD,CAAgBsE,KAAM0E,IACrB1D,EACD,eAACoB,GAAA,EAAD,CAAM3D,UAAW/B,EAAQ0D,KAAzB,UACE,cAACiF,GAAA,EAAD,CAAY/J,MAAM,uBAClB,uBACE+G,SAzBO,SAACC,GAEhB,GADAA,EAAWE,kBACPkC,GAA8B,aAAflP,EAAnB,CACA,IAAMxF,EAA4B,CAChCI,KAAMoU,EAAQc,QAAQtC,MACtB7S,YAAa2U,EAAeQ,QAAQtC,MACpCvK,OAAQ,CAAEnI,OAAQ,GAAIC,OAAQ,GAAIC,OAAQ,GAAIC,OAAQ,IACtDE,MAAO,IAETgU,GAAe,GACfT,EAAgBlU,KAgBR0S,aAAa,MACbjE,UAAWsG,EAAerE,YAH5B,UAKE,eAACiC,GAAA,EAAD,CAAalE,UAAWsG,EAAerE,YAAvC,UACE,cAACkC,GAAA,EAAD,CACEnE,UAAWsG,EAAelE,OAC1BgC,UAAQ,EACRC,WAAS,EACTnP,GAAG,OACHoP,MAAM,OACNzF,QAAQ,WACRiI,SAAUf,IAEZ,sBACA,cAAC5B,GAAA,EAAD,CACEnE,UAAWsG,EAAelE,OAC1BlN,GAAG,cACHoP,MAAM,cACNzF,QAAQ,WACRiI,SAAUT,OAGd,eAACnC,GAAA,EAAD,CAAalE,UAAW/B,EAAQoE,YAAhC,UACE,cAACzD,GAAA,EAAD,CACEoB,UAAW/B,EAAQuH,WACnB3G,QAAQ,WACRpO,MAAM,YACN8T,MAAM,SACNc,QAAS,cAAC0B,GAAA,EAAD,IACTjJ,QA1CC,WACb8H,KAmCU,oBAUA,cAAChH,GAAA,EAAD,CACEC,QAAQ,WACRpO,MAAM,UACN8T,MAAM,cACN5P,KAAK,SACL0Q,QAAS,cAAC2B,GAAA,EAAD,IALX,8CCvIRlI,GAAQnC,cAAW,SAACC,GAAD,MAAY,CACnCK,KAAM,CACJH,SAAU,EACVmK,YAAa,OACbC,aAAc,OACd5J,UAAW,QAEb6J,MAAO,CACLrF,OAAQ,QAEVsF,QAAS,CACPtK,SAAU,GAEZ6E,KAAK,cACHpE,MAAO,SACNX,EAAMa,YAAYuE,KAAK,MAAQ,CAAEzE,MAAO,UAE3C8J,OAAQ,CACNjK,gBAAiB,OACjB3M,MAAOmM,EAAM0K,QAAQC,QAAQC,MAE/BC,UAAW,CACTC,SAAU,GACVtK,gBAAiB,cACjB3M,MAAOmM,EAAM0K,QAAQC,QAAQC,MAE/BG,WAAY,CACVvK,gBAAiB,cACjB3M,MAAOmM,EAAM0K,QAAQC,QAAQC,UAa3BI,GAAsC,SAAC,GAKtC,IAJL3J,EAII,EAJJA,QACA4J,EAGI,EAHJA,SACApG,EAEI,EAFJA,KACAqE,EACI,EADJA,OACI,EACsB5H,oBAAS,GAD/B,oBACG4J,EADH,KACUC,EADV,KAMJ,OACE,cAACtB,GAAA,EAAD,CAAMpD,GAAI5B,EAAMkF,SALE,WAClBoB,GAAS,GACTjC,KAGuCY,eAAe,EAAtD,SACE,cAACsB,GAAD,CAAQ3E,GAAIyE,EAAOpH,QAAS,IAAKL,MAAO,GAAKC,IAAK,KAAlD,SACE,cAAC2H,GAAA,EAAD,CAAMC,MAAI,EAAelI,UAAW/B,EAAQ0D,KAA5C,SACE,cAACgC,GAAA,EAAD,CACE3D,UAAW/B,EAAQoJ,OACnBc,YAAa,kBAAMJ,GAAS,IAC5BK,aAAc,kBAAML,GAAS,IAC7BjI,UAAWgI,EAAQ,GAAK,EAJ1B,SAME,cAAClJ,GAAA,EAAD,CAAQwG,WAAS,EAACtH,QAAS,kBAAM+J,KAAjC,SACE,eAAC3D,GAAA,EAAD,WACE,cAACjF,GAAA,EAAD,CAAYJ,QAAQ,KAAKmB,UAAW/B,EAAQoJ,OAA5C,mCAGA,uBACA,uBACA,cAACgB,GAAA,EAAD,CAAWrI,UAAW/B,EAAQwJ,oBAdtBvI,qBA8BlBoJ,GAAsC,SAAC,GAItC,IAHLrK,EAGI,EAHJA,QACA1M,EAEI,EAFJA,SACAsW,EACI,EADJA,SACI,EACsB3J,oBAAS,GAD/B,oBACG4J,EADH,KACUC,EADV,OAEoB7J,mBAAS,IAF7B,oBAEGqK,EAFH,KAESC,EAFT,OAGgCtK,mBAAwB,IAHxD,oBAGGuK,EAHH,KAGeC,EAHf,KAmBJ,OAfAjJ,qBAAU,WACR+I,EAAQ,IAAI7S,KAAKpE,EAASb,WAAWiY,sBACrCD,EAAc,CACZnX,EAASM,OAAOgC,OAChBtC,EAASO,OAAO+B,OAChBtC,EAASQ,OAAO8B,OAChBtC,EAASS,OAAO6B,WAEjB,CACDtC,EAASb,UACTa,EAASM,OAAOgC,OAChBtC,EAASO,OAAO+B,OAChBtC,EAASQ,OAAO8B,OAChBtC,EAASS,OAAO6B,SAGhB,cAACmU,GAAD,CAAQ3E,GAAIyE,EAAOpH,QAAS,IAAKL,MAAO,GAAKC,IAAK,KAAlD,SACE,cAAC2H,GAAA,EAAD,CAAMC,MAAI,EAAClI,UAAW/B,EAAQ0D,KAA9B,SACE,eAACgC,GAAA,EAAD,CACE9E,QAAQ,WACRsJ,YAAa,kBAAMJ,GAAS,IAC5BK,aAAc,kBAAML,GAAS,IAH/B,UAKE,cAACnB,GAAA,EAAD,CACE/J,MAAOtL,EAASI,KAChBiX,UAAS,mBAAcL,KAEzB,eAACrE,GAAA,EAAD,WACE,cAACjF,GAAA,EAAD,CAAYI,QAAM,EAAC5O,MAAM,gBAAgBoO,QAAQ,YAAjD,SACGtN,EAASG,cAEZ,uBACA,cAACuN,GAAA,EAAD,CAAYJ,QAAQ,KAApB,mBACA,eAACkB,GAAA,EAAD,CAAS8I,gBAAc,EAAC7I,UAAW/B,EAAQmJ,QAA3C,UACE,eAACnI,GAAA,EAAD,CACEJ,QAAQ,QACRpO,MAAM,gBACNuP,UAAW/B,EAAQmJ,QAHrB,qBAKWqB,EAAW,GAAKA,EAAW,GACpC,uBANF,cAOcA,EAAW,MAEzB,cAAC3D,GAAA,EAAD,CACErU,MAAM,UACNqN,QAAS,kBAAM+J,EAAStW,EAASE,KAAK,IAFxC,SAIE,cAACqX,GAAA,EAAD,CAAWpB,SAAS,0BA+GrB7J,iBAXS,SAACjH,GAIvB,MAAO,CACLyD,SAAUgB,GAAYzE,GACtBrB,UAAW0F,GAAarE,GACxBG,WAAYuE,GAAe1E,MAIhBiH,EA/EkB,SAAC,GAAyC,IAAvCtI,EAAsC,EAAtCA,UAAW8E,EAA2B,EAA3BA,SAAUtD,EAAiB,EAAjBA,WACjDkH,EAAUa,KACVf,EAAUC,eAFwD,EAG5CE,oBAAS,GAHmC,oBAGjEmJ,EAHiE,KAGzD0B,EAHyD,OAIpC7K,oBAAS,GAJ2B,oBAIjE8K,EAJiE,KAIrDC,EAJqD,KA6BxExJ,qBAAU,WACHpF,IACgB,iBAAftD,EACFgH,EAAQpE,KAAK,SACW,WAAf5C,GACTgH,EAAQpE,KAAK,aAGhB,CAACoE,EAAShH,EAAYsD,IAEzB,IAAM6O,EA7DiB,SACvB3T,EACA0I,EACA4J,GAEA,IAAMsB,EAAc,IAAIlY,MAAmBsE,EAAU1B,QAC/CuV,EAAiB,aAAO7T,GAC9B6T,EAAkBC,MAAK,SAACC,EAAGC,GAAJ,OAAUA,EAAE1Y,UAAU2Y,UAAYF,EAAEzY,UAAU2Y,aAErE,IAAK,IAAI9V,EAAI,EAAGA,EAAIyV,EAAYtV,OAAQH,IACtCyV,EAAYzV,GACV,cAAC,GAAD,CAEEnC,SAAU6X,EAAkB1V,GAC5BuK,QAASA,EACT4J,SAAUA,GAHLuB,EAAkB1V,GAAGjC,KAOhC,OAAO0X,EA0CaM,CAAiBlU,EAAW0I,GA1B3B,SAAC/I,EAAYwU,GAChC3L,EAAQpE,KAAKzF,EAAgB,GAAGH,MAAO,CAAEmB,KAAIwU,YA0B/C,OACE,sBAAK1J,UAAW/B,EAAQkJ,MAAxB,UACE,cAAC,GAAD,CAAgB5F,MAAOlH,IACtBA,GACC,eAAC,IAAMuF,SAAP,WACE,cAACX,GAAA,EAAD,CAAYJ,QAAQ,KAApB,uBACA,uBACA,eAACoJ,GAAA,EAAD,CAAMjI,UAAW/B,EAAQhB,KAAM0M,WAAS,EAACC,QAAS,EAAlD,UACE,cAAC,GAAD,CACE3L,QAASA,EACT4J,SA7CW,WACrBkB,GAAU,IA6CAjD,OA1CU,WACpBmD,GAAc,IA0CJxH,KAAM4F,IAER,cAAC,GAAD,CACEzB,SAtCW,WACrBqD,GAAc,IAsCJnD,OAnCiB,WAC3BiD,GAAU,IAmCAlD,WAhCqB,WAC/BoD,GAAc,IAgCJxH,KAAMuH,IAEPE,cCwFPzG,GAAoB,CACxBoH,OhBvB2B,SAC3BlH,GAOA,OAAO,SAAU3M,GAEf,OADAA,EAAStB,GAASE,EAAe,KAjFf,SACpB+N,GAEA,OAAO1M,IACJC,KAAK7B,EAAsBsO,GAC3BvM,MAAK,SAACC,GAAD,OAAcb,GAAmBa,EAASC,KAAKjB,SACpDkB,OAAM,YAAkC,IAA/BF,EAA8B,EAA9BA,SACR,YAAiB7E,IAAb6E,GAGoB,MAApBA,EAAS6D,OAFJzE,QAAQC,OAAO/C,EAAa,IAKjC0D,EAASC,KAAKxF,SACZuF,EAASC,KAAK3F,MACT8E,QAAQC,OAAO/C,EAAa,IAE5B8C,QAAQC,OAAO/C,EAAa,IAE5B0D,EAASC,KAAK3F,MAChB8E,QAAQC,OAAO/C,EAAa,IAE9B8C,QAAQC,OAAO/C,EAAa,OA4D9BmX,CAAcnH,GAClBvM,MAAK,SAAChB,GAAD,OAA+BY,EAASb,GAAaC,OAC1DmB,OAAM,SAACvB,GAAD,OAA0BgB,EAASjB,GAAUC,UgBc3C6I,iBAfS,SAACjH,GAQvB,MAAO,CAAEyD,SAPQgB,GAAYzE,GAOVsD,OANJoB,GAAe1E,GAMHiM,WALRrH,GAAoB5E,MAYD6L,GAAzB5E,EA5SkB,SAAC,GAA8C,IAA5CxD,EAA2C,EAA3CA,SAAUH,EAAiC,EAAjCA,OAAQ2I,EAAyB,EAAzBA,WAAYgH,EAAa,EAAbA,OAAa,EAC7C3L,mBAAS,IADoC,oBACtEpN,EADsE,KAC5DoS,EAD4D,OAE7ChF,mBAAS,IAFoC,oBAEtEhL,EAFsE,KAE5DiQ,EAF4D,OAGrCjF,oBAAS,GAH4B,oBAGtE4E,EAHsE,KAGxDC,EAHwD,OAInB7E,oBAAS,GAJU,oBAItE6L,EAJsE,KAI/CC,EAJ+C,OAK3B9L,mBAAS,IALkB,oBAKtE+L,EALsE,KAKnDC,EALmD,OAQ/BhM,oBAAS,GARsB,oBAQtEiM,EARsE,KAQrDC,EARqD,OASrClM,oBAAS,GAT4B,oBAStEmM,EATsE,KASxDC,EATwD,OAUnDpM,mBAAS,IAV0C,oBAUtEvN,EAVsE,KAU/D4Z,EAV+D,OAW3CrM,oBAAS,GAXkC,oBAWtEsM,EAXsE,KAW3DC,EAX2D,OAYrCvM,oBAAS,GAZ4B,oBAYtEwM,EAZsE,KAYxDC,EAZwD,OAarCzM,mBAAS,IAb4B,oBAatE0M,EAbsE,KAaxDC,GAbwD,QAcvC3M,oBAAS,GAd8B,sBActE8E,GAdsE,MAczDC,GAdyD,MAevElF,GAAUC,eACVC,GAAUvB,KAYV6F,GARF,cAACa,GAAA,EAAD,CAAUC,GAAIL,GAAahD,UAAW/B,GAAQsE,MAA9C,SACE,cAACe,GAAA,EAAD,CAAOzE,QAAQ,SAAS0E,SAAS,QAAjC,SACGqH,MAQTnL,qBAAU,WACR,GAAIuD,GAAa,CACf,IAAIwD,EAASoE,EACTpH,EAAQC,YAAW,WACjB+C,IAAWoE,GAAc3H,IAAe,KAC3C,KACH,OAAO,kBAAMS,aAAaF,OAG3B,CAACR,GAAa4H,IAEjBnL,qBAAU,WACJpF,GACF0D,GAAQpE,KAAK,OAEd,CAACU,EAAU0D,GAAS7D,IAEvBuF,qBAAU,WACR,GAAe,iBAAXvF,EACJ,OAAQ2I,GACN,IAAK,2BAKH,OAJAgI,GAAgB,oCAChB3H,EAAY,IACZqH,EAAS,SACTtH,IAAe,GAEjB,IAAK,cAIH,OAHA4H,GAAgB,uBAChBN,EAAS,SACTtH,IAAe,GAEjB,IAAK,iBAIH,OAHA4H,GAAgB,0BAChB3H,EAAY,SACZD,IAAe,GAEjB,IAAK,SAGH,OAFA4H,GAAgB,wDAChB5H,IAAe,GAEjB,IAAK,UAGH,OAFA4H,GAAgB,uDAChB5H,IAAe,GAEjB,QACE,UAEH,CAACJ,EAAY3I,IAEhB,IAAM4Q,GAAe,SAACC,EAAWC,GAC/BZ,EAAmBW,IAAMC,IAgBrB7F,GAAiB,SAAC/T,GACtB+R,EAAY/R,GAdW,SAAC8B,EAAkB+X,GAC1CH,GAAa5X,EAAU+X,GACvBX,EACEpX,EAASW,QlB3FS,MkB4FfX,EAASW,QlB3FiB,IkB2FgBhB,EAAaqY,KAAKhY,KAWjEiY,CAAiB/Z,EAAG6Y,IA6CtB,OACE,sBAAKjK,UAAW/B,GAAQhB,KAAxB,UACGsF,GACD,cAACoB,GAAA,EAAD,CAAM3D,UAAW/B,GAAQ0D,KAAzB,SACE,uBACEiC,SApBS,SAACC,GAEhB,GADAA,EAAWE,iBACI,aAAX7J,GAAoC,aAAXA,EAC7B,GApBuB,WACvB,IAAIkR,GAAc,EAalB,OAZKZ,IACHK,GAAgB,qCAChBO,GAAc,GAEZlY,IAAa+W,IACfY,GAAgB,yBAChBO,GAAc,GAEXV,IACHG,GAAgB,kCAChBO,GAAc,GAETA,EAMHC,GACFpI,IAAe,OADjB,CAIA,IAAM5N,EAAsB,CAC1BvE,SAAUA,EACVH,MAAOA,EACPuC,SAAUD,EAAaC,IAEzB2W,EAAOxU,KASD4O,aAAa,KACbjE,UAAW/B,GAAQgE,YAHrB,UAKE,eAACiC,GAAA,EAAD,CAAalE,UAAW/B,GAAQgE,YAAhC,UACE,cAAChD,GAAA,EAAD,CAAYJ,QAAQ,KAAKmB,UAAW/B,GAAQmE,OAA5C,qBAGA,sBACA,cAAC+B,GAAA,EAAD,CACEnE,UAAW/B,GAAQmE,OACnBiC,WAAS,EACTD,UAAQ,EACR3H,OAAQiO,EACRY,WAAYZ,EAAe,GAAK,oBAChCxV,GAAG,WACHoP,MAAM,WACNzF,QAAQ,WACRoF,aAAa,WACbM,MAAOzT,EACP0T,SAAU,SAACpT,GAAD,OA9DC,SAACA,IACZ,KAANA,GAAY2B,EAAWmY,KAAK9Z,KAAI8R,EAAY9R,GAChDuZ,EAAgBvZ,EAAEyC,OAAS,GA4DA4Q,CAAerT,EAAEsT,OAAOH,UAE3C,sBACA,cAACJ,GAAA,EAAD,CACEnE,UAAW/B,GAAQmE,OACnBgC,UAAQ,EACR3H,OAAQ+N,EACRc,WAAYd,EAAY,GAAK,wBAC7BtV,GAAG,QACHoP,MAAM,QACNzF,QAAQ,WACRoF,aAAa,QACbM,MAAO5T,EACP6T,SAAU,SAACpT,GAAD,OAhFF,SAACA,GACnBmZ,EAASnZ,GACTqZ,EAAazX,EAAYkY,KAAK9Z,IA8EHma,CAAYna,EAAEsT,OAAOH,UAExC,sBACA,cAACJ,GAAA,EAAD,CACEnE,UAAW/B,GAAQmE,OACnBgC,UAAQ,EACR3H,OAAQ4N,EACRiB,WACGjB,EAAuD,GAAxC,sCAElBnV,GAAG,WACHP,KAAMmO,EAAe,OAAS,WAC9BwB,MAAM,WACNL,aAAa,mBACbpF,QAAQ,WACR0F,MAAOrR,EACPyR,WAAY,CACVC,aACE,cAACC,GAAA,EAAD,CAAgB3H,SAAS,MAAzB,SACE,cAAC4H,GAAA,EAAD,CACEC,aAAW,6BACXjH,QAAS,SAACkB,GAAD,OAAQ+D,GAAiBD,IAClCkC,YAAa,SAAC5T,GAAD,OACXA,EAAE2S,kBAJN,SAOGjB,EAAe,cAACmC,GAAA,EAAD,IAAiB,cAACC,GAAA,EAAD,SAKzCV,SAAU,SAACpT,GAAD,OAAO+T,GAAe/T,EAAEsT,OAAOH,UAE3C,sBACA,cAACJ,GAAA,EAAD,CACEnE,UAAW/B,GAAQmE,OACnBgC,UAAQ,EACR3H,OAAQ0N,GAAgC,KAAbjX,EAC3BoY,WACGnB,GAAgC,KAAbjX,EAEhB,GADA,uBAGNgC,GAAG,qBACHP,KAAMoV,EAAwB,OAAS,WACvCzF,MAAM,mBACNL,aAAa,mBACbpF,QAAQ,WACR0F,MAAO0F,EACPtF,WAAY,CACVC,aACE,cAACC,GAAA,EAAD,CAAgB3H,SAAS,MAAzB,SACE,cAAC4H,GAAA,EAAD,CACEC,aAAW,6BACXjH,QAAS,SAACkB,GAAD,OACPgL,GAA0BD,IAE5B/E,YAAa,SAAC5T,GAAD,OACXA,EAAE2S,kBANN,SASGgG,EACC,cAAC9E,GAAA,EAAD,IAEA,cAACC,GAAA,EAAD,SAMVV,SAAU,SAACpT,GAAD,OAhKU,SAACA,GAC/B8Y,EAAqB9Y,GACrB0Z,GAAa5X,EAAU9B,GA8JIoa,CAAwBpa,EAAEsT,OAAOH,UAEpD,uBACA,eAACtF,GAAA,EAAD,CAAYJ,QAAQ,YAApB,8EACoE,IlBnQ7C,GkBkQvB,oBAGE,uBAHF,yDAKE,0BAGF,eAACI,GAAA,EAAD,CAAYJ,QAAQ,YAApB,+BlB5QY,GkB4QZ,IlB3QY,IkB2QZ,mBAEE,6BAGJ,cAACqF,GAAA,EAAD,CAAalE,UAAW/B,GAAQoE,YAAhC,SACE,cAACzD,GAAA,EAAD,CACEnO,MAAM,UACNoO,QAAQ,WACR0F,MAAM,UACN5P,KAAK,SACLyQ,WAAS,EACTC,QAAS,cAACC,GAAA,EAAD,IANX,SAQE,cAACrG,GAAA,EAAD,CAAYJ,QAAQ,KAApB,oC,8BCvTRnC,GAASC,aAAW,CACxB8O,OAAQ,CACNvO,SAAU,WACVsF,IAAK,UA8DHC,GAAoB,CACxBiJ,UjBmQ2B,WAM3B,OAAO,SAAU1V,GAEf,OADAA,EAAStB,GAASE,EAAe,KAlG5BqB,IAAMC,KAAK9B,EAAoB,CAAE+B,iBAAiB,IAoGpDC,MAAK,kBAAMJ,EAjN8C,CAC9DrB,KAAMC,OAiND2B,OAAM,kBAAMP,EAASf,GAAWrC,EAAY,WiB1QpCiL,iBAXS,SAACjH,GAIvB,MAAO,CAAEyD,SAHQgB,GAAYzE,GAGVsD,OAFJoB,GAAe1E,GAEHiM,WVpBO,SAACjM,GACnC,OAAOA,EAAMc,YAAY0C,kBUkBNuR,CAAqB/U,MAQF6L,GAAzB5E,EA7DgB,SAAC,GAA6B,IAA3BxD,EAA0B,EAA1BA,SAAUqR,EAAgB,EAAhBA,UACpC3N,EAAUC,eACVC,EAAUvB,KAChB+C,qBAAU,YACc,SAACpF,GAChBA,GAEH0D,EAAQpE,KAAK,KAGjBiS,CAAcvR,KACb,CAACA,EAAU0D,IAEd,IAAM8N,EAAc,SAACC,GAEfA,EACFJ,KAEA3N,EAAQgO,SACRhO,EAAQpE,KAAK,OAIjB,OACE,eAACqS,GAAA,EAAD,CACE/N,QAAS,CACPd,MAAOc,EAAQwN,QAEjBhK,MAAI,EACJG,SAAS,KACTwD,WAAS,EACT6G,QAAS,kBAAMJ,GAAY,IAC3BK,kBAAgB,uBAChBC,mBAAiB,iBATnB,UAWE,cAACC,GAAA,EAAD,CAAalX,GAAG,uBAAhB,SACG,sCAEH,eAACmX,GAAA,EAAD,WACE,cAACzN,GAAA,EAAD,CAAQnO,MAAM,UAAUqN,QAAS,kBAAM+N,GAAY,IAAnD,gBAGA,cAACjN,GAAA,EAAD,CAAQnO,MAAM,UAAUqN,QAAS,kBAAM+N,GAAY,IAAOxH,WAAS,EAAnE,0B,2DC9BOiI,GA5BuB,SAAC,GAMhC,IALLC,EAKI,EALJA,OACA9K,EAII,EAJJA,KACA+K,EAGI,EAHJA,OACAP,EAEI,EAFJA,QACA7L,EACI,EADJA,SAEA,OACE,cAACqM,GAAA,EAAD,CACEvX,GAAIqX,EACJ9K,KAAMA,EACNiL,SAAUF,EACVG,aAAc,CACZC,SAAU,MACVC,WAAY,SAEdC,aAAW,EACXC,gBAAiB,CACfH,SAAU,MACVC,WAAY,SAEdZ,QAASA,EAbX,SAeG7L,KC0BQ4M,GA/CuC,SAAC,GAIhD,IAHL1a,EAGI,EAHJA,KACAuT,EAEI,EAFJA,WACG1K,EACC,sCACE4K,EAAUC,iBAAO,CAAEzB,MAAO,KAC1B8B,EAAiBL,iBAAO,CAAEzB,MAAO,KAUvC,OACE,cAACZ,GAAA,EAAD,CAAM3D,UAAW7E,EAAM6E,UAAvB,SACE,cAACkE,GAAA,EAAD,UACE,uBAAMN,SAXK,SAACC,GAChBA,EAAWE,iBACX,IAAMkJ,EAAO,gBAAQ3a,GACrB2a,EAAQtb,KAAOoU,EAAQc,QAAQtC,MAC/B0I,EAAQvb,YAAc2U,EAAeQ,QAAQtC,MAC7CsB,EAAWoH,IAMmBhJ,aAAa,MAAvC,UACE,cAACE,GAAA,EAAD,CACEC,UAAQ,EACRC,WAAS,EACTe,WAAS,EACTd,MAAM,OACNzF,QAAQ,WACRqO,aAAc5a,EAAKX,KACnBmV,SAAUf,IAEZ,sBACA,cAAC5B,GAAA,EAAD,CACEiB,WAAS,EACTd,MAAM,cACNzF,QAAQ,WACRqO,aAAc5a,EAAKZ,YACnBoV,SAAUT,IAEZ,sBACA,cAACzH,GAAA,EAAD,CAAQC,QAAQ,WAAWuG,WAAS,EAACzQ,KAAK,SAA1C,0BC7BJwY,GAAaxQ,cAAW,SAACC,GAAD,MAAY,CACxCwQ,KAAM,CACJ7P,MAAO,OACPH,gBAAiB,OACjBE,UAAW,MACX+P,aAAc,OAEhBC,SAAU,CACR/P,MAAO,OACPH,gBAAiBR,EAAM0K,QAAQiG,QAAQ/F,KACvClK,UAAW,MACX+P,aAAc,OAEhBG,YAAa,CACXjQ,MAAO,OACPkQ,WAAW,6BAAD,OAA+B7Q,EAAM0K,QAAQiG,QAAQ/F,KAArD,aAA8D5K,EAAM0K,QAAQC,QAAQC,KAApF,KACVlK,UAAW,MACX+P,aAAc,OAEhBK,aAAc,CACZnQ,MAAO,OACPH,gBAAiBR,EAAM0K,QAAQC,QAAQC,KACvClK,UAAW,MACX+P,aAAc,OAEhBM,cAAe,CACbpQ,MAAO,OACPH,gBAAiBR,EAAM0K,QAAQ7K,MAAM+K,KACrClK,UAAW,MACX+P,aAAc,OAEhBO,SAAU,CACRrQ,MAAO,OAGPuE,OAAQ,oBACR1E,gBAAiBR,EAAM0K,QAAQiG,QAAQM,KACvCC,OAAO,kBAETC,WAAY,CACVhR,QAAS,OACTmF,cAAe,MACflF,eAAgB,QAChBY,cAAe,QAEjBoQ,KAAM,CACJC,QAAS,OAEXC,SAAU,CACRpR,SAAU,EACViC,WAAY,YA0KDoP,GAhJa,SAAC,GAAmD,IAAjD7b,EAAgD,EAAhDA,KAAMgG,EAA0C,EAA1CA,MAAO8V,EAAmC,EAAnCA,SAAUC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SAAe,EAC7CpQ,mBAA6B,MADgB,oBACtEwO,EADsE,KAC5D6B,EAD4D,OAE3CrQ,mBAA6B,IAFc,oBAEtEsQ,EAFsE,KAE3DC,EAF2D,OAGrCvQ,oBAAS,GAH4B,oBAGtEwQ,EAHsE,KAGxDC,EAHwD,OAIzCzQ,oBAAS,GAJgC,oBAItE0Q,EAJsE,KAI1DC,EAJ0D,KAKvEC,EAAO9I,iBAA8B,MACrC+I,EAAWC,QAAQtC,GACnBzO,EAAUkP,KACV8B,EAvBS,SAACb,EAAkBnQ,GAClC,OAAQmQ,GACN,KAAK,EACH,OAAOnQ,EAAQqP,SACjB,KAAK,EACH,OAAOrP,EAAQuP,YACjB,KAAK,EACH,OAAOvP,EAAQyP,aACjB,KAAK,EACH,OAAOzP,EAAQ0P,cACjB,QACE,OAAO1P,EAAQmP,MAYC8B,CAASd,EAAUnQ,GACjCvM,EACiB,KAArBY,EAAKZ,YAAqBY,EAAKZ,YAAc,iBAEzCyd,EAAe,kBAAMZ,EAAY,OAEjCa,EAAkB,SAACC,GACvBd,EAAYc,EAAMC,eAClBD,EAAME,mBAGFC,EAAc,SAACH,GACF,OAAb3C,GAAmBiC,GAAiBD,IAQpCe,EAAc,SAACre,GAEA,OAAjB0d,EAAKjI,SACQ,OAAbzV,EAAEsT,QACFoK,EAAKjI,QAAQ6I,SAASte,EAAEsT,UAI1BiK,GAAgB,GAChBE,GAAc,KAmDhB,OA/CApP,qBAAU,WAIR,OAFAkQ,SAASjQ,iBAAiB,YAAa+P,GAEhC,WACLE,SAAShQ,oBAAoB,YAAa8P,MAE3C,IAGHhQ,qBAAU,WACR,IAAMmQ,EAAY,SAACP,GACjBA,EAAMtL,iBACNsL,EAAME,kBACNhB,EAAY,MACZF,EAAS/b,IAGLud,EAAY,SAACR,GACjBA,EAAMtL,iBACNsL,EAAME,kBACNhB,EAAY,MAEZM,GAAc,KAGQ,WAMtB,IALA,IAAMiB,EAAkC,CACtC,CAAC,SAAUD,EAAW,cAACE,GAAA,EAAD,KACtB,CAAC,SAAUH,EAAW,cAACI,GAAA,EAAD,MAElBvc,EAAM,IAAIxC,MAAmB6e,EAAcjc,QACxCH,EAAI,EAAGA,EAAID,EAAII,OAAQH,IAC9BD,EAAIC,GACF,eAACuc,GAAA,EAAD,CAAUxf,MAAM,UAAUqN,QAASgS,EAAcpc,GAAG,GAApD,UACGoc,EAAcpc,GAAG,GAClB,cAACuL,GAAA,EAAD,CAAYe,UAAW/B,EAAQiQ,SAA/B,SACG4B,EAAcpc,GAAG,OAHuCwL,gBAQjEuP,EAAahb,GAEfyc,KACC,CAAC7B,EAAUC,EAAUhc,EAAM2L,EAAQiQ,SAAUK,IAG9C,sBAAK4B,IAAKrB,EAAMhQ,MAAO,CAAEvB,MAAO,QAAhC,UACGqR,GACC,cAAC,GAAD,CACEtc,KAAMA,EACN0N,UAAWiP,EACXpJ,WAvEe,SAACvT,GACtBuc,GAAc,GACdP,EAAShc,OAwELsc,GACA,cAAC,KAAD,CAAWwB,YAAa9d,EAAKb,IAAK6G,MAAOA,EAAzC,SACG,SAAC+X,EAAUC,GAAX,OACC,eAAC3M,GAAA,EAAD,wCACE3D,UAAWsQ,EAASC,WAAatS,EAAQ2P,SAAWqB,GAChDoB,EAASG,gBACTH,EAASI,iBAHf,IAIEC,SAAUL,EAASK,SACnB5S,QAAS0R,EALX,UAOE,eAACvH,GAAA,EAAD,CAAMC,MAAI,EAAV,UACE,eAACD,GAAA,EAAD,CACE0B,WAAS,EACTgH,UAAU,MACVC,QAAQ,gBACRC,KAAK,SACLvO,WAAW,aALb,UAOE,cAACrD,GAAA,EAAD,CAAYe,UAAW/B,EAAQ+P,KAA/B,SAAsC1b,EAAKX,OAC3C,cAACmT,GAAA,EAAD,CAAYhH,QAASsR,EAArB,SACE,cAACW,GAAA,EAAD,SAGHrB,GACC,cAACzG,GAAA,EAAD,CAAMC,MAAI,EAAV,SACE,cAACjJ,GAAA,EAAD,CAAYe,UAAW/B,EAAQ+P,KAA/B,SACE,4BAAItc,WAMZ,cAAC,GAAD,CACE6a,OAAQ,aAAeja,EAAKb,IAC5B2O,SAAUoO,EACV/M,KAAMsN,EACNvC,OAAQE,EACRT,QAASkD,e,UC1NnB2B,GAAuBnU,cAAW,SAACC,GAAD,MAAY,CAClD+E,KAAM,CACJpE,MAAO,OACPkQ,WAAY7Q,EAAM0K,QAAQiG,QAAQ/F,MAEpCnF,YAAa,CACXtF,QAAS,OACTmF,cAAe,MACflF,eAAgB,YAElBwI,WAAY,CACVD,YAAa,YAqGX9C,GAAoB,CACxBsO,SrBjGqB,SACrBlX,EACAvH,GAFqB,MAGC,CACtBqC,KAAMC,EACNC,QAAS,CACPgF,WAAYA,EACZvH,KAAMA,MqB6FKuL,gBAAQ,KAAM4E,GAAd5E,EA1FyB,SAAC,GAMlC,IALLkT,EAKI,EALJA,SACAlX,EAII,EAJJA,WACAgM,EAGI,EAHJA,WACAoG,EAEI,EAFJA,QACAxK,EACI,EADJA,KAEMxD,EAAUvB,KACVsU,EAAiBF,KAEjB/K,EAAUC,iBAAO,CAAEzB,MAAO,KAC1B8B,EAAiBL,iBAAO,CAAEzB,MAAO,KAmBvC,OACE,cAACkC,GAAA,EAAD,CAAMpD,GAAI5B,EAAMiF,eAAe,EAA/B,SACE,cAAC/C,GAAA,EAAD,CAAM3D,UAAWgR,EAAerP,KAAM7B,UAAW,EAAjD,SACE,uBACE8D,SArBS,SAACC,GAChBA,EAAWE,iBACX,IAAMzR,EAAc,CAClBX,KAAMoU,EAAQc,QAAQtC,MACtB7S,YAAa2U,EAAeQ,QAAQtC,MACpChS,iBAAkB,GAClBC,iBAAkB,GAClBf,IAAKyN,gBAEP6R,EAASlX,EAAYvH,GACrBuT,KAYM5B,aAAa,MACbjE,UAAW/B,EAAQgE,YAHrB,UAKE,eAACiC,GAAA,EAAD,CAAalE,UAAW/B,EAAQgE,YAAhC,UACE,cAACkC,GAAA,EAAD,CACEnE,UAAW/B,EAAQmE,OACnBgC,UAAQ,EACRC,WAAS,EACTnP,GAAG,OACHoP,MAAM,YACNzF,QAAQ,WACRiI,SAAUf,IAEZ,sBACA,cAAC5B,GAAA,EAAD,CACEnE,UAAW/B,EAAQmE,OACnBlN,GAAG,cACHP,KAAK,OACL2P,MAAM,cACNzF,QAAQ,WACRiI,SAAUT,IAEZ,yBAEF,eAACnC,GAAA,EAAD,CAAalE,UAAWgR,EAAe3O,YAAvC,UACE,cAACzD,GAAA,EAAD,CACEoB,UAAWgR,EAAexL,WAC1B3G,QAAQ,WACRpO,MAAM,YACN8T,MAAM,SACNc,QAAS,cAAC0B,GAAA,EAAD,IACTjJ,QAxCG,gBACGtM,IAAZya,GAAuBA,KAiCnB,oBAUA,cAACrN,GAAA,EAAD,CACEC,QAAQ,WACRpO,MAAM,UACN8T,MAAM,cACN5P,KAAK,SACL0Q,QAAS,cAAC2B,GAAA,EAAD,IALX,mCC/FNtK,GAASC,cAAW,SAACC,GACzB,MAAO,CACLqU,OAAQ,CACN7T,gBAAiB,QAEnB8T,eAAgB,CACd9T,gBAAiBR,EAAM0K,QAAQC,QAAQC,MAEzC2J,gBAAiB,CACf/T,gBAAiBR,EAAM0K,QAAQ7K,MAAM+K,MAEvC4J,WAAY,CACVrU,QAAS,OACTmF,cAAe,MACfmP,aAAc,UACdjU,gBAAiBR,EAAM0K,QAAQiG,QAAQ/F,MAEzC8J,cAAe,CACb7D,WAAW,8BAAD,OAAgC7Q,EAAM0K,QAAQiG,QAAQ/F,KAAtD,aAA+D5K,EAAM0K,QAAQC,QAAQC,KAArF,MAEZ+J,uBAAwB,CACtBtK,YAAa,MACbC,aAAc,MACduG,WAAW,8BAAD,OAAgC7Q,EAAM0K,QAAQiG,QAAQiE,MAAtD,aAAgE5U,EAAM0K,QAAQC,QAAQiK,MAAtF,MAEZC,oBAAqB,CACnBxK,YAAa,MACbC,aAAc,MACd9J,gBAAiBR,EAAM0K,QAAQiG,QAAQiE,OAEzCE,wBAAyB,CACvBzK,YAAa,MACbC,aAAc,MACd9J,gBAAiBR,EAAM0K,QAAQC,QAAQiK,OAEzCG,yBAA0B,CACxB1K,YAAa,MACbC,aAAc,MACd9J,gBAAiBR,EAAM0K,QAAQ7K,MAAM+U,OAEvCI,gBAAiB,CACf3K,YAAa,MACbC,aAAc,OAEhB2K,MAAO,CACLtU,MAAO,QAETuU,WAAY,CACV5P,cAAe,SACf+E,YAAa,MACbC,aAAc,OAEhBO,UAAW,CACThX,MAAO,QACPgd,WAAY7Q,EAAM0K,QAAQiG,QAAQM,KAClCnG,SAAU,OACV2F,aAAc,QACd9H,YAAa,MACb0I,QAAS,kBACT,UAAW,CACTR,WAAY7Q,EAAM0K,QAAQiG,QAAQiE,MAClC/gB,MAAO,cA6ITgS,GAAoB,CACxBsP,YtBtKwB,SACxBlY,EACAvH,GAFwB,MAGF,CACtBqC,KAAMC,EACNC,QAAS,CACPgF,WAAYA,EACZvH,KAAMA,KsBgKR0f,YtBlLwB,SACxBnY,EACAvH,GAFwB,MAGF,CACtBqC,KAAMC,EACNC,QAAS,CACPgF,WAAYA,EACZvH,KAAMA,MsB8KKuL,gBAAQ,KAAM4E,GAAd5E,EAnGyB,SAAC,GAOlC,IANLhE,EAMI,EANJA,WACAgD,EAKI,EALJA,MACA3H,EAII,EAJJA,GACAhD,EAGI,EAHJA,MACA6f,EAEI,EAFJA,YACAC,EACI,EADJA,YACI,EAC0B9T,oBAAS,GADnC,oBACG+T,EADH,KACYC,EADZ,KAEEjU,EAAUvB,KACV0R,EAAW1U,SAASxE,GACpBid,EAzCe,SAAC/D,EAAkBnQ,GACxC,OAAQmQ,GACN,KAAK,EACH,OAAOnQ,EAAQmT,WACjB,KAAK,EACH,OAAOnT,EAAQqT,cACjB,KAAK,EACH,OAAOrT,EAAQiT,eACjB,KAAK,EACH,OAAOjT,EAAQkT,gBACjB,QACE,OAAOlT,EAAQgT,QA8BCmB,CAAehE,EAAUnQ,GACvCoU,EA3BgB,SAACjE,EAAkBnQ,GACzC,OAAQmQ,GACN,KAAK,EACH,OAAOnQ,EAAQwT,oBACjB,KAAK,EACH,OAAOxT,EAAQsT,uBACjB,KAAK,EACH,OAAOtT,EAAQyT,wBACjB,KAAK,EACH,OAAOzT,EAAQ0T,yBACjB,QACE,OAAO1T,EAAQ2T,iBAgBEU,CAAgBlE,EAAUnQ,GAOzCsU,EAAc,SAACjgB,GACnByf,EAAYlY,EAAYvH,IAGpBkgB,EAAe,SAAClgB,GAMpB0f,EAAYnY,EAAYvH,IAGpBmgB,EAAc,WAClBP,GAAW,IAGb,OACE,cAACjK,GAAA,EAAD,CAAMC,MAAI,EAAsBlI,UAAW/B,EAAQ4T,MAAnD,SACE,eAAClO,GAAA,EAAD,CAAM7D,UAAW,EAAjB,UACE,cAAC8G,GAAA,EAAD,CACE5G,UAAWmS,EACXtV,MAAOA,EACP9E,OACe,IAAbqW,GACE,cAACtJ,GAAA,EAAD,CACE4N,KAAK,MACLC,KAAK,QACL3S,UAAW/B,EAAQwJ,UACnB3J,QAnCI,WAGhBoU,GAAW,IA4BD,SAME,cAACU,GAAA,EAAD,CAAKlL,SAAS,gBAKtB,cAAC,KAAD,CAAWmL,YAAa3d,EAAxB,SACG,SAACmb,EAA6ByC,GAA9B,OACC,cAAC5O,GAAA,EAAD,CAAalE,UAAWqS,EAAxB,SACE,eAACpK,GAAA,EAAD,2BACE0B,WAAS,EACTiH,QAAQ,aACRtO,WAAW,aACX+O,aAAa,aACbrR,UAAW/B,EAAQ6T,WACnBpB,SAAUL,EAASK,UACfL,EAAS0C,gBAPf,cASE,cAAC,GAAD,CACEtR,KAAMwQ,EACNhG,QAASwG,EACT5M,WAAY4M,EACZ5Y,WAAYA,IAGb3H,EAAM+G,KAAI,SAAC3G,EAAagG,GAAd,OACT,cAAC,GAAD,CAEEhG,KAAMA,EACNgG,MAAOA,EACP8V,SAAUA,EACVC,SAAUkE,EACVjE,SAAUkE,GALLlgB,EAAKb,QAQb4e,EAAS2C,yBA/CN,UAAY9d,MCxFjB+d,GA7DiC,SAAC,GAU1C,IATL7S,EASI,EATJA,SAGA8S,GAMI,EARJhL,KAQI,EAPJyB,UAOI,EANJuJ,WACAC,EAKI,EALJA,QACAC,EAII,EAJJA,UACAC,EAGI,EAHJA,eACAC,EAEI,EAFJA,WACGnY,EACC,gHA0CEoY,EAzCqB,WAEzB,IADA,IAAMC,EAAQ,IAAIviB,MAA0BmiB,GACnC1f,EAAI,EAAGA,EAAI8f,EAAM3f,OAAQH,IAAK8f,EAAM9f,GAAK,GAClD,IAAM+f,EAAcC,IAAMC,SAAS1a,IAAImH,GAAU,SAACwT,GAChD,OAAKF,IAAMG,eAAeD,GAGnBA,EAFE,QAIX,QAAoBpiB,IAAhBiiB,GAA6C,OAAhBA,EAAsB,OAAO,KAE9D,IAAMK,EAAmBL,EAAY5a,QAAO,SAAC+a,GAAD,OAAqB,OAAVA,KACvD,GAAIV,EAEF,IADA,IAAIa,EAAW,EAETrgB,EAAI,EACRA,EAAIogB,EAAiBjgB,OACrBH,IAAKqgB,GAAYA,EAAW,GAAKX,EAEjCI,EAAMO,GAAUpa,KAAKma,EAAiBpgB,SAGxC,IAAK,IAAIA,EAAI,EAAGA,EAAIogB,EAAiBjgB,OAAQH,IAAK,CAEhD8f,EADQQ,KAAKC,MAAMvgB,EAAI0f,IACdzZ,KAAKma,EAAiBpgB,IAKnC,IADA,IAAMD,EAAM,IAAIxC,MAAmBmiB,GAC1B1f,EAAI,EAAGA,EAAID,EAAII,OAAQH,IAC9BD,EAAIC,GACF,cAACuU,GAAA,EAAD,CAAcC,MAAI,EAAClI,UAAWqT,EAA9B,SACE,cAACpL,GAAA,EAAD,6BAAUqL,GAAV,IAAsB3J,WAAS,EAACgH,UAAWwC,EAA3C,SACGK,EAAM9f,OAFAA,GAOf,OAAOD,EAGYygB,GAErB,OACE,cAACjM,GAAA,EAAD,6BAAU9M,GAAV,IAAiBwO,WAAS,EAA1B,SACG4J,M,UCXD7W,GAASC,cAAW,SAACC,GAAD,MAAY,CACpC+E,KAAM,CACJpE,MAAO,MACPwB,WAAY,KACZwG,YAAa,MAEf4O,UAAW,CACT5W,MAAO,OAET6W,gBAAiB,CACf7W,MAAO,OAET8W,eAAgB,CACd9W,MAAO,OACPsE,SAAU,SAEZyS,WAAY,CACV/W,MAAO,QAETgX,aAAc,CACZhP,YAAa,QAEfiP,aAAc,CACZ3S,SAAU,aAyMRY,GAAoB,CACxBgS,axB1NyB,SACzB5a,EACAnB,EACAvG,EACAyG,EACAG,EACA2b,GANyB,MAOE,CAC3B/f,KAAMC,EACNC,QAAS,CACPgF,aACAnB,SACAvG,QACA4G,WACAH,WACA8b,iBwB4MFjgB,exBkHmC,SACnCS,GAOA,OAAO,SAAUc,GAEf,OADAA,EAASlB,GAASI,IA5KQ,SAACA,GAC7B,OACEe,IACG0e,OAAOlgB,GAAuBS,EAAI,CAAEiB,iBAAiB,IACrDC,MAAK,eAELG,OAAM,qBAAGF,SAA8BZ,QAAQC,OAAO9C,EAAY,OAuK9DgiB,CAAsB1f,GAC1BkB,MAAK,kBAAMJ,EArPmB,SACnCd,GAEA,MAAO,CACLP,KAAMC,EACNC,QAAS,CACPgF,WAAY3E,IA+OS2f,CAAsB3f,OAC1CqB,OAAM,SAACvB,GAAD,OAAyBgB,EAASf,GAAWD,EAAQE,UwB3HnD2I,iBAdS,SAACjH,EAAkBke,GAAqB,IAAD,IAC7D,iBAAIA,EAAWC,gBAAf,iBAAI,EAAqBne,aAAzB,aAAI,EAA4B1B,IACvB,CACL3D,SAAU2J,GAAgBtE,EAAO,CAAE1B,GAAI4f,EAAWC,SAASne,MAAM1B,KACjE6B,WAAYuE,GAAe1E,IAExB,CAAErF,SAAU,QAQmBkR,GAAzB5E,EAvLqD,SAAC,GAI9D,IAHLtM,EAGI,EAHJA,SACAkjB,EAEI,EAFJA,aACAhgB,EACI,EADJA,eACI,EAC4CyJ,oBAAS,GADrD,oBACG8W,EADH,KACqBC,EADrB,OAEsC/W,oBAAS,GAF/C,oBAEGgX,EAFH,KAEkBC,EAFlB,OAG8CjX,mBAAS,IAHvD,oBAGGkX,EAHH,KAGsBC,EAHtB,KAIEpX,EAAUvB,KACV4Y,EAAYC,yBAAc,CAAE1T,SAAU,MACtC2T,EAAWD,yBAAc,CAAE1T,SAAU,MACrC9D,EAAUC,eAsBhB,GApBAyB,qBAAU,WACgC,OAAblO,GAAmBwM,EAAQpE,KAAK,OAC1D,CAAsBpI,EAAUwM,IAEnC0B,qBAAU,WACS,OAAblO,IACEA,EAASW,MAAM2B,OAAS,EAC1BwhB,EAAqB,IAErBA,IAEM9jB,EAASQ,OAAO8B,OAAStC,EAASS,OAAO6B,QACzCtC,EAASW,MAAM2B,OACjB,KACA4hB,QAAQ,GAAK,iBAIpB,CAAClkB,IAEa,OAAbA,EACF,OACE,gCACE,sBADF,yBAMJ,IAAMmkB,EAAiBja,GAAoBlK,GACrCokB,EA7DU,SAAC9b,EAAoB6b,GAIrC,IAHA,IAAME,EAAQ,IAAI3kB,MAAmBykB,EAAe7hB,QAG3CH,EAAI,EAAGA,EAAIgiB,EAAe7hB,OAAS,EAAGH,IAAK,CAClD,IAAMxB,EAAQwjB,EAAehiB,GAC7BkiB,EAAMliB,GACJ,cAAC,GAAD,CAEEmG,WAAYA,EACZ3E,GAAIxB,EAAEE,WACNiJ,MAAOpK,EAAUiB,GACjBxB,MAAOA,GAJFwB,GAQX,OAAOkiB,EA6CWC,CAAUtkB,EAASE,IAAKikB,GAYpCI,EAAoB,WACxBb,GAAoB,IAkCtB,OACE,gCACE,cAAC,GAAD,CAAgB1T,KAAM2T,IACtB,eAACvR,GAAA,EAAD,CAAM3D,UAAW/B,EAAQ0D,KAAzB,UACE,cAACiF,GAAA,EAAD,CACE/J,MAAOtL,EAASI,KAChBokB,qBAAsB,CAAElX,QAAS,MACjC+J,UACE,gDACgBrX,EAASW,MAAM2B,OAD/B,IACuC,uBACpCuhB,OAIP,eAAClR,GAAA,EAAD,WACE,cAACjF,GAAA,EAAD,UAAa1N,EAASG,cACtB,sBACA,cAAC,KAAD,CAAiBskB,UAhDP,SAACC,GAAwB,IACjC7F,EAAqC6F,EAArC7F,YAAa8F,EAAwBD,EAAxBC,OAAQC,EAAgBF,EAAhBE,YACxBA,IAEHA,EAAYtD,cAAgBqD,EAAOrD,aACnCsD,EAAY7d,QAAU4d,EAAO5d,OAG/Bmc,EACEljB,EAASE,IACT2e,EACA3d,EAAUiH,SAASyc,EAAYtD,cAC/BpgB,EAAUiH,SAASwc,EAAOrD,cAC1BsD,EAAY7d,MACZ4d,EAAO5d,SAkCH,SACE,cAAC,GAAD,CACEqR,WAAS,EACTgH,UAAU,MACVuC,WAAS,EACTC,QAAQ,SACRC,UAAWkC,EAAY,EAAIE,EAAW,EAAI,EAC1CxV,UAAW/B,EAAQqW,WACnB1D,QAAQ,aACRtO,WAAW,aACXsH,QAAS,EACTyJ,eACEiC,EACIrX,EAAQkW,UACRqB,EACAvX,EAAQmW,gBACRnW,EAAQoW,eAEdf,WAAY,CAAE1J,QAAS,GAjBzB,SAmBG+L,MAGL,sBACA,cAAC/W,GAAA,EAAD,CACEwX,UAAW,cAACC,GAAA,EAAD,IACX5lB,MAAM,YACNoO,QAAQ,WACRf,QA1Fe,WACvBmX,GAAoB,IAqFd,mCAUJ,eAACjJ,GAAA,EAAD,CAAQvK,KAAMuT,EAAkB/I,QAAS6J,EAAzC,UACE,cAAC1J,GAAA,EAAD,CAAapM,UAAW/B,EAAQuW,aAAhC,wCAGA,eAACnI,GAAA,EAAD,WACE,cAACzN,GAAA,EAAD,CACEd,QAASgY,EACTrlB,MAAM,UACNoO,QAAQ,WACRmB,UAAW/B,EAAQsW,aACnBlQ,WAAS,EALX,oBASA,cAACzF,GAAA,EAAD,CACEd,QA3GoB,WAC5BqX,GAAiB,GACjBF,GAAoB,GACpBxgB,EAAelD,EAASE,MAyGhBhB,MAAM,YACNoO,QAAQ,WAHV,gCC7MJ4D,GAAoB,CAExB6T,YzBqQoC,WAMpC,OAAO,SAAUtgB,GAEf,OADAA,EAAStB,GAASE,EAAe,KAvCjB,WAAuD,IAAtD0hB,EAAqD,wDACxE,OAAOrgB,IACJsgB,IAAIjiB,GAAwB,CAC3B6B,iBAAiB,IAElBC,MAAK,SAACC,GAAD,OAAcb,GAAmBa,EAASC,SAC/CC,OAAM,YACL,OADsC,EAA9BF,SACJigB,EAAoB7gB,QAAQC,OAAO/C,EAAa,IACxC8C,QAAQC,OAAO/C,EAAa,OAgCnC6jB,EAAY,GAChBpgB,MAAK,SAAChB,GAAD,OAA+BY,EAASb,GAAaC,OAC1DmB,OAAM,SAACvB,GAAD,OAA0BgB,EAASjB,GAAUC,UyB5Q3C6I,gBAAQ,KAAM4E,GAAd5E,EAnCQ,SAAC,GAAyC,IAAvCyY,EAAsC,EAAtCA,YAIxB,OAHA7W,qBAAU,WACR6W,MACC,CAACA,IAEF,eAAC,KAAD,WACE,cAAC,GAAD,CACE9iB,UAAWA,EACXS,eAAgBA,EAChBD,gBAAiBA,IAEnB,uBACA,qBAAKgM,UAAU,YAAf,SACE,eAAC,KAAD,WACE,cAAC,KAAD,CAAOyW,OAAK,EAACC,KAAMljB,EAAUO,MAAO4iB,UAAWC,KAC/C,cAAC,KAAD,CAAOF,KAAM1iB,EAAgB,GAAGD,MAAO4iB,UAAWE,KAClD,cAAC,KAAD,CAAOH,KAAM1iB,EAAgB,GAAGD,MAAO4iB,UAAWG,KAClD,cAAC,KAAD,CAAOJ,KAAMziB,EAAe,GAAGF,MAAO4iB,UAAWI,KACjD,cAAC,KAAD,CAAOL,KAAMxiB,EAAgB,GAAGH,MAAO4iB,UAAWK,KAClD,cAAC,KAAD,CAAON,KAAMxiB,EAAgB,GAAGH,MAAO4iB,UAAWM,KAClD,cAAC,KAAD,CAAOP,KAAM,KAAMC,UAAWC,gB,oBC3BlCM,GAAsC,CAC1C5P,QAAS,CACP3S,KAAM,OACN4Y,QAAS,CACPM,KAAM,WAERsJ,UAAW,CACTtJ,KAAM,WAERuJ,QAAS,CACPvJ,KAAM,aAKNwJ,GAAcC,aAClBC,aAAe,6BACVL,IADS,IAEZM,WAAY,CACVC,WAAY,SACZ/P,SAAU,SAKVgQ,GAAeJ,aACnBC,aAAe,6BACVL,IADS,IAEZM,WAAY,CACVC,WAAY,SACZ/P,SAAU,QAkBDiQ,GAbS,SAAC,GAAmC,IAAjC5hB,EAAgC,EAAhCA,MACnB6hB,EAAYrC,aAAc,qBAChC,OACE,cAAC,KAAD,CAAUxf,MAAOA,EAAjB,SACE,cAAC8hB,GAAA,EAAD,CAAejb,MAAOgb,EAAYF,GAAeL,GAAjD,SACE,cAACS,GAAA,EAAD,UACE,cAAC,GAAD,WCpDJ/hB,GAAmB4F,KAEzBoc,IAASC,OAAO,cAAC,GAAD,CAAMjiB,MAAOA,KAAW4Z,SAASsI,eAAe,W","file":"static/js/main.cf641c69.chunk.js","sourcesContent":["import { Stage, TRequestFail, TStatus, TUpdateFail } from \"./Constants\";\r\n\r\nexport const ADD_TASK = \"ADD_TASK\" as const;\r\ntype add_task = typeof ADD_TASK;\r\nexport const REMOVE_TASK = \"REMOVE_TASK\" as const;\r\ntype remove_task = typeof REMOVE_TASK;\r\nexport const MODIFY_TASK = \"MODIFY_TASK\" as const;\r\ntype modify_task = typeof MODIFY_TASK;\r\nexport const REMOVE_TASKLIST = \"REMOVE_TASKLIST\" as const;\r\ntype remove_tasklist = typeof REMOVE_TASKLIST;\r\nexport const MODIFY_TASKLIST = \"MODIFY_TASKLIST\" as const;\r\ntype modify_tasklist = typeof MODIFY_TASKLIST;\r\nexport const UPDATE_USER = \"UPDATE_USER\" as const;\r\ntype update_user = typeof UPDATE_USER;\r\nexport const RESTAGE_TASK = \"RESTAGE_TASK\" as const;\r\ntype restage_task = typeof RESTAGE_TASK;\r\nexport const REORDER_TASK = \"REORDER_TASK\" as const;\r\ntype reorder_task = typeof REORDER_TASK;\r\nexport const LOGIN_COMPLETE = \"LOGIN_COMPLETE\" as const;\r\ntype login_complete = typeof LOGIN_COMPLETE;\r\nexport const LOGOUT_COMPLETE = \"LOGOUT_COMPLETE\" as const;\r\ntype logout_complete = typeof LOGOUT_COMPLETE;\r\nexport const FETCH_FAILURE = \"FETCH_FAILURE\" as const;\r\ntype fetch_failure = typeof FETCH_FAILURE;\r\nexport const FETCHING_DATA = \"FETCHING_DATA\" as const;\r\ntype fetching = typeof FETCHING_DATA;\r\nexport const UPDATE_FAILURE = \"UPDATE_FAILURE\" as const;\r\ntype update_failure = typeof UPDATE_FAILURE;\r\nexport const UPDATING_SERVER = \"UPDATING_SERVER\" as const;\r\ntype updating = typeof UPDATING_SERVER;\r\nexport const TASKLIST_UPDATED = \"TASKLIST_UPDATED\" as const;\r\ntype tasklist_updated = typeof TASKLIST_UPDATED;\r\nexport const TASKLIST_CREATED = \"TASKLIST_CREATED\" as const;\r\ntype tasklist_created = typeof TASKLIST_CREATED;\r\n\r\n// these ids are used when the actual id isn't known\r\n// tells the store state reducer to ignore these\r\n\r\nexport const FAKE_IDS = [\"user\", \"tasklist\"];\r\n\r\nexport const isFakeID = (str: string): boolean => {\r\n  return FAKE_IDS.indexOf(str) > -1;\r\n};\r\n\r\nexport interface ITimestamp {\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\nexport interface IObjectID {\r\n  _id: string;\r\n}\r\n\r\nexport interface IVersion {\r\n  __v: number;\r\n}\r\n\r\n// btw, icon should be a number which is used to select an icon, in range of my icon set's size\r\nexport interface IUserModdableInfo {\r\n  icon: string;\r\n  color: string;\r\n  username: string;\r\n  email: string;\r\n}\r\n\r\nexport interface IUserInfo extends IUserModdableInfo, ITimestamp, IVersion {}\r\n\r\nexport interface ServerStatus {\r\n  status: TStatus;\r\n  lastFetchFailure: TRequestFail;\r\n  lastUpdateFailure: TUpdateFail;\r\n  loggedIn: boolean;\r\n}\r\n\r\nexport enum UpdateType {\r\n  // if removing a task, will want to set\r\n  // TASKS and STAGES, and pass correct information\r\n  // other removes are just passing the ids associated\r\n  REMOVE_TASKLIST,\r\n  REMOVE_USER,\r\n  TASKLIST_INFO,\r\n  ADD_TASK,\r\n  SET_TASKS,\r\n  SET_STAGES,\r\n  USER_INFO,\r\n}\r\n\r\nexport type TUpdateTypes = {\r\n  [key in UpdateType]?: number;\r\n};\r\n// for tasklist, it says what parts need to be updated basically\r\n// each entry will add another thing, if user_info is also stated\r\n// means nothing\r\n// user_info is only for user profile updates (color / icon / whatever's changeable on userinfo)\r\nexport interface IIDChain {\r\n  types: { [key in UpdateType]?: number };\r\n  // if parent is needed? i dont see this getting used amytime soon\r\n  parentIDs?: Array<string>;\r\n  // set this when the request starts getting pushed\r\n  // create and add idchain when request becomes needed\r\n  updating: boolean;\r\n}\r\n\r\n// key is the url extension required to reach this update\r\n// aka will be one objectid for everything currently (the tasklist)\r\n// or the userid (user based updates will ignore this url ofc)\r\n\r\n// adds are done immediately, as compared to updates which run on a subscribed\r\n// function\r\nexport interface IUpdateStates {\r\n  [key: string]: IIDChain;\r\n}\r\n\r\nexport type TUserCredentials = {\r\n  password: string;\r\n} & ({ username: string } | { email: string });\r\n\r\nexport interface IUserRegister {\r\n  username: string;\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\nexport interface ITasklistsHolder {\r\n  tasklists: TTasklists;\r\n  ids: IIDs;\r\n}\r\n\r\n// this has dynamically generated ids\r\n// based on the tasklist ids and therefore\r\n// can only be considered an object who's keys are\r\n// numbers\r\nexport interface IIDs {\r\n  [key: string]: number;\r\n}\r\n\r\nexport type TTasklists = Array<ITasklist>;\r\n\r\nexport interface ITasklistStages {\r\n  stage1: Array<number>;\r\n  stage2: Array<number>;\r\n  stage3: Array<number>;\r\n  stage4: Array<number>;\r\n}\r\n\r\nexport interface ITasklist extends ITasklistStages, ITimestamp, IObjectID {\r\n  description: string;\r\n  name: string;\r\n  tasks: TTasks;\r\n}\r\n\r\nexport interface ITasklistPartialStages {\r\n  stage1?: Array<number>;\r\n  stage2?: Array<number>;\r\n  stage3?: Array<number>;\r\n  stage4?: Array<number>;\r\n}\r\n\r\nexport interface IParsedUpdate extends IObjectID {\r\n  remove?: boolean;\r\n  removeUser?: boolean;\r\n  description?: string;\r\n  name?: string;\r\n  tasks?: TTasks;\r\n  stages?: ITasklistStages;\r\n  // for when the stages changed but the tasks didnt\r\n  taskslength?: number;\r\n  // for when the tasks changed and the count is empty\r\n  empty?: boolean;\r\n}\r\n\r\n// looks similar to ITasklistUpdate, but they are very definitely not\r\n// interchangeable\r\nexport interface ITasklistCreate {\r\n  description: string;\r\n  name: string;\r\n  // tasks, stages and description can be empty, name cannot\r\n  tasks: TTasks;\r\n  stages: ITasklistStages;\r\n}\r\n\r\nexport interface IAddTasks extends IObjectID {\r\n  tasks: TTasks;\r\n}\r\n\r\nexport type TTasks = Array<ITask>;\r\n\r\nexport interface ITask extends IObjectID {\r\n  assignedUsername: string;\r\n  assignedUserIcon: string;\r\n  description: string;\r\n  name: string;\r\n  due?: Date | string;\r\n}\r\n\r\nexport const extractUserInfo = (info: any): IUserInfo | null => {\r\n  if (!isUserInfo(info)) {\r\n    return null;\r\n  }\r\n  return {\r\n    __v: info.__v,\r\n    icon: info.icon,\r\n    color: info.color,\r\n    email: info.email,\r\n    username: info.username,\r\n    createdAt: info.createdAt,\r\n    updatedAt: info.updatedAt,\r\n  };\r\n};\r\n\r\nexport const extractTasklists = (info: any): TTasklists | null => {\r\n  if (!isTasklists(info?.tasklists)) {\r\n    return null;\r\n  }\r\n  for (let i = 0; i < info.tasklists.length; i++) {\r\n    let tasklist = info.tasklists[i];\r\n    tasklist.updatedAt = new Date(tasklist.updatedAt);\r\n    tasklist.createdAt = new Date(tasklist.createdAt);\r\n  }\r\n  return info.tasklists;\r\n};\r\n\r\nexport const extractTasklist = (info: any): ITasklist | null => {\r\n  if (!isTasklist(info.tasklist)) {\r\n    return null;\r\n  }\r\n  info.tasklist.updatedAt = new Date(info.tasklist.updatedAt);\r\n  info.tasklist.createdAt = new Date(info.tasklist.createdAt);\r\n  return info.tasklist;\r\n};\r\n\r\nexport const isUserInfo = (info: any): info is IUserInfo => {\r\n  if (info === null || typeof info !== \"object\") return false;\r\n  const infoParsed = info as IUserInfo;\r\n  return (\r\n    typeof infoParsed.__v === \"number\" &&\r\n    typeof infoParsed.color === \"string\" &&\r\n    typeof infoParsed.createdAt === \"string\" &&\r\n    typeof infoParsed.email === \"string\" &&\r\n    typeof infoParsed.icon === \"string\" &&\r\n    typeof infoParsed.updatedAt === \"string\" &&\r\n    typeof infoParsed.username === \"string\"\r\n  );\r\n};\r\n\r\n// these typeguards should only be necessary for server updates\r\nexport const isTasklists = (lists: any): lists is TTasklists => {\r\n  return Array.isArray(lists) && lists.every((e) => isTasklist(e));\r\n};\r\n\r\nexport const isTasklist = (list: any): list is ITasklist => {\r\n  if (list === null || typeof list !== \"object\") return false;\r\n  const tasklist = list as ITasklist;\r\n  return (\r\n    tasklist._id !== undefined &&\r\n    tasklist.createdAt !== undefined &&\r\n    tasklist.description !== undefined &&\r\n    tasklist.name !== undefined &&\r\n    tasklist.updatedAt !== undefined &&\r\n    typeof tasklist.createdAt === \"string\" &&\r\n    isStage(tasklist.stage1) &&\r\n    isStage(tasklist.stage2) &&\r\n    isStage(tasklist.stage3) &&\r\n    isStage(tasklist.stage4) &&\r\n    isTasks(tasklist.tasks)\r\n  );\r\n};\r\n\r\nexport const isStage = (stage: any): stage is Array<number> => {\r\n  return Array.isArray(stage) && stage.every((e) => typeof e === \"number\");\r\n};\r\n\r\nexport const isTasks = (tasks: any): tasks is TTasks => {\r\n  return Array.isArray(tasks) && tasks.every((e) => isTask(e));\r\n};\r\n\r\nexport const isTask = (obj: any): obj is ITask => {\r\n  // null is an object for some reason\r\n  if (obj === null || typeof obj !== \"object\") return false;\r\n  const task = obj as ITask;\r\n  return (\r\n    typeof task._id === \"string\" &&\r\n    typeof task.description === \"string\" &&\r\n    typeof task.name === \"string\" &&\r\n    typeof task.assignedUserIcon === \"string\" &&\r\n    typeof task.assignedUsername === \"string\"\r\n  );\r\n};\r\n\r\nexport type TasklistAction = {\r\n  type: modify_tasklist;\r\n  payload: { tasklist: ITasklist };\r\n};\r\n\r\nexport type TasklistDeleteAction = {\r\n  type: remove_tasklist;\r\n  payload: { tasklistID: string };\r\n};\r\n\r\nexport type TaskAction = {\r\n  type: add_task | remove_task | modify_task;\r\n  payload: { tasklistID: string; task: ITask };\r\n};\r\n\r\nexport type TaskStageAction = {\r\n  type: restage_task;\r\n  payload: {\r\n    tasklistID: string;\r\n    taskID: string;\r\n    priority: number;\r\n    oldPriority: number;\r\n    stage: Stage;\r\n    oldStage: Stage;\r\n  };\r\n};\r\n\r\nexport type TaskOrderAction = {\r\n  type: reorder_task;\r\n  payload: {\r\n    tasklistID: string;\r\n    taskID: string;\r\n    stage: Stage;\r\n    priority: number;\r\n    oldPriority: number;\r\n  };\r\n};\r\n\r\nexport type FetchFailedAction = {\r\n  type: fetch_failure;\r\n  payload: {\r\n    reason: TRequestFail;\r\n  };\r\n};\r\n\r\nexport type UpdateFailedAction = {\r\n  type: update_failure;\r\n  payload: {\r\n    reason: TUpdateFail;\r\n    _id: string;\r\n  };\r\n};\r\n\r\nexport type UserAction = {\r\n  type: update_user;\r\n  payload: { user: IUserInfo };\r\n};\r\n\r\nexport type LoginCompleteAction = {\r\n  type: login_complete;\r\n  payload: { user: IUserInfo; tasklists: TTasklists };\r\n};\r\n\r\nexport type LogoutCompleteAction = {\r\n  type: logout_complete;\r\n};\r\n\r\nexport type TasklistUpdatedAction = {\r\n  type: tasklist_updated;\r\n  payload: { tasklist: ITasklist; waitingNext: boolean };\r\n};\r\n\r\n// just gonna push this into the store. this doesn't go into the tasklistholder until\r\n// the tasklist created action is okay\r\nexport type TasklistCreatedAction = {\r\n  type: tasklist_created;\r\n  payload: { tasklist: ITasklist };\r\n};\r\n\r\nexport type FetchAction = {\r\n  type: fetching;\r\n  payload: IObjectID;\r\n};\r\n\r\nexport type UpdateAction = {\r\n  type: updating;\r\n  payload: IObjectID;\r\n};\r\n\r\nexport interface ILoginReturn {\r\n  userInfo: IUserInfo;\r\n  tasklists: TTasklists;\r\n}\r\n\r\nexport interface ITasklistReturn {\r\n  tasklist: ITasklist;\r\n}\r\n\r\nexport type AnyCustomAction =\r\n  | UserAction\r\n  | TasklistAction\r\n  | TasklistDeleteAction\r\n  | TaskAction\r\n  | TaskStageAction\r\n  | TaskOrderAction\r\n  | UpdateAction\r\n  | UpdateFailedAction\r\n  | FetchAction\r\n  | FetchFailedAction\r\n  | LoginCompleteAction\r\n  | LogoutCompleteAction\r\n  | TasklistUpdatedAction\r\n  | TasklistCreatedAction;\r\n","import crypto from \"crypto\";\r\n\r\nexport const TaskStage = [\r\n  \"To-Do\",\r\n  \"In Progress\",\r\n  \"Complete\",\r\n  \"Cancelled\",\r\n] as const;\r\nexport type Stage = typeof TaskStage[number];\r\n\r\nexport const ID_ADDITION = \"Z\";\r\n\r\n// why whatever request might fail\r\n// should implement these as keys in backend so i can just check if the specific key exists on login\r\n// or register or whatever\r\nexport const RequestFails = [\r\n  \"login\",\r\n  \"user_parse\",\r\n  \"tasklists_parse\",\r\n  \"email_match\",\r\n  \"username_match\",\r\n  \"email_and_username_match\",\r\n  \"lookup\",\r\n  \"unknown\",\r\n  \"none_yet\",\r\n  \"no_cookie\",\r\n  \"old_version\"\r\n] as const;\r\nexport type TRequestFail = typeof RequestFails[number];\r\n\r\nexport const UpdateFails = [\r\n  \"logout\",\r\n  \"returned_tasklist\",\r\n  \"tasks\",\r\n  \"unknown\",\r\n  \"none_yet\",\r\n  \"old_version\"\r\n] as const;\r\nexport type TUpdateFail = typeof UpdateFails[number];\r\n\r\nexport const CurrentStatus = [\r\n  \"INITIAL\",\r\n  \"UPDATING\",\r\n  \"FETCHING\",\r\n  \"SYNCED\",\r\n  \"FETCH_NEEDED\",\r\n  \"UPDATE_NEEDED\",\r\n] as const;\r\nexport type TStatus = typeof CurrentStatus[number];\r\n\r\nexport const MIN_CHAR = 14;\r\nexport const MAX_CHAR = 128;\r\nexport const MIN_NO_RESTRICTIONS = 32;\r\n\r\n// just says i need at least one uppercase, lowercase\r\n// and one number and optionally special characters\r\nexport const PASSWORD_REQ = new RegExp(\r\n  `^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9!@#$%^&*()_-]{${MIN_CHAR},${MAX_CHAR}}$`\r\n);\r\nexport const USER_REGEX = new RegExp(\"^[A-Za-z][a-zA-Z0-9_-]*$\");\r\nexport const EMAIL_REGEX = new RegExp(`^.+[@]+(?=.*[.]).+$`);\r\n\r\nconst IconGeneration = (): Array<string> => {\r\n  const max = 640;\r\n  const arr = Array<string>(max);\r\n  for (let i = 0; i < max; i++) {\r\n    let strNum = i.toString(16);\r\n    if (strNum.length === 1) {\r\n      strNum = \"\\f00\" + strNum;\r\n    } else if (strNum.length === 2) {\r\n      strNum = \"\\f0\" + strNum;\r\n    } else {\r\n      strNum = \"\\f\" + strNum;\r\n    }\r\n    arr[i] = strNum;\r\n  }\r\n  return arr;\r\n};\r\n\r\nexport const hexToRGB = (hex: string) => {\r\n  if (hex.length !== 7) {\r\n    return null;\r\n  }\r\n  const newHex = hex.slice(1);\r\n  const r = parseInt(newHex.slice(0, 2), 16);\r\n  const g = parseInt(newHex.slice(2, 4), 16);\r\n  const b = parseInt(newHex.slice(4, 6), 16);\r\n  return [r, g, b];\r\n};\r\n\r\nexport const hashPassword = (password: string) => {\r\n  const sha = crypto.createHash(\"sha512\").update(String(password));\r\n  return sha.digest(\"hex\");\r\n};\r\n\r\nexport const Icons: Array<string> = IconGeneration();\r\n","export interface FrontendRoute {\r\n  name: string;\r\n  route: string;\r\n}\r\n\r\nexport interface BackendRoute {\r\n  route: string;\r\n  methods: Array<string>;\r\n}\r\n\r\nexport const mainRoute: FrontendRoute = { name: \"ProjectManager\", route: \"/\" };\r\nexport const loggedOutRoutes: Array<FrontendRoute> = [\r\n  /* TODO: create a view tasklist page, user profile page, create project page */\r\n  { name: \"Sign Up\", route: \"/join\" },\r\n  { name: \"Login\", route: \"/login\" },\r\n];\r\nexport const loggedInRoutes: Array<FrontendRoute> = [\r\n  { name: \"My Tasklists\", route: \"/tasklists\" },\r\n  { name: \"My Organizations\", route: \"/organizations\" },\r\n  { name: \"Profile\", route: \"/profile\" },\r\n  { name: \"Logout\", route: \"/logout\" },\r\n];\r\nexport const nonNavbarRoutes: Array<FrontendRoute> = [\r\n  { name: \"Tasklist\", route: \"/tasklist/\" },\r\n  { name: \"Create Tasklist\", route: \"/create/tasklist\" },\r\n  { name: \"Organization\", route: \"/organization/\" },\r\n  { name: \"Create Organization\", route: \"/create/organization\" },\r\n];\r\nexport const loginRouter: BackendRoute = {\r\n  route: \"/api/login\",\r\n  methods: [\"POST\"],\r\n};\r\nexport const logoutRouter: BackendRoute = {\r\n  route: \"/api/logout\",\r\n  methods: [\"POST\"],\r\n};\r\nexport const registerRouter: BackendRoute = {\r\n  route: \"/api/register\",\r\n  methods: [\"POST\"],\r\n};\r\n// no methods for the base yet\r\nexport const usersRouter: BackendRoute = { route: \"/api/users\", methods: [] };\r\nexport const usersUpdate: BackendRoute = {\r\n  route: \"/api/users/update\",\r\n  methods: [\"POST\"],\r\n};\r\n\r\n// can only delete yourself while logged in\r\nexport const usersDelete: BackendRoute = {\r\n  route: \"/api/users/delete\",\r\n  methods: [\"DELETE\"],\r\n};\r\n\r\nexport const usersSearch: BackendRoute = {\r\n  route: \"/api/users/search\",\r\n  methods: [\"GET\"],\r\n};\r\n\r\n// want email to send user to frontend, then frontend to use this api\r\nexport const usersPasswordReset: BackendRoute = {\r\n  route: \"/api/userPasswordReset\",\r\n  methods: [\"POST\"],\r\n};\r\n// can a user register, given this email and/or username\r\nexport const registerCapable: BackendRoute = {\r\n  route: \"/api/register/existence\",\r\n  methods: [\"GET\"],\r\n};\r\n\r\nexport const usersPrivateInfo: BackendRoute = {\r\n  route: \"/api/users/myinfo\",\r\n  methods: [\"GET\"],\r\n};\r\n\r\n// whatever changes are made to the tasklist should be bundled into this\r\nexport const updateTasklist: BackendRoute = {\r\n  route: \"/api/tasklist/update/\",\r\n  methods: [\"POST\"],\r\n};\r\n\r\nexport const addTasklist: BackendRoute = {\r\n  route: \"/api/tasklist/add/\",\r\n  methods: [\"POST\"],\r\n};\r\n\r\nexport const addTasks: BackendRoute = {\r\n  route: \"/api/tasklist/addTasks/\",\r\n  methods: [\"POST\"],\r\n};\r\n\r\nexport const deleteTasklist: BackendRoute = {\r\n  route: \"/api/tasklist/delete/\",\r\n  methods: [\"POST\"],\r\n};\r\n","import axios, { AxiosResponse, AxiosStatic } from \"axios\";\r\nimport { ThunkDispatch, ThunkAction } from \"redux-thunk\";\r\nimport {\r\n  ID_ADDITION,\r\n  RequestFails,\r\n  Stage,\r\n  TRequestFail,\r\n  TUpdateFail,\r\n  UpdateFails,\r\n} from \"src/staticData/Constants\";\r\nimport {\r\n  loginRouter,\r\n  logoutRouter,\r\n  addTasklist as addTasklistRouter,\r\n  registerRouter,\r\n  updateTasklist,\r\n  usersPrivateInfo,\r\n  deleteTasklist,\r\n} from \"src/staticData/Routes\";\r\nimport * as types from \"../staticData/types\";\r\nimport { RootStore } from \"./configureStore\";\r\nimport { RootState } from \"./reducers\";\r\n\r\nexport const modifyTasklist = (\r\n  tasklist: types.ITasklist\r\n): types.TasklistAction => ({\r\n  type: types.MODIFY_TASKLIST,\r\n  payload: {\r\n    tasklist: tasklist,\r\n  },\r\n});\r\n\r\nexport const addTask = (\r\n  tasklistID: string,\r\n  task: types.ITask\r\n): types.TaskAction => ({\r\n  type: types.ADD_TASK,\r\n  payload: {\r\n    tasklistID: tasklistID,\r\n    task: task,\r\n  },\r\n});\r\n\r\nexport const modifyTask = (\r\n  tasklistID: string,\r\n  task: types.ITask\r\n): types.TaskAction => ({\r\n  type: types.MODIFY_TASK,\r\n  payload: {\r\n    tasklistID: tasklistID,\r\n    task: task,\r\n  },\r\n});\r\n\r\nexport const removeTask = (\r\n  tasklistID: string,\r\n  task: types.ITask\r\n): types.TaskAction => ({\r\n  type: types.REMOVE_TASK,\r\n  payload: {\r\n    tasklistID: tasklistID,\r\n    task: task,\r\n  },\r\n});\r\n\r\nexport const restageTask = (\r\n  tasklistID: string,\r\n  taskID: string,\r\n  stage: Stage,\r\n  oldStage: Stage,\r\n  priority: number,\r\n  oldPriority: number\r\n): types.TaskStageAction => ({\r\n  type: types.RESTAGE_TASK,\r\n  payload: {\r\n    tasklistID,\r\n    taskID,\r\n    stage,\r\n    priority,\r\n    oldStage,\r\n    oldPriority,\r\n  },\r\n});\r\n\r\nexport const reorderTask = (\r\n  tasklistID: string,\r\n  taskID: string,\r\n  stage: Stage,\r\n  priority: number,\r\n  oldPriority: number\r\n): types.TaskOrderAction => ({\r\n  type: types.REORDER_TASK,\r\n  payload: {\r\n    tasklistID,\r\n    taskID,\r\n    stage,\r\n    priority,\r\n    oldPriority,\r\n  },\r\n});\r\n\r\nexport const fetching = (_id: string): types.FetchAction => ({\r\n  type: types.FETCHING_DATA,\r\n  payload: { _id },\r\n});\r\n\r\nexport const updating = (_id: string): types.UpdateAction => ({\r\n  type: types.UPDATING_SERVER,\r\n  payload: { _id },\r\n});\r\n\r\nexport const updateUser = (info: types.IUserInfo): types.UserAction => ({\r\n  type: types.UPDATE_USER,\r\n  payload: {\r\n    user: info,\r\n  },\r\n});\r\n\r\nexport const loginFail = (reason: TRequestFail): types.FetchFailedAction => ({\r\n  type: types.FETCH_FAILURE,\r\n  payload: {\r\n    reason,\r\n  },\r\n});\r\n\r\nexport const updateFail = (\r\n  reason: TUpdateFail,\r\n  id = \"\"\r\n): types.UpdateFailedAction => ({\r\n  type: types.UPDATE_FAILURE,\r\n  payload: {\r\n    reason,\r\n    _id: id,\r\n  },\r\n});\r\n\r\nexport const loginSuccess = (\r\n  login: types.ILoginReturn\r\n): types.LoginCompleteAction => ({\r\n  type: types.LOGIN_COMPLETE,\r\n  payload: {\r\n    user: login.userInfo,\r\n    tasklists: login.tasklists,\r\n  },\r\n});\r\n\r\nexport const logoutSuccess = (): types.LogoutCompleteAction => ({\r\n  type: types.LOGOUT_COMPLETE,\r\n});\r\n\r\nexport const tasklistUpdateSuccess = (\r\n  obj: types.ITasklistReturn,\r\n  state: RootState\r\n): types.TasklistUpdatedAction => {\r\n  return {\r\n    type: types.TASKLIST_UPDATED,\r\n    payload: {\r\n      tasklist: obj.tasklist,\r\n      waitingNext:\r\n        state.storeState[`${obj.tasklist._id}${ID_ADDITION}`] !== undefined,\r\n    },\r\n  };\r\n};\r\n\r\nexport const tasklistDeleteSuccess = (\r\n  id: string\r\n): types.TasklistDeleteAction => {\r\n  return {\r\n    type: types.REMOVE_TASKLIST,\r\n    payload: {\r\n      tasklistID: id,\r\n    },\r\n  };\r\n};\r\n\r\nexport const tasklistCreateSuccess = (\r\n  obj: types.ITasklistReturn\r\n): types.TasklistCreatedAction => ({\r\n  type: types.TASKLIST_CREATED,\r\n  payload: {\r\n    tasklist: obj.tasklist,\r\n  },\r\n});\r\n\r\ninterface ErrorResponse {\r\n  response: AxiosResponse;\r\n}\r\n\r\nconst extractPrivateInfo = (info: any) => {\r\n  const user = types.extractUserInfo(info);\r\n  if (user === null) {\r\n    return Promise.reject(RequestFails[1]);\r\n  }\r\n  const tasklists = types.extractTasklists(info);\r\n  if (tasklists === null) {\r\n    return Promise.reject(RequestFails[2]);\r\n  }\r\n  return { userInfo: user, tasklists: tasklists };\r\n};\r\n\r\nconst extractTasklist = (info: any): Promise<types.ITasklistReturn> => {\r\n  const tasklist = types.extractTasklist(info);\r\n  if (tasklist === null) {\r\n    return Promise.reject(UpdateFails[1]);\r\n  }\r\n  return Promise.resolve({ tasklist: tasklist });\r\n};\r\n\r\nconst updateTasklistRequest = (\r\n  tasklist: types.IParsedUpdate\r\n): Promise<types.ITasklistReturn> => {\r\n  return axios\r\n    .post(\r\n      updateTasklist.route + tasklist._id,\r\n      // server doesn't care about extra stuff like having the _id here :p\r\n      // it extracts the info it wants\r\n      tasklist,\r\n      { withCredentials: true }\r\n    )\r\n    .then((response) => extractTasklist(response.data))\r\n    .catch(({ response }: ErrorResponse) => {\r\n      console.warn(response.data);\r\n      return Promise.reject(UpdateFails[1]);\r\n    });\r\n};\r\n\r\nconst addTasklistRequest = (\r\n  tasklist: types.ITasklistCreate\r\n): Promise<types.ITasklistReturn> => {\r\n  return axios\r\n    .post(addTasklistRouter.route, tasklist, { withCredentials: true })\r\n    .then((response) => extractTasklist(response.data))\r\n    .catch(({ response }: ErrorResponse) => Promise.reject(UpdateFails[1]));\r\n};\r\n\r\nconst deleteTasklistRequest = (id: string): Promise<void> => {\r\n  return (\r\n    axios\r\n      .delete(deleteTasklist.route + id, { withCredentials: true })\r\n      .then(() => {})\r\n      // at some point need to parse this and get better rejection information\r\n      .catch(({ response }: ErrorResponse) => Promise.reject(UpdateFails[1]))\r\n  );\r\n};\r\n\r\nconst loginRequest = (\r\n  credentials: types.TUserCredentials\r\n): Promise<types.ILoginReturn> => {\r\n  return axios\r\n    .post(loginRouter.route, credentials)\r\n    .then((response) => extractPrivateInfo(response.data.user))\r\n    .catch(({ response }: ErrorResponse) => Promise.reject(RequestFails[0]));\r\n};\r\n\r\nconst logoutRequest = (): Promise<AxiosStatic> => {\r\n  return axios.post(logoutRouter.route, { withCredentials: true });\r\n};\r\n\r\nconst signupRequest = (\r\n  credentials: types.IUserRegister\r\n): Promise<types.ILoginReturn> => {\r\n  return axios\r\n    .post(registerRouter.route, credentials)\r\n    .then((response) => extractPrivateInfo(response.data.user))\r\n    .catch(({ response }: ErrorResponse) => {\r\n      if (response === undefined) {\r\n        return Promise.reject(RequestFails[7]);\r\n      }\r\n      if (response.status !== 409) {\r\n        return Promise.reject(RequestFails[7]);\r\n      }\r\n      if (response.data.username) {\r\n        if (response.data.email) {\r\n          return Promise.reject(RequestFails[5]);\r\n        } else {\r\n          return Promise.reject(RequestFails[4]);\r\n        }\r\n      } else if (response.data.email) {\r\n        return Promise.reject(RequestFails[3]);\r\n      }\r\n      return Promise.reject(RequestFails[7]);\r\n    });\r\n};\r\n\r\nconst infoRequest = (cookieLogin = false): Promise<types.ILoginReturn> => {\r\n  return axios\r\n    .get(usersPrivateInfo.route, {\r\n      withCredentials: true,\r\n    })\r\n    .then((response) => extractPrivateInfo(response.data))\r\n    .catch(({ response }: ErrorResponse) => {\r\n      if (cookieLogin) return Promise.reject(RequestFails[9]);\r\n      else return Promise.reject(RequestFails[6]);\r\n    });\r\n};\r\n\r\n// thunks\r\n// NOTE on return type of these thunks\r\n// use the top level argument types and the return type of the last function\r\nexport const loginAttempt = (\r\n  credentials: types.TUserCredentials\r\n): ThunkAction<\r\n  Promise<types.FetchFailedAction | types.LoginCompleteAction>,\r\n  {},\r\n  {},\r\n  types.AnyCustomAction\r\n> => {\r\n  return function (dispatch: ThunkDispatch<{}, {}, types.AnyCustomAction>) {\r\n    dispatch(fetching(types.FAKE_IDS[0]));\r\n    return loginRequest(credentials)\r\n      .then((login: types.ILoginReturn) => dispatch(loginSuccess(login)))\r\n      .catch((reason: TRequestFail) => dispatch(loginFail(reason)));\r\n  };\r\n};\r\n\r\n// TODO slightly truncated version of login\r\nexport const loginAttemptFromCookie = (): ThunkAction<\r\n  Promise<types.FetchFailedAction | types.LoginCompleteAction>,\r\n  {},\r\n  {},\r\n  types.AnyCustomAction\r\n> => {\r\n  return function (dispatch: ThunkDispatch<{}, {}, types.AnyCustomAction>) {\r\n    dispatch(fetching(types.FAKE_IDS[0]));\r\n    return infoRequest(true)\r\n      .then((login: types.ILoginReturn) => dispatch(loginSuccess(login)))\r\n      .catch((reason: TRequestFail) => dispatch(loginFail(reason)));\r\n  };\r\n};\r\n\r\nexport const signUpAttempt = (\r\n  credentials: types.IUserRegister\r\n): ThunkAction<\r\n  Promise<types.FetchFailedAction | types.LoginCompleteAction>,\r\n  {},\r\n  {},\r\n  types.AnyCustomAction\r\n> => {\r\n  return function (dispatch: ThunkDispatch<{}, {}, types.AnyCustomAction>) {\r\n    dispatch(fetching(types.FAKE_IDS[0]));\r\n    return signupRequest(credentials)\r\n      .then((login: types.ILoginReturn) => dispatch(loginSuccess(login)))\r\n      .catch((reason: TRequestFail) => dispatch(loginFail(reason)));\r\n  };\r\n};\r\n\r\nexport const logoutAttempt = (): ThunkAction<\r\n  Promise<types.UpdateFailedAction | types.LogoutCompleteAction>,\r\n  {},\r\n  {},\r\n  types.AnyCustomAction\r\n> => {\r\n  return function (dispatch: ThunkDispatch<{}, {}, types.AnyCustomAction>) {\r\n    dispatch(fetching(types.FAKE_IDS[0]));\r\n    return logoutRequest()\r\n      .then(() => dispatch(logoutSuccess()))\r\n      .catch(() => dispatch(updateFail(UpdateFails[0])));\r\n  };\r\n};\r\n\r\nexport const addTasklistAttempt = (\r\n  tasklist: types.ITasklistCreate\r\n): ThunkAction<\r\n  Promise<types.UpdateFailedAction | types.TasklistCreatedAction>,\r\n  {},\r\n  {},\r\n  types.AnyCustomAction\r\n> => {\r\n  return function (dispatch: ThunkDispatch<{}, {}, types.AnyCustomAction>) {\r\n    dispatch(updating(types.FAKE_IDS[1]));\r\n    return addTasklistRequest(tasklist)\r\n      .then((tasklistObj: types.ITasklistReturn) =>\r\n        dispatch(tasklistCreateSuccess(tasklistObj))\r\n      )\r\n      .catch((reason: TUpdateFail) => dispatch(updateFail(reason)));\r\n  };\r\n};\r\n\r\nexport const updateTasklistAttempt = (\r\n  tasklist: types.IParsedUpdate,\r\n  store: RootStore\r\n): ThunkAction<\r\n  Promise<types.UpdateFailedAction | types.TasklistUpdatedAction>,\r\n  {},\r\n  {},\r\n  types.AnyCustomAction\r\n> => {\r\n  return function (dispatch: ThunkDispatch<{}, {}, types.AnyCustomAction>) {\r\n    const id = tasklist._id;\r\n    store.dispatch(updating(tasklist._id));\r\n    return updateTasklistRequest(tasklist)\r\n      .then((tasklistObj: types.ITasklistReturn) =>\r\n        store.dispatch(tasklistUpdateSuccess(tasklistObj, store.getState()))\r\n      )\r\n      .catch((reason: TUpdateFail) => store.dispatch(updateFail(reason, id)));\r\n  };\r\n};\r\n\r\nexport const deleteTasklistAttempt = (\r\n  id: string\r\n): ThunkAction<\r\n  Promise<types.UpdateFailedAction | types.TasklistDeleteAction>,\r\n  {},\r\n  {},\r\n  types.AnyCustomAction\r\n> => {\r\n  return function (dispatch: ThunkDispatch<{}, {}, types.AnyCustomAction>) {\r\n    dispatch(updating(id));\r\n    return deleteTasklistRequest(id)\r\n      .then(() => dispatch(tasklistDeleteSuccess(id)))\r\n      .catch((reason: TUpdateFail) => dispatch(updateFail(reason, id)));\r\n  };\r\n};\r\n","import {\r\n  AnyCustomAction,\r\n  ITasklistsHolder,\r\n  IUpdateStates,\r\n  IUserInfo,\r\n  ServerStatus,\r\n} from \"src/staticData/types\";\r\nimport { RootReducer, RootState } from \"./reducers\";\r\n\r\nexport const FreezeState = (state: RootState): RootState => {\r\n  TasklistsHelper(state.tasklistHolder);\r\n  ServerStateHelper(state.serverState);\r\n  StoreStateHelper(state.storeState);\r\n  UserStateHelper(state.userInfo);\r\n  Object.freeze(state);\r\n  return state;\r\n};\r\n\r\nconst TasklistsHelper = (holder: ITasklistsHolder): ITasklistsHolder => {\r\n  if (holder === undefined) return holder;\r\n  for (let i = 0; i < holder.tasklists.length; i++) {\r\n    for (let j = 0; j < holder.tasklists[i].tasks.length; j++) {\r\n      Object.freeze(holder.tasklists[i].tasks[j]);\r\n    }\r\n    Object.freeze(holder.tasklists[i].tasks);\r\n    Object.freeze(holder.tasklists[i]);\r\n  }\r\n  Object.freeze(holder.ids);\r\n  return holder;\r\n};\r\n\r\nconst StoreStateHelper = (storeState: IUpdateStates) => {\r\n  if (storeState === undefined) return storeState;\r\n  Object.values(storeState).forEach((e) => {\r\n    Object.freeze(e.types);\r\n    Object.freeze(e);\r\n  });\r\n  Object.freeze(storeState);\r\n  return storeState;\r\n};\r\n\r\nconst ServerStateHelper = (serverState: ServerStatus) => {\r\n  if (serverState === undefined) return serverState;\r\n  Object.freeze(serverState);\r\n  return serverState;\r\n};\r\n\r\nconst UserStateHelper = (userState: IUserInfo) => {\r\n  if (userState === undefined) return userState;\r\n  Object.freeze(userState);\r\n  return userState;\r\n}\r\n\r\n// middleware wont work for state freezing\r\n// so we can only wrap the reducer and before it gets returned it gets frozen\r\nexport function Freezer(reducer: RootReducer) {\r\n  return (state: RootState | undefined, action: AnyCustomAction): RootState => {\r\n    return FreezeState(reducer(state, action));\r\n  };\r\n}\r\n\r\nexport default Freezer;\r\n","import * as types from \"../../staticData/types\";\r\nimport { TaskStage } from \"src/staticData/Constants\";\r\n\r\n// ids gives the array index for the associated tasklist\r\n// this should have all the copy information required\r\nexport const defaultTasklists: types.ITasklistsHolder = {\r\n  tasklists: [\r\n    {\r\n      description: \"\",\r\n      _id: \"RANDOM_garbageLOL1235\",\r\n      name: \"\",\r\n      createdAt: new Date(Date.now()),\r\n      updatedAt: new Date(Date.now()),\r\n      tasks: [\r\n        {\r\n          name: \"\",\r\n          description: \"\",\r\n          _id: \"\",\r\n          assignedUsername: \"\",\r\n          assignedUserIcon: \"\",\r\n        },\r\n      ],\r\n      stage1: [0],\r\n      stage2: [],\r\n      stage3: [],\r\n      stage4: [],\r\n    },\r\n  ],\r\n  ids: { RANDOM_garbageLOL1235: 0 },\r\n};\r\n\r\n// handles restaging or reordering now\r\nconst restageHelper = (\r\n  tasklist: types.ITasklist,\r\n  action: types.TaskStageAction\r\n): types.ITasklistStages => {\r\n  // extract the task's index from the tasks array\r\n  const index = tasklist.tasks.reduce(\r\n    (accumulator, element, index) =>\r\n      element._id === action.payload.taskID ? index : accumulator,\r\n    -1\r\n  );\r\n  // remove the item from the old array\r\n  const toReturn: types.ITasklistStages = {\r\n    stage1: [...tasklist.stage1],\r\n    stage2: [...tasklist.stage2],\r\n    stage3: [...tasklist.stage3],\r\n    stage4: [...tasklist.stage4],\r\n  };\r\n  switch (action.payload.oldStage) {\r\n    case TaskStage[0]:\r\n      toReturn.stage1 = toReturn.stage1.filter((e) => e !== index);\r\n      break;\r\n    case TaskStage[1]:\r\n      toReturn.stage2 = toReturn.stage2.filter((e) => e !== index);\r\n      break;\r\n    case TaskStage[2]:\r\n      toReturn.stage3 = toReturn.stage3.filter((e) => e !== index);\r\n      break;\r\n    case TaskStage[3]:\r\n      toReturn.stage4 = toReturn.stage4.filter((e) => e !== index);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  // insert the item to the new array, this splice directly changes the given array\r\n  switch (action.payload.stage) {\r\n    case TaskStage[0]:\r\n      toReturn.stage1.splice(action.payload.priority, 0, index);\r\n      break;\r\n    case TaskStage[1]:\r\n      toReturn.stage2.splice(action.payload.priority, 0, index);\r\n      break;\r\n    case TaskStage[2]:\r\n      toReturn.stage3.splice(action.payload.priority, 0, index);\r\n      break;\r\n    case TaskStage[3]:\r\n      toReturn.stage4.splice(action.payload.priority, 0, index);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  return toReturn;\r\n};\r\n\r\nconst removeTaskHelper = (\r\n  tasklist: types.ITasklist,\r\n  action: types.TaskAction\r\n): types.ITasklistPartialStages => {\r\n  const index = tasklist.tasks.reduce(\r\n    (accumulator, element, index) =>\r\n      element._id === action.payload.task._id ? index : accumulator,\r\n    -1\r\n  );\r\n  return {\r\n    // remove the offender, wherever it may be\r\n    // increment the higher indices\r\n    stage1: tasklist.stage1\r\n      .filter((e) => e !== index)\r\n      .map((e) => (e > index ? e - 1 : e)),\r\n    stage2: tasklist.stage2\r\n      .filter((e) => e !== index)\r\n      .map((e) => (e > index ? e - 1 : e)),\r\n    stage3: tasklist.stage3\r\n      .filter((e) => e !== index)\r\n      .map((e) => (e > index ? e - 1 : e)),\r\n    stage4: tasklist.stage4\r\n      .filter((e) => e !== index)\r\n      .map((e) => (e > index ? e - 1 : e)),\r\n  };\r\n};\r\n\r\nconst updateTasklistHelper = (\r\n  state: types.ITasklistsHolder,\r\n  action: types.TasklistUpdatedAction | types.TasklistAction\r\n) => {\r\n  const index: number | undefined = state.ids[action.payload.tasklist._id];\r\n  // want to allow modifications to the zero state\r\n  if (!index && index !== 0) return state;\r\n  let sliced = state.tasklists.slice();\r\n  sliced[index] = action.payload.tasklist;\r\n  return {\r\n    tasklists: sliced,\r\n    ids: state.ids,\r\n  };\r\n};\r\n\r\nconst createValidTasklist = (tasklist: types.ITasklist) => {\r\n  var stageCount = tasklist.tasks.length;\r\n  if (\r\n    stageCount !==\r\n    tasklist.stage1.length +\r\n      tasklist.stage2.length +\r\n      tasklist.stage3.length +\r\n      tasklist.stage4.length\r\n  ) {\r\n    const obj: { [key: number]: number } = {};\r\n    for (let i = 0; i < stageCount; i++) obj[i] = 0;\r\n    tasklist.stage1 = tasklist.stage1\r\n      .map((e: number) => {\r\n        obj[e] = 1;\r\n        return e < stageCount && e > -1 ? e : -1;\r\n      })\r\n      .filter((e) => e !== -1);\r\n    tasklist.stage2 = tasklist.stage2\r\n      .map((e: number) => {\r\n        obj[e] = 1;\r\n        return e < stageCount && e > -1 ? e : -1;\r\n      })\r\n      .filter((e) => e !== -1);\r\n    tasklist.stage3 = tasklist.stage3\r\n      .map((e: number) => {\r\n        obj[e] = 1;\r\n        return e < stageCount && e > -1 ? e : -1;\r\n      })\r\n      .filter((e) => e !== -1);\r\n    tasklist.stage4 = tasklist.stage4\r\n      .map((e: number) => {\r\n        obj[e] = 1;\r\n        return e < stageCount && e > -1 ? e : -1;\r\n      })\r\n      .filter((e) => e !== -1);\r\n    Object.keys(obj).forEach((key) => {\r\n      const realKey = parseInt(key);\r\n      if (obj[realKey] === 0) {\r\n        tasklist.stage1.push(realKey);\r\n      }\r\n    });\r\n    return tasklist;\r\n  } else {\r\n    return tasklist;\r\n  }\r\n};\r\n\r\n// action payload has at least 2 required keys: .tasklist and .tasklist._id\r\n// if doing single task actions it also requires .task and .task._id\r\n// OR just one ==> tasklists\r\n// tasklists and tasks are required to have unique id @ ._id\r\n\r\n// changing this from anyaction to specifically the actions it's set up to work with\r\n// based on types\r\nexport const tasklistHolder = (\r\n  // ensures that undefined case still has defined initial state\r\n  state: types.ITasklistsHolder = defaultTasklists,\r\n  action: types.AnyCustomAction\r\n): types.ITasklistsHolder => {\r\n  switch (action.type) {\r\n    case types.LOGOUT_COMPLETE:\r\n      return defaultTasklists;\r\n    case types.LOGIN_COMPLETE:\r\n      var lists: types.TTasklists = action.payload.tasklists;\r\n      const ids: types.IIDs = {};\r\n      // must ensure valid stages on receipt of tasklist from server\r\n      lists = lists.map((tasklist) => createValidTasklist(tasklist));\r\n      for (let i = 0; i < lists.length; i++) {\r\n        ids[lists[i]._id] = i;\r\n      }\r\n      return {\r\n        tasklists: lists,\r\n        ids: ids,\r\n      };\r\n    case types.TASKLIST_CREATED:\r\n      return {\r\n        tasklists: [...state.tasklists, action.payload.tasklist],\r\n        ids: {\r\n          ...state.ids,\r\n          [action.payload.tasklist._id]: state.tasklists.length,\r\n        },\r\n      };\r\n    case types.TASKLIST_UPDATED:\r\n      if (action.payload.waitingNext) return state;\r\n      return updateTasklistHelper(state, action);\r\n    case types.MODIFY_TASKLIST:\r\n      return updateTasklistHelper(state, action);\r\n    case types.REMOVE_TASKLIST:\r\n      const index2: number | undefined = state.ids[action.payload.tasklistID];\r\n      if (!index2 && index2 !== 0) return state;\r\n      const lists1 = [\r\n        ...state.tasklists.slice(0, index2),\r\n        ...state.tasklists.slice(index2 + 1),\r\n      ];\r\n      const ids1: types.IIDs = {};\r\n      // probably faster to recreate from scratch anyway\r\n      for (let i = 0; i < lists1.length; i++) {\r\n        ids1[lists1[i]._id] = i;\r\n      }\r\n      return {\r\n        tasklists: lists1,\r\n        ids: ids1,\r\n      };\r\n    case types.ADD_TASK:\r\n      return {\r\n        tasklists: state.tasklists.map((tasklist) => {\r\n          if (tasklist._id !== action.payload.tasklistID) return tasklist;\r\n          return {\r\n            ...tasklist,\r\n            stage1: [...tasklist.stage1, tasklist.tasks.length],\r\n            tasks: [...tasklist.tasks, action.payload.task],\r\n          };\r\n        }),\r\n        ids: state.ids,\r\n      };\r\n    // not allowed to restage or reprioritize task with the modify method\r\n    case types.MODIFY_TASK:\r\n      return {\r\n        tasklists: state.tasklists.map((tasklist) => {\r\n          if (tasklist._id !== action.payload.tasklistID) return tasklist;\r\n          return {\r\n            ...tasklist,\r\n            tasks: tasklist.tasks.map((task) => {\r\n              if (task._id !== action.payload.task._id) return task;\r\n              return action.payload.task;\r\n            }),\r\n          };\r\n        }),\r\n        ids: state.ids,\r\n      };\r\n    case types.REMOVE_TASK:\r\n      return {\r\n        tasklists: state.tasklists.map((tasklist) => {\r\n          if (tasklist._id !== action.payload.tasklistID) return tasklist;\r\n          const tasks = tasklist.tasks.filter(\r\n            (element) => element._id !== action.payload.task._id\r\n          );\r\n          const stages = removeTaskHelper(tasklist, action);\r\n          return {\r\n            ...tasklist,\r\n            ...stages,\r\n            tasks: tasks,\r\n          };\r\n        }),\r\n        ids: state.ids,\r\n      };\r\n    case types.RESTAGE_TASK:\r\n      return {\r\n        tasklists: state.tasklists.map((tasklist) => {\r\n          if (tasklist._id !== action.payload.tasklistID) return tasklist;\r\n          return {\r\n            ...tasklist,\r\n            ...restageHelper(tasklist, action),\r\n          };\r\n        }),\r\n        ids: state.ids,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default tasklistHolder;\r\n\r\nexport type TTasklistReducer = ReturnType<typeof tasklistHolder>;\r\n","import * as types from \"src/staticData/types\";\r\n// this reducer will read in all posts and gets to server\r\n// and will also look at any add or modify request to store\r\n// and mark status as dirty\r\n\r\n// initial statuses: INITIAL && login=false\r\n\r\n// login succeeded with store changes ? SYNCED && set login to true\r\n// login failed or logout ? set login to false\r\n// info request failed ? FETCH_ERROR\r\n// during some fetch request from store ? FETCHING\r\n// update request fail ? UPDATE_ERROR\r\n// during some update request to store ? UPDATING\r\n// an action has changed store values and server hasn't been updated ? NOT_SYNCED\r\n\r\nconst defaultStatus: types.ServerStatus = {\r\n  status: \"INITIAL\",\r\n  lastFetchFailure: \"none_yet\",\r\n  lastUpdateFailure: \"none_yet\",\r\n  loggedIn: false,\r\n};\r\n\r\nexport const serverState = (\r\n  // ensures that undefined case still has defined initial state\r\n  state: types.ServerStatus = defaultStatus,\r\n  action: types.AnyCustomAction\r\n): types.ServerStatus => {\r\n  switch (action.type) {\r\n    case types.FETCHING_DATA:\r\n      return { ...state, status: \"FETCHING\" };\r\n    case types.UPDATING_SERVER:\r\n      return { ...state, status: \"UPDATING\" };\r\n    case types.LOGIN_COMPLETE:\r\n      return { ...state, loggedIn: true, status: \"SYNCED\" };\r\n    case types.LOGOUT_COMPLETE:\r\n      return { ...state, loggedIn: false, status: \"SYNCED\" };\r\n    case types.FETCH_FAILURE:\r\n      return { ...state, status: \"FETCH_NEEDED\", lastFetchFailure: action.payload.reason };\r\n    case types.UPDATE_FAILURE:\r\n      return { ...state, status: \"UPDATE_NEEDED\", lastUpdateFailure: action.payload.reason };\r\n    case types.TASKLIST_UPDATED:\r\n    case types.TASKLIST_CREATED:\r\n      return { ...state, status: \"SYNCED\" };\r\n    case types.ADD_TASK:\r\n    case types.MODIFY_TASK:\r\n    case types.MODIFY_TASKLIST:\r\n    case types.REMOVE_TASK:\r\n    case types.REMOVE_TASKLIST:\r\n    case types.REORDER_TASK:\r\n    case types.RESTAGE_TASK:\r\n    case types.UPDATE_USER:\r\n      return { ...state, status: \"UPDATE_NEEDED\" };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default serverState;\r\n","///\r\n/// summary\r\n///\r\n\r\n// this file needs to do all of one thing:\r\n// maintain an array of objects that need to be updated:\r\n// when an item gets popped from the dirty stack it gets placed in the\r\n// updating stack then either gets put back in dirty stack OR gets\r\n// removed entirely\r\n// when a change is made to a part of the store that must be\r\n// kept up to date on the server (most things) then its id\r\n// chain (id of user => tasklist => task if its a task\r\n// or just user => tasklist if its a tasklist or many tasks in\r\n// a tasklist)\r\n// and highest level type (user for all the current stuff) must be put in the array\r\n\r\n// when the updater function checks for more updates to do, it will\r\n// pop the next action to take and perform that update\r\n\r\nimport { ID_ADDITION } from \"src/staticData/Constants\";\r\nimport * as types from \"src/staticData/types\";\r\n// this reducer will read in all posts and gets to server\r\n// and will also look at any add or modify request to store\r\n// and mark status as dirty\r\n\r\n// initial statuses: INITIAL && login=false\r\n\r\n// login succeeded with store changes ? SYNCED && set login to true\r\n// login failed or logout ? set login to false\r\n// info request failed ? FETCH_ERROR\r\n// during some fetch request from store ? FETCHING\r\n// update request fail ? UPDATE_ERROR\r\n// during some update request to store ? UPDATING\r\n// an action has changed store values and server hasn't been updated ? NOT_SYNCED\r\n\r\n// is an object, just grab the first key\r\nconst defaultStatus: types.IUpdateStates = {};\r\n// ids are always 24 characters long, so just adding a digit is completely safe\r\n// but we want something that also cant exist in a mongodb objectid\r\n// this should be a single char btw\r\n\r\nconst addUpdate = (\r\n  id: string,\r\n  typesObject: types.TUpdateTypes,\r\n  state: types.IUpdateStates\r\n) => {\r\n  if (id === \"\") return state;\r\n  const existing = state[id];\r\n  // if theres already an update in progress, we wanna skip\r\n  if (existing && existing.updating) {\r\n    id += ID_ADDITION;\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    [id]: {\r\n      updating: false,\r\n      types: {\r\n        ...state[id]?.types,\r\n        ...typesObject,\r\n      },\r\n    },\r\n  };\r\n};\r\n\r\nexport const storeState = (\r\n  // ensures that undefined case still has defined initial state\r\n  state: types.IUpdateStates = defaultStatus,\r\n  action: types.AnyCustomAction\r\n): types.IUpdateStates => {\r\n  const typesObject: types.TUpdateTypes = {};\r\n  var id = \"\";\r\n  switch (action.type) {\r\n    // resetting the dirty stuff when we've logged in or out\r\n\r\n    case types.ADD_TASK:\r\n      typesObject[types.UpdateType.ADD_TASK] = 1;\r\n      id = action.payload.tasklistID;\r\n      break;\r\n    case types.MODIFY_TASK:\r\n      typesObject[types.UpdateType.SET_TASKS] = 1;\r\n      id = action.payload.tasklistID;\r\n      break;\r\n    case types.RESTAGE_TASK:\r\n      typesObject[types.UpdateType.SET_STAGES] = 1;\r\n      id = action.payload.tasklistID;\r\n      break;\r\n    case types.REMOVE_TASK:\r\n      typesObject[types.UpdateType.SET_TASKS] = 1;\r\n      typesObject[types.UpdateType.SET_STAGES] = 1;\r\n      id = action.payload.tasklistID;\r\n      break;\r\n    // deprecating the add_tasklist, it should be done through database only\r\n    case types.MODIFY_TASKLIST:\r\n      typesObject[types.UpdateType.TASKLIST_INFO] = 1;\r\n      id = action.payload.tasklist._id;\r\n      break;\r\n    // this is the case where the server has replied to a tasklist remove request\r\n    case types.REMOVE_TASKLIST:\r\n      const stateRemoved = {...state};\r\n      delete stateRemoved[action.payload.tasklistID];\r\n      delete stateRemoved[`${action.payload.tasklistID}${ID_ADDITION}`];\r\n      return stateRemoved;\r\n    // all the immediate return cases start here\r\n    case types.LOGIN_COMPLETE:\r\n    case types.LOGOUT_COMPLETE:\r\n      return defaultStatus;\r\n    case types.UPDATING_SERVER:\r\n      var obj = state[action.payload._id];\r\n      if (obj !== undefined) {\r\n        return { ...state, [action.payload._id]: { ...obj, updating: true } };\r\n      }\r\n      return state;\r\n    // need to notify to retry update on failure\r\n    case types.UPDATE_FAILURE:\r\n      obj = state[action.payload._id];\r\n      if (obj !== undefined) {\r\n        return { ...state, [action.payload._id]: { ...obj, updating: false } };\r\n      }\r\n      return state;\r\n    case types.TASKLIST_UPDATED:\r\n      // swap the ID_ADDITION version in if it exists for this id\r\n      // or just delete the old one\r\n      const stateCopy = { ...state };\r\n      const id2 = action.payload.tasklist._id;\r\n      if (stateCopy[id2 + ID_ADDITION] !== undefined) {\r\n        stateCopy[id2] = { ...stateCopy[id2 + ID_ADDITION] };\r\n        delete stateCopy[id2 + ID_ADDITION];\r\n      } else {\r\n        delete stateCopy[id2];\r\n      }\r\n      return stateCopy;\r\n    // also need a user_updated one that is nearly the same as the tasklist updated one\r\n    default:\r\n      return state;\r\n  }\r\n  // most cases are very similar, so grouped together at end\r\n  return addUpdate(id, typesObject, state);\r\n};\r\n\r\nexport default storeState;\r\n","import * as types from \"src/staticData/types\";\r\n// this reducer will read in all posts and gets to server\r\n// and will also look at any add or modify request to store\r\n// and mark status as dirty\r\n\r\n// initial statuses: INITIAL && login=false\r\n\r\n// login succeeded with store changes ? SYNCED && set login to true\r\n// login failed or logout ? set login to false\r\n// info request failed ? FETCH_ERROR\r\n// during some fetch request from store ? FETCHING\r\n// update request fail ? UPDATE_ERROR\r\n// during some update request to store ? UPDATING\r\n// an action has changed store values and server hasn't been updated ? NOT_SYNCED\r\n\r\nconst defaultStatus: types.IUserInfo = {\r\n  username: \"none\",\r\n  __v: 0,\r\n  color: \"#3ff\",\r\n  createdAt: new Date(Date.now()),\r\n  email: \"fake\",\r\n  icon: \"none\",\r\n  updatedAt: new Date(Date.now()),\r\n};\r\n\r\nconst userInfo = (\r\n  // ensures that undefined case still has defined initial state\r\n  state: types.IUserInfo = defaultStatus,\r\n  action: types.AnyCustomAction\r\n): types.IUserInfo => {\r\n  switch(action.type) {\r\n    case types.LOGIN_COMPLETE:\r\n      return action.payload.user;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default userInfo;","// reducer for each field we care about from the server's stored data\r\nimport { combineReducers } from \"redux\";\r\nimport { tasklistHolder } from \"./tasklist\";\r\nimport serverState from \"./serverState\";\r\nimport storeState from \"./storeState\";\r\nimport userInfo from \"./userinfo\";\r\n// import username from \"./username\";\r\n// import icon from \"./icon\";\r\n// import color from \"./color\";\r\n// import email from \"./email\";\r\n\r\nconst rootReducer = combineReducers({ tasklistHolder, serverState, storeState, userInfo });\r\n\r\nexport default rootReducer;\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\nexport type RootReducer = typeof rootReducer;\r\n","import { TaskStage } from \"src/staticData/Constants\";\r\nimport { ITask, ITasklist } from \"src/staticData/types\";\r\nimport { RootState } from \"./reducers\";\r\n\r\nexport const getTasklists = (state: RootState) =>\r\n  state.tasklistHolder.tasklists;\r\nexport const getTasklistIDS = (state: RootState) => state.tasklistHolder.ids;\r\n\r\ninterface NameProps {\r\n  name: string;\r\n}\r\ninterface IndexProps {\r\n  index: number;\r\n}\r\ninterface IDProps {\r\n  id: string;\r\n}\r\n\r\nexport const getTasklistByName = (state: RootState, props: NameProps) => {\r\n  var tasklists = getTasklists(state);\r\n  for (let i = 0; i < tasklists.length; i++) {\r\n    if (tasklists[i].name === props.name) {\r\n      return tasklists[i];\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const getTasklistByIndex = (state: RootState, props: IndexProps) => {\r\n  var tasklists = getTasklists(state);\r\n  if (tasklists.length <= props.index || props.index < 0) return null;\r\n  return tasklists[props.index];\r\n};\r\n\r\n// note: it's .id not ._id here\r\nexport const getTasklistById = (state: RootState, props: IDProps) => {\r\n  var tasklists = getTasklists(state);\r\n  var ids = getTasklistIDS(state);\r\n  const id = ids[props.id];\r\n  if (id === undefined || id < 0 || id >= tasklists.length) return null;\r\n  return tasklists[id];\r\n};\r\n\r\nexport const getLoggedIn = (state: RootState) => {\r\n  return state.serverState.loggedIn;\r\n};\r\n\r\nexport const getStoreStatus = (state: RootState) => {\r\n  return state.serverState.status;\r\n};\r\n\r\nexport const getUserInfo = (state: RootState) => {\r\n  return state.userInfo;\r\n}\r\n\r\nexport const getUpdateObject = (state: RootState) => {\r\n  return state.storeState;\r\n};\r\n\r\nexport const getLastFetchFailure = (state: RootState) => {\r\n  return state.serverState.lastFetchFailure;\r\n};\r\n\r\nexport const getLastUpdateFailure = (state: RootState) => {\r\n  return state.serverState.lastUpdateFailure;\r\n};\r\n\r\n// requires knowledge of taskstage's length\r\n// last array is reserved for items that weren't in the taskstage array\r\nexport const getTasksSplitByStageID = (state: RootState, props: IDProps) => {\r\n  const tasklist = getTasklistById(state, props);\r\n  if (tasklist === null) return null;\r\n  return separateTasksByType(tasklist);\r\n};\r\n\r\nexport const separateTasksByType = (tasklist: ITasklist) => {\r\n  const twoDArr = new Array<Array<ITask>>(TaskStage.length + 1);\r\n  for (let i = 0; i < twoDArr.length; i++) {\r\n    twoDArr[i] = [];\r\n  }\r\n  tasklist.stage1.forEach((element) =>\r\n    twoDArr[0].push(tasklist.tasks[element])\r\n  );\r\n  tasklist.stage2.forEach((element) =>\r\n    twoDArr[1].push(tasklist.tasks[element])\r\n  );\r\n  tasklist.stage3.forEach((element) =>\r\n    twoDArr[2].push(tasklist.tasks[element])\r\n  );\r\n  tasklist.stage4.forEach((element) =>\r\n    twoDArr[3].push(tasklist.tasks[element])\r\n  );\r\n  return twoDArr;\r\n};\r\n\r\n// todo after userinfo reducer created\r\n// export const getUserInfo = (state: RootState) => state.userInfo;\r\n","import { throttle } from \"lodash\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport { IParsedUpdate, UpdateType } from \"src/staticData/types\";\r\nimport { updateTasklistAttempt } from \"./actions\";\r\nimport Freezer from \"./freezer\";\r\nimport rootReducer from \"./reducers\";\r\nimport { ID_ADDITION } from \"src/staticData/Constants\";\r\nimport { getTasklistById, getUpdateObject } from \"./selectors\";\r\n\r\nconst configureStore = () => {\r\n  const store = createStore(Freezer(rootReducer), applyMiddleware(thunk));\r\n\r\n  // probably wanna parse for updates\r\n  // and save to server\r\n  store.subscribe(\r\n    throttle(() => {\r\n      /* */\r\n      const state = store.getState();\r\n      const updates = getUpdateObject(state);\r\n      const list = Object.keys(updates);\r\n      if (list.length <= 0) return;\r\n      let i = 0;\r\n      for (; i < list.length; i++) {\r\n        // ensuring we're not getting one of the duplicate changes\r\n        if (updates[list[i]].updating === true) continue;\r\n        else if (list[i][list[i].length - 1] !== ID_ADDITION) break;\r\n      }\r\n      if (i === list.length) {\r\n        return;\r\n      }\r\n      const id = list[i];\r\n      const update = updates[id];\r\n      if (update.types[UpdateType.REMOVE_USER] !== undefined) {\r\n        console.warn(\"need to implement and issue account deletion request\");\r\n        return;\r\n      }\r\n      if (update.types[UpdateType.USER_INFO] !== undefined) {\r\n        console.warn(\"need to implement user information update request\");\r\n        return;\r\n      }\r\n      const tasklist = getTasklistById(state, { id });\r\n      if (tasklist === null) {\r\n        console.error(\r\n          \"update requests for a tasklist that has been deleted should have been removed\"\r\n        );\r\n        return;\r\n      }\r\n      const endObject: IParsedUpdate = { _id: id };\r\n      const types = Object.keys(update.types);\r\n      types.forEach((type) => {\r\n        switch (parseInt(type)) {\r\n          // add the last item in the given tasklist\r\n          case UpdateType.ADD_TASK:\r\n            endObject.tasks = tasklist.tasks;\r\n            endObject.stages = {\r\n              stage1: tasklist.stage1,\r\n              stage2: tasklist.stage2,\r\n              stage3: tasklist.stage3,\r\n              stage4: tasklist.stage4,\r\n            };\r\n            break;\r\n          case UpdateType.SET_TASKS:\r\n            endObject.tasks = tasklist.tasks;\r\n            break;\r\n          case UpdateType.REMOVE_TASKLIST:\r\n            endObject.remove = true;\r\n            break;\r\n          case UpdateType.SET_STAGES:\r\n            endObject.stages = {\r\n              stage1: tasklist.stage1,\r\n              stage2: tasklist.stage2,\r\n              stage3: tasklist.stage3,\r\n              stage4: tasklist.stage4,\r\n            };\r\n            endObject.taskslength = tasklist.tasks.length;\r\n            break;\r\n          case UpdateType.TASKLIST_INFO:\r\n            endObject.name = tasklist.name;\r\n            endObject.description = tasklist.description;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      });\r\n      if (endObject.tasks !== undefined && endObject.tasks.length < 1) endObject.empty = true;\r\n      // this library doesn't really like typescript here\r\n      store.dispatch(updateTasklistAttempt(endObject, store) as any);\r\n    }, 1500)\r\n  );\r\n\r\n  return store;\r\n};\r\n\r\nexport default configureStore;\r\nexport type RootStore = ReturnType<typeof configureStore>;\r\n","import React, { FC, useEffect, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Button,\r\n  Toolbar,\r\n  Typography,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport { useHistory } from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\nimport { v4 as genid } from \"uuid\";\r\nimport logo from \"src/assets/images/logo.png\";\r\nimport { FrontendRoute } from \"src/staticData/Routes\";\r\nimport { getLoggedIn, getUserInfo } from \"src/redux/selectors\";\r\nimport { RootState } from \"src/redux/reducers\";\r\nimport { IUserInfo } from \"src/staticData/types\";\r\n\r\n// main route has .name and .route\r\n// secondary routes is array of objects with same parameters\r\n// .name and .route\r\n\r\ninterface Props {\r\n  mainRoute: FrontendRoute;\r\n  loggedOutRoutes: Array<FrontendRoute>;\r\n  loggedInRoutes: Array<FrontendRoute>;\r\n}\r\n\r\ninterface StoreProps {\r\n  loggedIn: boolean;\r\n  userInfo: IUserInfo;\r\n}\r\n\r\nconst createLoggedInIcon = (\r\n  onClick: (event: React.MouseEvent<HTMLElement>) => void,\r\n  username: string\r\n) => {\r\n  return (\r\n    <div>\r\n      <Typography variant=\"body1\" noWrap>\r\n        Welcome, {\" \" + username + \" \"}\r\n        <Button onClick={onClick} color=\"primary\">\r\n          Logout\r\n        </Button>\r\n      </Typography>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = makeStyles((theme) => ({\r\n  title: { flexGrow: 100, display: \"flex\", justifyContent: \"left\" },\r\n  root: {\r\n    position: \"sticky\",\r\n    paper: {\r\n      backgroundColor: \"#fffff\",\r\n    },\r\n  },\r\n  image: {\r\n    marginTop: \"8px\",\r\n    width: \"16px\",\r\n    height: \"16px\",\r\n    [theme.breakpoints.up(\"sm\")]: { width: \"32px\", height: \"32px\" },\r\n  },\r\n  lowercase: { textTransform: \"none\" },\r\n}));\r\n\r\nconst Navbar: FC<Props & StoreProps> = ({\r\n  mainRoute,\r\n  loggedOutRoutes,\r\n  loggedInRoutes,\r\n  loggedIn,\r\n  userInfo,\r\n}) => {\r\n  // only need one menu anchor element since only one menu will be visible at a time\r\n  const history = useHistory();\r\n  const classes = styles();\r\n  const [scrollUp, setScrollUp] = useState(false);\r\n  const [lastScrollTop, setLastScrollTop] = useState(0);\r\n  const [latestScrollTop, setLatestScrollTop] = useState(0);\r\n  const createButtons = (routes: Array<FrontendRoute>) => {\r\n    const arrItems: Array<JSX.Element> = new Array(routes.length);\r\n    for (let i = 0; i < arrItems.length; i++) {\r\n      arrItems[i] = (\r\n        <Button\r\n          color=\"primary\"\r\n          variant=\"outlined\"\r\n          style={{ marginLeft: \"0.45rem\" }}\r\n          onClick={(_e) => {\r\n            history.push(routes[i].route);\r\n          }}\r\n          key={genid()}\r\n        >\r\n          <Typography variant=\"body1\">{routes[i].name}</Typography>\r\n        </Button>\r\n      );\r\n    }\r\n    return arrItems;\r\n  };\r\n\r\n  const logoutButton = () => history.push(\"logout\");\r\n\r\n  const loggedOutItems = createButtons(loggedOutRoutes);\r\n  const loggedInIcon = createLoggedInIcon(logoutButton, userInfo.username);\r\n\r\n  const scrollEvent = (e: Event) => {\r\n    setLatestScrollTop(window.pageYOffset);\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"scroll\", scrollEvent);\r\n    // return function to be called when unmounted\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", scrollEvent);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (latestScrollTop > lastScrollTop) {\r\n      setScrollUp(true);\r\n      setLastScrollTop(latestScrollTop);\r\n    } else if (latestScrollTop < lastScrollTop) {\r\n      setScrollUp(false);\r\n      setLastScrollTop(latestScrollTop);\r\n    } else if (latestScrollTop === 0) {\r\n      setScrollUp(true);\r\n    }\r\n  }, [lastScrollTop, latestScrollTop]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {(lastScrollTop === 0 || !scrollUp) && (\r\n        <AppBar\r\n          position=\"fixed\"\r\n          color={!scrollUp ? \"inherit\" : \"transparent\"}\r\n          elevation={!scrollUp ? 4 : 0}\r\n        >\r\n          <Toolbar>\r\n            <div className={classes.title}>\r\n              <img\r\n                src={logo}\r\n                className={classes.image}\r\n                alt=\"project manager logo\"\r\n              />\r\n              <Button\r\n                className={classes.lowercase}\r\n                color=\"primary\"\r\n                onClick={() => history.push(mainRoute.route)}\r\n              >\r\n                <Typography variant=\"h5\">\r\n                  {mainRoute.name}\r\n                </Typography>\r\n              </Button>\r\n            </div>\r\n            {loggedIn && loggedInIcon}\r\n            {!loggedIn && loggedOutItems}\r\n          </Toolbar>\r\n        </AppBar>\r\n      )}\r\n      <Toolbar />\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: RootState): StoreProps => {\r\n  // TODO\r\n  // const getPageName = getCurrentPage(state);\r\n  // whenever react-router is pushed to, also want to set the currentpage\r\n  // name in the store for the navbar to render it\r\n  return { loggedIn: getLoggedIn(state), userInfo: getUserInfo(state) };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Navbar);\r\n","export default \"data:image/png;base64,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\"","import React, { FC } from \"react\";\r\nimport { Transition } from \"react-transition-group\";\r\nimport {\r\n  TransitionProps,\r\n  TransitionStatus,\r\n} from \"react-transition-group/Transition\";\r\nimport CSS from \"csstype\";\r\n\r\n// should be a 0-100 value for both\r\ninterface ExpandProps {\r\n  start: number;\r\n  end: number;\r\n  style?: CSS.Properties;\r\n}\r\n\r\nconst Fade: FC<TransitionProps & ExpandProps> = ({\r\n  children,\r\n  start,\r\n  end,\r\n  style,\r\n  ...transitionProps\r\n}) => {\r\n  const defaultStyle: CSS.Properties = {\r\n    transition: `transform ${transitionProps.timeout}ms ease-in-out`,\r\n    transform: `scale(${start}, ${start})`,\r\n  };\r\n\r\n  const transitionStyles: { [key in TransitionStatus]: CSS.Properties } = {\r\n    entering: {\r\n      transform: `scale(${end}, ${end})`,\r\n    },\r\n    entered: {\r\n      transform: `scale(${end}, ${end})`,\r\n    },\r\n    exiting: {\r\n      transform: `scale(${start}, ${start})`,\r\n    },\r\n    exited: {\r\n      transform: `scale(${start}, ${start})`,\r\n    },\r\n    unmounted: {\r\n      transform: `scale(${end}, ${end})`,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <Transition {...transitionProps}>\r\n      {(state: TransitionStatus) => (\r\n        <div\r\n          style={{\r\n            ...style,\r\n            ...defaultStyle,\r\n            ...transitionStyles[state],\r\n          }}\r\n        >\r\n          {children}\r\n        </div>\r\n      )}\r\n    </Transition>\r\n  );\r\n};\r\n\r\nexport default Fade;\r\n","import { Backdrop, CircularProgress, makeStyles } from \"@material-ui/core\";\r\nimport React from \"react\";\r\n\r\ninterface WaitingProps {\r\n  wait: boolean;\r\n}\r\n\r\nconst styles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nconst WaitingOverlay: React.FC<WaitingProps> = ({ wait }) => {\r\n  const classes = styles();\r\n  return (\r\n    <Backdrop className={classes.backdrop} open={wait}>\r\n      <CircularProgress color=\"inherit\" />\r\n    </Backdrop>\r\n  );\r\n};\r\n\r\nexport default WaitingOverlay;\r\n","import React, { useState, FC, useEffect } from \"react\";\r\nimport {\r\n  Card,\r\n  TextField,\r\n  CardContent,\r\n  makeStyles,\r\n  Button,\r\n  InputAdornment,\r\n  IconButton,\r\n  Collapse,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { Input, Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport { hashPassword, TRequestFail, TStatus } from \"../staticData/Constants\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  getLastFetchFailure,\r\n  getLoggedIn,\r\n  getStoreStatus,\r\n} from \"src/redux/selectors\";\r\nimport { RootState } from \"src/redux/reducers\";\r\nimport { loginAttempt } from \"src/redux/actions\";\r\nimport {\r\n  FetchFailedAction,\r\n  LoginCompleteAction,\r\n  TUserCredentials,\r\n} from \"src/staticData/types\";\r\n\r\nexport interface StoreProps {\r\n  loggedIn: boolean;\r\n  status: TStatus;\r\n  failReason: TRequestFail;\r\n  tryLogin: (\r\n    creds: TUserCredentials\r\n  ) => Promise<LoginCompleteAction | FetchFailedAction>;\r\n}\r\n\r\nexport const styles = makeStyles((theme) => ({\r\n  card: {\r\n    maxWidth: \"800px\",\r\n    minWidth: \"300px\",\r\n    margin: \"30px\",\r\n    marginTop: \"10vh\",\r\n    minHeight: \"320px\",\r\n    display: \"flex\",\r\n    [theme.breakpoints.down(\"xs\")]: { marginTop: \"10px\" },\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n  },\r\n  cardContent: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-between\",\r\n    flex: 3,\r\n  },\r\n  inputs: {\r\n    flex: 1,\r\n  },\r\n  cardActions: {\r\n    flex: 1,\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"start\",\r\n    alignItems: \"center\",\r\n  },\r\n  alert: {\r\n    position: \"absolute\",\r\n    top: \"62px\",\r\n  },\r\n}));\r\n\r\nconst Login: FC<StoreProps> = ({ loggedIn, tryLogin, status, failReason }) => {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [alertActive, setAlertActive] = useState(false);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const classes = styles();\r\n  const history = useHistory();\r\n\r\n  const alertLoginFail = () => {\r\n    return (\r\n      <Collapse in={alertActive} className={classes.alert}>\r\n        <Alert variant=\"filled\" severity=\"error\">\r\n          Login unsuccessful!\r\n        </Alert>\r\n      </Collapse>\r\n    );\r\n  };\r\n\r\n  const alert = alertLoginFail();\r\n\r\n  useEffect(() => {\r\n    if (loggedIn) {\r\n      history.push(\"/\");\r\n    }\r\n  }, [loggedIn, history]);\r\n\r\n  useEffect(() => {\r\n    if (alertActive) {\r\n      let timer = setTimeout(() => {\r\n        if (alertActive) {\r\n          setAlertActive(false);\r\n        }\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n    return;\r\n  }, [alertActive]);\r\n\r\n  useEffect(() => {\r\n    if (status !== \"FETCH_NEEDED\") return;\r\n    switch (failReason) {\r\n      case \"login\":\r\n        setAlertActive(true);\r\n        return;\r\n      default:\r\n        return;\r\n    }\r\n  }, [status, failReason]);\r\n\r\n  const updatePassword = (e: string) => {\r\n    setPassword(e);\r\n  };\r\n\r\n  const updateUsername = (e: string) => {\r\n    setUsername(e);\r\n  };\r\n\r\n  const onSubmit = (submission: React.FormEvent) => {\r\n    submission.preventDefault();\r\n    if (status === \"FETCHING\" || status === \"UPDATING\") return;\r\n    let userAuth;\r\n    if (username.search(\"@\") !== -1) {\r\n      userAuth = { password: hashPassword(password), email: username };\r\n    } else {\r\n      userAuth = { password: hashPassword(password), username };\r\n    }\r\n    tryLogin(userAuth);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {alert}\r\n      <Card className={classes.card}>\r\n        <form\r\n          onSubmit={onSubmit}\r\n          autoComplete=\"on\"\r\n          className={classes.cardContent}\r\n        >\r\n          <CardContent className={classes.cardContent}>\r\n            <Typography variant=\"h3\" className={classes.inputs}>\r\n              Login\r\n            </Typography>\r\n            <p />\r\n            <TextField\r\n              className={classes.inputs}\r\n              required\r\n              autoFocus\r\n              id=\"username\"\r\n              label=\"Username / Email\"\r\n              variant=\"outlined\"\r\n              autoComplete=\"username\"\r\n              value={username}\r\n              onChange={(e) => updateUsername(e.target.value)}\r\n            />\r\n            <p />\r\n            <TextField\r\n              className={classes.inputs}\r\n              required\r\n              id=\"password\"\r\n              type={showPassword ? \"text\" : \"password\"}\r\n              label=\"Password\"\r\n              autoComplete=\"current-password\"\r\n              variant=\"outlined\"\r\n              value={password}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"toggle password visibility\"\r\n                      onClick={(_e) => setShowPassword(!showPassword)}\r\n                      onMouseDown={(e: React.MouseEvent<HTMLButtonElement>) =>\r\n                        e.preventDefault()\r\n                      }\r\n                    >\r\n                      {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n              onChange={(e) => updatePassword(e.target.value)}\r\n            />\r\n          </CardContent>\r\n          <CardContent className={classes.cardActions}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              value=\"Login\"\r\n              fullWidth\r\n              endIcon={<Input />}\r\n              type=\"submit\"\r\n            >\r\n              <Typography variant=\"h5\">Login</Typography>\r\n            </Button>\r\n          </CardContent>\r\n        </form>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  const loggedIn = getLoggedIn(state);\r\n  const status = getStoreStatus(state);\r\n  const failReason = getLastFetchFailure(state);\r\n  // TODO\r\n  // const getPageName = getCurrentPage(state);\r\n  // whenever react-router is pushed to, also want to set the currentpage\r\n  // name in the store for the navbar to render it\r\n  return { loggedIn, status, failReason };\r\n};\r\n\r\nconst mapActionsToProps = {\r\n  tryLogin: loginAttempt,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionsToProps)(Login);\r\n","import {\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  Collapse,\r\n  Grow,\r\n  makeStyles,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { Close, InputOutlined } from \"@material-ui/icons\";\r\nimport React, { FC, useEffect, useRef, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { RootState } from \"src/redux/reducers\";\r\nimport { getStoreStatus } from \"src/redux/selectors\";\r\nimport {\r\n  ITasklistCreate,\r\n  UpdateFailedAction,\r\n  // create this action\r\n  TasklistCreatedAction,\r\n} from \"src/staticData/types\";\r\n// create this thunk action\r\nimport { addTasklistAttempt } from \"src/redux/actions\";\r\nimport { styles as loginStyles } from \"../Login\";\r\nimport { TStatus } from \"src/staticData/Constants\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport WaitingOverlay from \"../helpers/WaitingOverlay\";\r\n\r\ninterface StoreProps {\r\n  storeState: TStatus;\r\n  createATasklist: (\r\n    tasklist: ITasklistCreate\r\n  ) => Promise<TasklistCreatedAction | UpdateFailedAction>;\r\n  onCancel: () => void;\r\n  onExit: () => void;\r\n  onComplete: () => void;\r\n  open: boolean;\r\n}\r\n\r\nconst styles = makeStyles((theme) => ({\r\n  card: {\r\n    width: \"90%\",\r\n    marginLeft: \"5%\",\r\n    marginRight: \"5%\",\r\n  },\r\n  cardActions: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  leftButton: {\r\n    marginRight: \"20px\",\r\n  },\r\n}));\r\n\r\nconst CreateTasklist: FC<StoreProps> = ({\r\n  storeState,\r\n  createATasklist,\r\n  onCancel,\r\n  onComplete,\r\n  open,\r\n  onExit,\r\n}) => {\r\n  const nameRef = useRef({ value: \"\" });\r\n  const [sentRequest, setSentRequest] = useState(false);\r\n  const [alertMessage, setAlertMessage] = useState(\"\");\r\n  const [alertActive, setAlertActive] = useState(false);\r\n  const history = useHistory();\r\n  const descriptionRef = useRef({ value: \"\" });\r\n  const classes = styles();\r\n  const borrowedStyles = loginStyles();\r\n\r\n  const alertLoginFail = () => {\r\n    return (\r\n      <Collapse in={alertActive} className={borrowedStyles.alert}>\r\n        <Alert variant=\"filled\" severity=\"error\">\r\n          {alertMessage}\r\n        </Alert>\r\n      </Collapse>\r\n    );\r\n  };\r\n\r\n  const alert = alertLoginFail();\r\n\r\n  useEffect(() => {\r\n    if (alertActive) {\r\n      let errmsg = alertMessage;\r\n      let timer = setTimeout(() => {\r\n        if (errmsg === alertMessage) setAlertActive(false);\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n    return;\r\n  }, [alertActive, alertMessage]);\r\n\r\n  useEffect(() => {\r\n    if (sentRequest && storeState === \"SYNCED\") {\r\n      setSentRequest(false);\r\n      onComplete();\r\n    }\r\n    if (sentRequest && storeState === \"UPDATE_NEEDED\") {\r\n      setSentRequest(false);\r\n      setAlertMessage(\"tasklist create failed, server may be busy or down\");\r\n      setAlertActive(true);\r\n    }\r\n  }, [sentRequest, storeState, history, onComplete]);\r\n\r\n  const onSubmit = (submission: React.FormEvent) => {\r\n    submission.preventDefault();\r\n    if (sentRequest || storeState === \"UPDATING\") return;\r\n    const tasklist: ITasklistCreate = {\r\n      name: nameRef.current.value,\r\n      description: descriptionRef.current.value,\r\n      stages: { stage1: [], stage2: [], stage3: [], stage4: [] },\r\n      tasks: [],\r\n    };\r\n    setSentRequest(true);\r\n    createATasklist(tasklist);\r\n  };\r\n\r\n  const cancel = () => {\r\n    onCancel();\r\n  };\r\n\r\n  return (\r\n    <Grow in={open} unmountOnExit={true} onExited={onExit}>\r\n      <div className={borrowedStyles.root}>\r\n        <WaitingOverlay wait={sentRequest} />\r\n        {alert}\r\n        <Card className={classes.card}>\r\n          <CardHeader title=\"Create a tasklist!\" />\r\n          <form\r\n            onSubmit={onSubmit}\r\n            autoComplete=\"off\"\r\n            className={borrowedStyles.cardContent}\r\n          >\r\n            <CardContent className={borrowedStyles.cardContent}>\r\n              <TextField\r\n                className={borrowedStyles.inputs}\r\n                required\r\n                autoFocus\r\n                id=\"name\"\r\n                label=\"Name\"\r\n                variant=\"outlined\"\r\n                inputRef={nameRef}\r\n              />\r\n              <p />\r\n              <TextField\r\n                className={borrowedStyles.inputs}\r\n                id=\"description\"\r\n                label=\"Description\"\r\n                variant=\"outlined\"\r\n                inputRef={descriptionRef}\r\n              />\r\n            </CardContent>\r\n            <CardContent className={classes.cardActions}>\r\n              <Button\r\n                className={classes.leftButton}\r\n                variant=\"outlined\"\r\n                color=\"secondary\"\r\n                value=\"Cancel\"\r\n                endIcon={<Close />}\r\n                onClick={cancel}\r\n              >\r\n                cancel\r\n              </Button>\r\n              <Button\r\n                variant=\"outlined\"\r\n                color=\"primary\"\r\n                value=\"Create Task\"\r\n                type=\"submit\"\r\n                endIcon={<InputOutlined />}\r\n              >\r\n                Create Tasklist\r\n              </Button>\r\n            </CardContent>\r\n          </form>\r\n        </Card>\r\n      </div>\r\n    </Grow>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  return { storeState: getStoreStatus(state) };\r\n};\r\n\r\nconst mapActionsToProps = {\r\n  createATasklist: addTasklistAttempt,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionsToProps)(CreateTasklist);\r\n","import {\r\n  Card,\r\n  CardContent,\r\n  makeStyles,\r\n  Typography,\r\n  Grid,\r\n  Button,\r\n  CardHeader,\r\n  IconButton,\r\n  Toolbar,\r\n  Grow,\r\n} from \"@material-ui/core\";\r\n\r\nimport { AddCircle, OpenInNew } from \"@material-ui/icons\";\r\nimport React, { FC, useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { RootState } from \"src/redux/reducers\";\r\nimport { getLoggedIn, getStoreStatus, getTasklists } from \"src/redux/selectors\";\r\nimport { nonNavbarRoutes } from \"src/staticData/Routes\";\r\nimport { ITasklist, TTasklists } from \"src/staticData/types\";\r\nimport { v4 as genid } from \"uuid\";\r\nimport Expand from \"./animations/Expand\";\r\nimport WaitingOverlay from \"./helpers/WaitingOverlay\";\r\nimport CreateTasklist from \"./Tasklist/CreateTasklist\";\r\n\r\ninterface StoreProps {\r\n  tasklists: TTasklists;\r\n  loggedIn: boolean;\r\n  storeState: string;\r\n}\r\n\r\nconst style = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    paddingLeft: \"25px\",\r\n    paddingRight: \"25px\",\r\n    marginTop: \"40px\",\r\n  },\r\n  outer: {\r\n    margin: \"15px\",\r\n  },\r\n  toolbar: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    width: \"325px\",\r\n    [theme.breakpoints.down(\"xs\")]: { width: \"250px\"}\r\n  },\r\n  create: {\r\n    backgroundColor: \"#eee\",\r\n    color: theme.palette.success.dark,\r\n  },\r\n  addButton: {\r\n    fontSize: 70,\r\n    backgroundColor: \"transparent\",\r\n    color: theme.palette.success.dark,\r\n  },\r\n  createText: {\r\n    backgroundColor: \"transparent\",\r\n    color: theme.palette.success.dark,\r\n  },\r\n}));\r\n\r\ntype styletype = ReturnType<typeof style>;\r\n\r\ninterface CreateProps {\r\n  classes: styletype;\r\n  callback: Function;\r\n  open: boolean;\r\n  onExit: () => void;\r\n}\r\n\r\nconst CreateTasklistCard: FC<CreateProps> = ({\r\n  classes,\r\n  callback,\r\n  open,\r\n  onExit,\r\n}) => {\r\n  const [hover, setHover] = useState(false);\r\n  const exitWrapper = () => {\r\n    setHover(false);\r\n    onExit();\r\n  };\r\n  return (\r\n    <Grow in={open} onExited={exitWrapper} unmountOnExit={true}>\r\n      <Expand in={hover} timeout={150} start={0.9} end={1.05}>\r\n        <Grid item key={genid()} className={classes.card}>\r\n          <Card\r\n            className={classes.create}\r\n            onMouseOver={() => setHover(true)}\r\n            onMouseLeave={() => setHover(false)}\r\n            elevation={hover ? 12 : 2}\r\n          >\r\n            <Button fullWidth onClick={() => callback()}>\r\n              <CardContent>\r\n                <Typography variant=\"h5\" className={classes.create}>\r\n                  Create a new tasklist\r\n                </Typography>\r\n                <br />\r\n                <br />\r\n                <AddCircle className={classes.addButton} />\r\n              </CardContent>\r\n            </Button>\r\n          </Card>\r\n        </Grid>\r\n      </Expand>\r\n    </Grow>\r\n  );\r\n};\r\n\r\ninterface TasklistStubProps {\r\n  classes: styletype;\r\n  tasklist: ITasklist;\r\n  callback: Function;\r\n}\r\n\r\nconst TasklistStub: FC<TasklistStubProps> = ({\r\n  classes,\r\n  tasklist,\r\n  callback,\r\n}) => {\r\n  const [hover, setHover] = useState(false);\r\n  const [date, setDate] = useState(\"\");\r\n  const [taskStages, setTaskStages] = useState<Array<number>>([]);\r\n  useEffect(() => {\r\n    setDate(new Date(tasklist.createdAt).toLocaleDateString());\r\n    setTaskStages([\r\n      tasklist.stage1.length,\r\n      tasklist.stage2.length,\r\n      tasklist.stage3.length,\r\n      tasklist.stage4.length,\r\n    ]);\r\n  }, [\r\n    tasklist.createdAt,\r\n    tasklist.stage1.length,\r\n    tasklist.stage2.length,\r\n    tasklist.stage3.length,\r\n    tasklist.stage4.length,\r\n  ]);\r\n  return (\r\n    <Expand in={hover} timeout={150} start={0.9} end={1.05}>\r\n      <Grid item className={classes.card}>\r\n        <Card\r\n          variant=\"outlined\"\r\n          onMouseOver={() => setHover(true)}\r\n          onMouseLeave={() => setHover(false)}\r\n        >\r\n          <CardHeader\r\n            title={tasklist.name}\r\n            subheader={`created: ${date}`}\r\n          ></CardHeader>\r\n          <CardContent>\r\n            <Typography noWrap color=\"textSecondary\" variant=\"subtitle1\">\r\n              {tasklist.description}\r\n            </Typography>\r\n            <br />\r\n            <Typography variant=\"h6\">Tasks</Typography>\r\n            <Toolbar disableGutters className={classes.toolbar}>\r\n              <Typography\r\n                variant=\"body2\"\r\n                color=\"textSecondary\"\r\n                className={classes.toolbar}\r\n              >\r\n                Active: {taskStages[0] + taskStages[1]}\r\n                <br />\r\n                Completed: {taskStages[2]}\r\n              </Typography>\r\n              <IconButton\r\n                color=\"primary\"\r\n                onClick={() => callback(tasklist._id, false)}\r\n              >\r\n                <OpenInNew fontSize=\"large\" />\r\n              </IconButton>\r\n            </Toolbar>\r\n          </CardContent>\r\n        </Card>\r\n      </Grid>\r\n    </Expand>\r\n  );\r\n};\r\n\r\nconst displayTasklists = (\r\n  tasklists: TTasklists,\r\n  classes: styletype,\r\n  callback: Function\r\n): Array<JSX.Element> => {\r\n  const tasklistArr = new Array<JSX.Element>(tasklists.length);\r\n  const tasklistsecondary = [...tasklists];\r\n  tasklistsecondary.sort((a, b) => b.updatedAt.getTime() - a.updatedAt.getTime());\r\n\r\n  for (let i = 0; i < tasklistArr.length; i++) {\r\n    tasklistArr[i] = (\r\n      <TasklistStub\r\n        key={tasklistsecondary[i]._id}\r\n        tasklist={tasklistsecondary[i]}\r\n        classes={classes}\r\n        callback={callback}\r\n      />\r\n    );\r\n  }\r\n  return tasklistArr;\r\n};\r\n\r\nconst Homepage: FC<StoreProps> = ({ tasklists, loggedIn, storeState }) => {\r\n  const classes = style();\r\n  const history = useHistory();\r\n  const [create, setCreate] = useState(true);\r\n  const [createForm, setCreateForm] = useState(false);\r\n  const createTasklist = () => {\r\n    setCreate(false);\r\n  };\r\n\r\n  const onCreateClose = () => {\r\n    setCreateForm(true);\r\n  };\r\n\r\n  const openTasklist = (id: string, edit: boolean) => {\r\n    history.push(nonNavbarRoutes[0].route, { id, edit });\r\n  };\r\n\r\n  const onCancelCreate = () => {\r\n    setCreateForm(false);\r\n  };\r\n\r\n  const onCreateTasklistExit = () => {\r\n    setCreate(true);\r\n  };\r\n\r\n  const onCreateTasklistComplete = () => {\r\n    setCreateForm(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!loggedIn) {\r\n      if (storeState === \"FETCH_NEEDED\") {\r\n        history.push(\"/join\");\r\n      } else if (storeState === \"SYNCED\") {\r\n        history.push(\"/login\");\r\n      }\r\n    }\r\n  }, [history, storeState, loggedIn]);\r\n\r\n  const displayable = displayTasklists(tasklists, classes, openTasklist);\r\n  return (\r\n    <div className={classes.outer}>\r\n      <WaitingOverlay wait={!loggedIn} />\r\n      {loggedIn && (\r\n        <React.Fragment>\r\n          <Typography variant=\"h3\">Tasklists</Typography>\r\n          <hr />\r\n          <Grid className={classes.root} container spacing={2}>\r\n            <CreateTasklistCard\r\n              classes={classes}\r\n              callback={createTasklist}\r\n              onExit={onCreateClose}\r\n              open={create}\r\n            />\r\n            <CreateTasklist\r\n              onCancel={onCancelCreate}\r\n              onExit={onCreateTasklistExit}\r\n              onComplete={onCreateTasklistComplete}\r\n              open={createForm}\r\n            />\r\n            {displayable}\r\n          </Grid>\r\n        </React.Fragment>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  // BAD\r\n  // const tasklists = state.tasklistHolder.tasklists;\r\n  // GOOD cuz using a selector\r\n  return {\r\n    loggedIn: getLoggedIn(state),\r\n    tasklists: getTasklists(state),\r\n    storeState: getStoreStatus(state),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Homepage);\r\n","import React, { useState, useEffect, FC } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {\r\n  Card,\r\n  TextField,\r\n  CardContent,\r\n  Button,\r\n  InputAdornment,\r\n  IconButton,\r\n  Collapse,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport {\r\n  Input as InputIcon,\r\n  Visibility,\r\n  VisibilityOff,\r\n} from \"@material-ui/icons\";\r\n\r\nimport {\r\n  EMAIL_REGEX,\r\n  hashPassword,\r\n  MAX_CHAR,\r\n  MIN_CHAR,\r\n  MIN_NO_RESTRICTIONS,\r\n  PASSWORD_REQ,\r\n  TRequestFail,\r\n  TStatus,\r\n  USER_REGEX,\r\n} from \"../staticData/Constants\";\r\nimport { styles } from \"./Login\";\r\nimport {\r\n  FetchFailedAction,\r\n  LoginCompleteAction,\r\n  IUserRegister,\r\n} from \"src/staticData/types\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  getLastFetchFailure,\r\n  getLoggedIn,\r\n  getStoreStatus,\r\n} from \"src/redux/selectors\";\r\nimport { signUpAttempt } from \"src/redux/actions\";\r\nimport { RootState } from \"src/redux/reducers\";\r\n\r\n// general summary of logic: just add user when they\r\n\r\ninterface StoreProps {\r\n  loggedIn: boolean;\r\n  status: TStatus;\r\n  failReason: TRequestFail;\r\n  signUp: (\r\n    user: IUserRegister\r\n  ) => Promise<FetchFailedAction | LoginCompleteAction>;\r\n}\r\n\r\nconst Register: FC<StoreProps> = ({ loggedIn, status, failReason, signUp }) => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showPasswordDuplicate, setShowPasswordDuplicate] = useState(false);\r\n  const [passwordDuplicate, setPasswordDuplicate] = useState(\"\");\r\n  // set to true for now, then as user writes in form it gets updated to not okay\r\n  // as needed\r\n  const [passwordMatches, setPasswordMatches] = useState(true);\r\n  const [passwordOkay, setPasswordOkay] = useState(true);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [emailOkay, setEmailOkay] = useState(true);\r\n  const [usernameOkay, setUsernameOkay] = useState(true);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [alertActive, setAlertActive] = useState(false);\r\n  const history = useHistory();\r\n  const classes = styles();\r\n\r\n  const alertLoginFail = () => {\r\n    return (\r\n      <Collapse in={alertActive} className={classes.alert}>\r\n        <Alert variant=\"filled\" severity=\"error\">\r\n          {errorMessage}\r\n        </Alert>\r\n      </Collapse>\r\n    );\r\n  };\r\n\r\n  const alert = alertLoginFail();\r\n\r\n  useEffect(() => {\r\n    if (alertActive) {\r\n      let errmsg = errorMessage;\r\n      let timer = setTimeout(() => {\r\n        if (errmsg === errorMessage) setAlertActive(false);\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n    return;\r\n  }, [alertActive, errorMessage]);\r\n\r\n  useEffect(() => {\r\n    if (loggedIn) {\r\n      history.push(\"/\");\r\n    }\r\n  }, [loggedIn, history, status]);\r\n\r\n  useEffect(() => {\r\n    if (status !== \"FETCH_NEEDED\") return;\r\n    switch (failReason) {\r\n      case \"email_and_username_match\":\r\n        setErrorMessage(\"Email and username already taken\");\r\n        setUsername(\"\");\r\n        setEmail(\"\");\r\n        setAlertActive(true);\r\n        return;\r\n      case \"email_match\":\r\n        setErrorMessage(\"Email already taken\");\r\n        setEmail(\"\");\r\n        setAlertActive(true);\r\n        return;\r\n      case \"username_match\":\r\n        setErrorMessage(\"Username already taken\");\r\n        setUsername(\"\");\r\n        setAlertActive(true);\r\n        return;\r\n      case \"lookup\":\r\n        setErrorMessage(\"User information error, try refreshing the page\");\r\n        setAlertActive(true);\r\n        return;\r\n      case \"unknown\":\r\n        setErrorMessage(\"Server did not respond, please try again later\");\r\n        setAlertActive(true);\r\n        return;\r\n      default:\r\n        return;\r\n    }\r\n  }, [failReason, status]);\r\n\r\n  const checkMatches = (p: string, p2: string) => {\r\n    setPasswordMatches(p === p2);\r\n  };\r\n\r\n  const validatePassword = (password: string, duplicate: string) => {\r\n    checkMatches(password, duplicate);\r\n    setPasswordOkay(\r\n      password.length <= MAX_CHAR &&\r\n        (password.length >= MIN_NO_RESTRICTIONS || PASSWORD_REQ.test(password))\r\n    );\r\n  };\r\n\r\n  const updatePasswordDuplicate = (e: string) => {\r\n    setPasswordDuplicate(e);\r\n    checkMatches(password, e);\r\n  };\r\n\r\n  const updatePassword = (e: string) => {\r\n    setPassword(e);\r\n    validatePassword(e, passwordDuplicate);\r\n  };\r\n\r\n  const updateEmail = (e: string) => {\r\n    setEmail(e);\r\n    setEmailOkay(EMAIL_REGEX.test(e));\r\n  };\r\n\r\n  const updateUsername = (e: string) => {\r\n    if (e === \"\" || USER_REGEX.test(e)) setUsername(e);\r\n    setUsernameOkay(e.length > 2);\r\n  };\r\n\r\n  const CheckSubmittable = () => {\r\n    let earlyReturn = false;\r\n    if (!emailOkay) {\r\n      setErrorMessage(\"Emails must have an '@' and a '.'\");\r\n      earlyReturn = true;\r\n    }\r\n    if (password !== passwordDuplicate) {\r\n      setErrorMessage(\"Passwords don't match\");\r\n      earlyReturn = true;\r\n    }\r\n    if (!usernameOkay) {\r\n      setErrorMessage(\"Username must be 2+ characters\");\r\n      earlyReturn = true;\r\n    }\r\n    return earlyReturn;\r\n  };\r\n\r\n  const onSubmit = (submission: React.FormEvent) => {\r\n    submission.preventDefault();\r\n    if (status === \"UPDATING\" || status === \"FETCHING\") return;\r\n    if (CheckSubmittable()) {\r\n      setAlertActive(true);\r\n      return;\r\n    }\r\n    const user: IUserRegister = {\r\n      username: username,\r\n      email: email,\r\n      password: hashPassword(password),\r\n    };\r\n    signUp(user);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {alert}\r\n      <Card className={classes.card}>\r\n        <form\r\n          onSubmit={onSubmit}\r\n          autoComplete=\"on\"\r\n          className={classes.cardContent}\r\n        >\r\n          <CardContent className={classes.cardContent}>\r\n            <Typography variant=\"h3\" className={classes.inputs}>\r\n              Sign Up\r\n            </Typography>\r\n            <p />\r\n            <TextField\r\n              className={classes.inputs}\r\n              autoFocus\r\n              required\r\n              error={!usernameOkay}\r\n              helperText={usernameOkay ? \"\" : \"min. 3 characters\"}\r\n              id=\"username\"\r\n              label=\"Username\"\r\n              variant=\"outlined\"\r\n              autoComplete=\"username\"\r\n              value={username}\r\n              onChange={(e) => updateUsername(e.target.value)}\r\n            />\r\n            <p />\r\n            <TextField\r\n              className={classes.inputs}\r\n              required\r\n              error={!emailOkay}\r\n              helperText={emailOkay ? \"\" : \"must have '@' and '.'\"}\r\n              id=\"email\"\r\n              label=\"Email\"\r\n              variant=\"outlined\"\r\n              autoComplete=\"email\"\r\n              value={email}\r\n              onChange={(e) => updateEmail(e.target.value)}\r\n            />\r\n            <p />\r\n            <TextField\r\n              className={classes.inputs}\r\n              required\r\n              error={!passwordOkay}\r\n              helperText={\r\n                !passwordOkay ? \"must meet requirements stated below\" : \"\"\r\n              }\r\n              id=\"password\"\r\n              type={showPassword ? \"text\" : \"password\"}\r\n              label=\"Password\"\r\n              autoComplete=\"current-password\"\r\n              variant=\"outlined\"\r\n              value={password}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"toggle password visibility\"\r\n                      onClick={(_e) => setShowPassword(!showPassword)}\r\n                      onMouseDown={(e: React.MouseEvent<HTMLButtonElement>) =>\r\n                        e.preventDefault()\r\n                      }\r\n                    >\r\n                      {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n              onChange={(e) => updatePassword(e.target.value)}\r\n            />\r\n            <p />\r\n            <TextField\r\n              className={classes.inputs}\r\n              required\r\n              error={!passwordMatches && password !== \"\"}\r\n              helperText={\r\n                !passwordMatches && password !== \"\"\r\n                  ? \"passwords must match\"\r\n                  : \"\"\r\n              }\r\n              id=\"password-duplicate\"\r\n              type={showPasswordDuplicate ? \"text\" : \"password\"}\r\n              label=\"Confirm Password\"\r\n              autoComplete=\"current-password\"\r\n              variant=\"outlined\"\r\n              value={passwordDuplicate}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"toggle password visibility\"\r\n                      onClick={(_e) =>\r\n                        setShowPasswordDuplicate(!showPasswordDuplicate)\r\n                      }\r\n                      onMouseDown={(e: React.MouseEvent<HTMLButtonElement>) =>\r\n                        e.preventDefault()\r\n                      }\r\n                    >\r\n                      {showPasswordDuplicate ? (\r\n                        <Visibility />\r\n                      ) : (\r\n                        <VisibilityOff />\r\n                      )}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n              onChange={(e) => updatePasswordDuplicate(e.target.value)}\r\n            />\r\n            <br />\r\n            <Typography variant=\"subtitle1\">\r\n              Passwords must have lower and uppercase letters and numbers OR be{\" \"}\r\n              {MIN_NO_RESTRICTIONS}+ characters long\r\n              <br />\r\n              Passwords may also use special characters: !@#$%^*()_-\r\n              <br />\r\n            </Typography>\r\n\r\n            <Typography variant=\"subtitle1\">\r\n              Passwords must be {MIN_CHAR}-{MAX_CHAR} characters long\r\n              <br />\r\n            </Typography>\r\n          </CardContent>\r\n          <CardContent className={classes.cardActions}>\r\n            <Button\r\n              color=\"primary\"\r\n              variant=\"outlined\"\r\n              value=\"Sign Up\"\r\n              type=\"submit\"\r\n              fullWidth\r\n              endIcon={<InputIcon />}\r\n            >\r\n              <Typography variant=\"h5\" >Sign Up</Typography>\r\n            </Button>\r\n          </CardContent>\r\n        </form>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  const loggedIn = getLoggedIn(state);\r\n  const status = getStoreStatus(state);\r\n  const failReason = getLastFetchFailure(state);\r\n  // TODO\r\n  // const getPageName = getCurrentPage(state);\r\n  // whenever react-router is pushed to, also want to set the currentpage\r\n  // name in the store for the navbar to render it\r\n  return { loggedIn, status, failReason };\r\n};\r\n\r\nconst mapActionsToProps = {\r\n  signUp: signUpAttempt,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionsToProps)(Register);\r\n","import React, { FC, useEffect } from \"react\";\r\nimport {\r\n  DialogTitle,\r\n  Dialog,\r\n  DialogActions,\r\n  Button,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { getLastUpdateFailure, getLoggedIn, getStoreStatus } from \"src/redux/selectors\";\r\nimport { RootState } from \"src/redux/reducers\";\r\nimport { logoutAttempt } from \"src/redux/actions\";\r\nimport { LogoutCompleteAction, UpdateFailedAction } from \"src/staticData/types\";\r\n\r\ninterface StoreProps {\r\n  loggedIn: boolean;\r\n  tryLogout: () => Promise<UpdateFailedAction | LogoutCompleteAction>;\r\n}\r\n\r\nconst styles = makeStyles({\r\n  dialog: {\r\n    position: \"absolute\",\r\n    top: \"80px\",\r\n  },\r\n});\r\n\r\n//todo convert to modal pop up --> asks if you're sure you want to log out?\r\nconst Logout: FC<StoreProps> = ({ loggedIn, tryLogout }) => {\r\n  const history = useHistory();\r\n  const classes = styles();\r\n  useEffect(() => {\r\n    const logoutRequest = (loggedIn: boolean) => {\r\n      if (!loggedIn) {\r\n        // just redirect\r\n        history.push(\"/\");\r\n      }\r\n    };\r\n    logoutRequest(loggedIn);\r\n  }, [loggedIn, history]);\r\n\r\n  const handleClose = (logoutRequested: boolean) => {\r\n    // axios to log out\r\n    if (logoutRequested) {\r\n      tryLogout();\r\n    } else {\r\n      history.goBack();\r\n      history.push(\"/\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      classes={{\r\n        paper: classes.dialog,\r\n      }}\r\n      open\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n      onClose={() => handleClose(false)}\r\n      aria-labelledby=\"logout-request-title\"\r\n      aria-describedby=\"logout-request\"\r\n    >\r\n      <DialogTitle id=\"logout-request-title\">\r\n        {\"Are you sure you want to log out?\"}\r\n      </DialogTitle>\r\n      <DialogActions>\r\n        <Button color=\"primary\" onClick={() => handleClose(false)}>\r\n          No\r\n        </Button>\r\n        <Button color=\"primary\" onClick={() => handleClose(true)} autoFocus>\r\n          Yes\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  const loggedIn = getLoggedIn(state);\r\n  const status = getStoreStatus(state);\r\n  const failReason = getLastUpdateFailure(state);\r\n  return { loggedIn, status, failReason };\r\n};\r\n\r\nconst mapActionsToProps = {\r\n  tryLogout: logoutAttempt,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionsToProps)(Logout);\r\n","import React, { FC } from \"react\";\r\nimport { Menu } from \"@material-ui/core\";\r\n\r\n// expects direct passing of the children array\r\n// e.g. <PopupMenu {...props} children={array} />\r\ninterface PopupMenuProps {\r\n  menuID: string;\r\n  children: JSX.Element[];\r\n  open: boolean;\r\n  anchor: HTMLElement | null;\r\n  onClose: (event: {}, reason: \"backdropClick\" | \"escapeKeyDown\") => void;\r\n}\r\n\r\nconst PopupMenu: FC<PopupMenuProps> = ({\r\n  menuID,\r\n  open,\r\n  anchor,\r\n  onClose,\r\n  children,\r\n}) => {\r\n  return (\r\n    <Menu\r\n      id={menuID}\r\n      open={open}\r\n      anchorEl={anchor}\r\n      anchorOrigin={{\r\n        vertical: \"top\",\r\n        horizontal: \"right\",\r\n      }}\r\n      keepMounted\r\n      transformOrigin={{\r\n        vertical: \"top\",\r\n        horizontal: \"right\",\r\n      }}\r\n      onClose={onClose}\r\n    >\r\n      {children}\r\n    </Menu>\r\n  );\r\n};\r\n\r\nexport default PopupMenu;\r\n","import {\r\n  CardContent,\r\n  Card,\r\n  Button,\r\n  CardProps,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport React, { useRef } from \"react\";\r\nimport { ITask } from \"src/staticData/types\";\r\n\r\ninterface ModifyProps {\r\n  task: ITask;\r\n  onComplete: (task: ITask) => void;\r\n}\r\n\r\nconst ModifyTask: React.FC<ModifyProps & CardProps> = ({\r\n  task,\r\n  onComplete,\r\n  ...props\r\n}) => {\r\n  const nameRef = useRef({ value: \"\" });\r\n  const descriptionRef = useRef({ value: \"\" });\r\n\r\n  const onSubmit = (submission: React.FormEvent) => {\r\n    submission.preventDefault();\r\n    const newTask = { ...task };\r\n    newTask.name = nameRef.current.value;\r\n    newTask.description = descriptionRef.current.value;\r\n    onComplete(newTask);\r\n  };\r\n\r\n  return (\r\n    <Card className={props.className}>\r\n      <CardContent>\r\n        <form onSubmit={onSubmit} autoComplete=\"off\">\r\n          <TextField\r\n            required\r\n            autoFocus\r\n            fullWidth\r\n            label=\"Name\"\r\n            variant=\"outlined\"\r\n            defaultValue={task.name}\r\n            inputRef={nameRef}\r\n          />\r\n          <p />\r\n          <TextField\r\n            fullWidth\r\n            label=\"Description\"\r\n            variant=\"outlined\"\r\n            defaultValue={task.description}\r\n            inputRef={descriptionRef}\r\n          />\r\n          <p />\r\n          <Button variant=\"outlined\" fullWidth type=\"submit\">\r\n            Done\r\n          </Button>\r\n        </form>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ModifyTask;\r\n","import React, { FC, useEffect, useRef, useState } from \"react\";\r\nimport {\r\n  makeStyles,\r\n  Card,\r\n  Grid,\r\n  Typography,\r\n  IconButton,\r\n  MenuItem,\r\n} from \"@material-ui/core\";\r\nimport { ITask } from \"src/staticData/types\";\r\nimport { Draggable } from \"react-beautiful-dnd\";\r\nimport { v4 as genid } from \"uuid\";\r\nimport { DeleteOutlineRounded, Edit } from \"@material-ui/icons\";\r\nimport PopupMenu from \"../helpers/PopupMenu\";\r\nimport ModifyTask from \"./ModifyTask\";\r\n\r\ninterface TaskProps {\r\n  task: ITask;\r\n  index: number;\r\n  columnId: number;\r\n  onDelete: (task: ITask) => void;\r\n  onUpdate: (task: ITask) => void;\r\n}\r\n\r\nconst taskStyles = makeStyles((theme) => ({\r\n  grow: {\r\n    width: \"100%\",\r\n    backgroundColor: \"#666\",\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n  },\r\n  growToDo: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.primary.dark,\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n  },\r\n  growOngoing: {\r\n    width: \"100%\",\r\n    background: `linear-gradient(to right, ${theme.palette.primary.dark}, ${theme.palette.success.dark})`,\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n  },\r\n  growComplete: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.success.dark,\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n  },\r\n  growCancelled: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.error.dark,\r\n    marginTop: \"5px\",\r\n    marginBottom: \"5px\",\r\n  },\r\n  dragging: {\r\n    width: \"100%\",\r\n    // of note, need to reduce margin by size of border\r\n    // so margin was reduced by 2 all the way around\r\n    margin: \"3px -2px 3px -2px\",\r\n    backgroundColor: theme.palette.primary.main,\r\n    border: `2px solid #ddd`,\r\n  },\r\n  taskButton: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"start\",\r\n    textTransform: \"none\",\r\n  },\r\n  text: {\r\n    padding: \"8px\",\r\n  },\r\n  menuText: {\r\n    flexGrow: 1,\r\n    marginLeft: \"25px\",\r\n  },\r\n}));\r\n\r\ntype styletype = ReturnType<typeof taskStyles>;\r\ntype MenuTuple = [\r\n  string,\r\n  (event: React.MouseEvent<HTMLElement>) => void,\r\n  JSX.Element\r\n];\r\n\r\nconst getClass = (columnId: number, classes: styletype) => {\r\n  switch (columnId) {\r\n    case 0:\r\n      return classes.growToDo;\r\n    case 1:\r\n      return classes.growOngoing;\r\n    case 2:\r\n      return classes.growComplete;\r\n    case 3:\r\n      return classes.growCancelled;\r\n    default:\r\n      return classes.grow;\r\n  }\r\n};\r\n\r\nconst Task: FC<TaskProps> = ({ task, index, columnId, onDelete, onUpdate }) => {\r\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\r\n  const [menuItems, setMenuItems] = useState<Array<JSX.Element>>([]);\r\n  const [fullTaskView, setFullTaskView] = useState(false);\r\n  const [modifyMode, setModifyMode] = useState(false);\r\n  const node = useRef<HTMLDivElement | null>(null);\r\n  const menuOpen = Boolean(anchorEl);\r\n  const classes = taskStyles();\r\n  const normalClass = getClass(columnId, classes);\r\n  const description =\r\n    task.description !== \"\" ? task.description : \"no description\";\r\n\r\n  const menuOffClick = () => setAnchorEl(null);\r\n\r\n  const menuOpenHandler = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n    event.stopPropagation();\r\n  };\r\n\r\n  const taskClicked = (event: React.MouseEvent<HTMLElement>) => {\r\n    if (anchorEl === null) setFullTaskView(!fullTaskView);\r\n  };\r\n\r\n  const modifyComplete = (task: ITask) => {\r\n    setModifyMode(false);\r\n    onUpdate(task);\r\n  };\r\n\r\n  const handleClick = (e: MouseEvent) => {\r\n    if (\r\n      node.current !== null &&\r\n      e.target !== null &&\r\n      node.current.contains(e.target as Node)\r\n    ) {\r\n      return;\r\n    }\r\n    setFullTaskView(false);\r\n    setModifyMode(false);\r\n  };\r\n\r\n  //credit: https://medium.com/@pitipatdop/little-neat-trick-to-capture-click-outside-with-react-hook-ba77c37c7e82\r\n  useEffect(() => {\r\n    // add when mounted\r\n    document.addEventListener(\"mousedown\", handleClick);\r\n    // return function to be called when unmounted\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClick);\r\n    };\r\n  }, []);\r\n\r\n  // wonder if this helps performance\r\n  useEffect(() => {\r\n    const runDelete = (event: React.MouseEvent<HTMLElement>) => {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      setAnchorEl(null);\r\n      onDelete(task);\r\n    };\r\n\r\n    const runModify = (event: React.MouseEvent<HTMLElement>) => {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      setAnchorEl(null);\r\n      // onUpdate(task);\r\n      setModifyMode(true);\r\n    };\r\n\r\n    const createMenuItems = () => {\r\n      const menuItemInfos: Array<MenuTuple> = [\r\n        [\"Modify\", runModify, <Edit />],\r\n        [\"Delete\", runDelete, <DeleteOutlineRounded />],\r\n      ];\r\n      const arr = new Array<JSX.Element>(menuItemInfos.length);\r\n      for (let i = 0; i < arr.length; i++) {\r\n        arr[i] = (\r\n          <MenuItem color=\"inherit\" onClick={menuItemInfos[i][1]} key={genid()}>\r\n            {menuItemInfos[i][2]}\r\n            <Typography className={classes.menuText}>\r\n              {menuItemInfos[i][0]}\r\n            </Typography>\r\n          </MenuItem>\r\n        );\r\n      }\r\n      setMenuItems(arr);\r\n    };\r\n    createMenuItems();\r\n  }, [onDelete, onUpdate, task, classes.menuText, setAnchorEl]);\r\n\r\n  return (\r\n    <div ref={node} style={{ width: \"100%\" }}>\r\n      {modifyMode && (\r\n        <ModifyTask\r\n          task={task}\r\n          className={normalClass}\r\n          onComplete={modifyComplete}\r\n        />\r\n      )}\r\n      {!modifyMode && (\r\n        <Draggable draggableId={task._id} index={index}>\r\n          {(provided, snapshot) => (\r\n            <Card\r\n              className={snapshot.isDragging ? classes.dragging : normalClass}\r\n              {...provided.draggableProps}\r\n              {...provided.dragHandleProps}\r\n              innerRef={provided.innerRef}\r\n              onClick={taskClicked}\r\n            >\r\n              <Grid item>\r\n                <Grid\r\n                  container\r\n                  direction=\"row\"\r\n                  justify=\"space-between\"\r\n                  wrap=\"nowrap\"\r\n                  alignItems=\"flex-start\"\r\n                >\r\n                  <Typography className={classes.text}>{task.name}</Typography>\r\n                  <IconButton onClick={menuOpenHandler}>\r\n                    <Edit />\r\n                  </IconButton>\r\n                </Grid>\r\n                {fullTaskView && (\r\n                  <Grid item>\r\n                    <Typography className={classes.text}>\r\n                      <i>{description}</i>\r\n                    </Typography>\r\n                  </Grid>\r\n                )}\r\n              </Grid>\r\n\r\n              <PopupMenu\r\n                menuID={\"task-menu-\" + task._id}\r\n                children={menuItems}\r\n                open={menuOpen}\r\n                anchor={anchorEl}\r\n                onClose={menuOffClick}\r\n              />\r\n            </Card>\r\n          )}\r\n        </Draggable>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Task;\r\n","import {\r\n  TextField,\r\n  Button,\r\n  makeStyles,\r\n  Card,\r\n  CardContent,\r\n  Grow,\r\n} from \"@material-ui/core\";\r\nimport { Close, InputOutlined } from \"@material-ui/icons\";\r\nimport React, { FC, useRef } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { addTask } from \"src/redux/actions\";\r\nimport { ITask, TaskAction } from \"src/staticData/types\";\r\nimport { styles } from \"../Login\";\r\nimport { v4 as genid } from \"uuid\";\r\n\r\nconst createSpecificStyles = makeStyles((theme) => ({\r\n  card: {\r\n    width: \"100%\",\r\n    background: theme.palette.primary.dark,\r\n  },\r\n  cardActions: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  leftButton: {\r\n    marginRight: \"20px\",\r\n  },\r\n}));\r\n\r\ninterface CreateTaskProps {\r\n  addATask: (tasklistID: string, task: ITask) => TaskAction;\r\n  onComplete: () => void;\r\n  onClose: () => void;\r\n  tasklistID: string;\r\n  open: boolean;\r\n}\r\n\r\n// totally forgot but since this is an individual task, there's no need to assign the task\r\n// to a person just yet\r\n\r\nconst CreateTask: FC<CreateTaskProps> = ({\r\n  addATask,\r\n  tasklistID,\r\n  onComplete,\r\n  onClose,\r\n  open\r\n}) => {\r\n  const classes = styles();\r\n  const preciseClasses = createSpecificStyles();\r\n  // dont need rerenders, should use useRef\r\n  const nameRef = useRef({ value: \"\" });\r\n  const descriptionRef = useRef({ value: \"\" });\r\n\r\n  const onSubmit = (submission: React.FormEvent) => {\r\n    submission.preventDefault();\r\n    const task: ITask = {\r\n      name: nameRef.current.value,\r\n      description: descriptionRef.current.value,\r\n      assignedUserIcon: \"\",\r\n      assignedUsername: \"\",\r\n      _id: genid(),\r\n    };\r\n    addATask(tasklistID, task);\r\n    onComplete();\r\n  };\r\n\r\n  const cancel = () => {\r\n    if (onClose !== undefined) onClose();\r\n  };\r\n\r\n  return (\r\n    <Grow in={open} unmountOnExit={true}>\r\n      <Card className={preciseClasses.card} elevation={0}>\r\n        <form\r\n          onSubmit={onSubmit}\r\n          autoComplete=\"off\"\r\n          className={classes.cardContent}\r\n        >\r\n          <CardContent className={classes.cardContent}>\r\n            <TextField\r\n              className={classes.inputs}\r\n              required\r\n              autoFocus\r\n              id=\"name\"\r\n              label=\"Task Name\"\r\n              variant=\"outlined\"\r\n              inputRef={nameRef}\r\n            />\r\n            <p />\r\n            <TextField\r\n              className={classes.inputs}\r\n              id=\"description\"\r\n              type=\"text\"\r\n              label=\"Description\"\r\n              variant=\"outlined\"\r\n              inputRef={descriptionRef}\r\n            />\r\n            <p />\r\n          </CardContent>\r\n          <CardContent className={preciseClasses.cardActions}>\r\n            <Button\r\n              className={preciseClasses.leftButton}\r\n              variant=\"outlined\"\r\n              color=\"secondary\"\r\n              value=\"Cancel\"\r\n              endIcon={<Close />}\r\n              onClick={cancel}\r\n            >\r\n              cancel\r\n            </Button>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"default\"\r\n              value=\"Create Task\"\r\n              type=\"submit\"\r\n              endIcon={<InputOutlined />}\r\n            >\r\n              Add Task\r\n            </Button>\r\n          </CardContent>\r\n        </form>\r\n      </Card>\r\n    </Grow>\r\n  );\r\n};\r\n\r\nconst mapActionsToProps = {\r\n  addATask: addTask,\r\n};\r\n\r\nexport default connect(null, mapActionsToProps)(CreateTask);\r\n","import {\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  Grid,\r\n  IconButton,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport { Droppable, DroppableProvided } from \"react-beautiful-dnd\";\r\nimport React, { FC, useState } from \"react\";\r\nimport Task from \"./Task\";\r\nimport { ITask, TaskAction, TTasks } from \"src/staticData/types\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport CreateTask from \"./CreateTask\";\r\nimport { removeTask, modifyTask } from \"src/redux/actions\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst styles = makeStyles((theme) => {\r\n  return {\r\n    header: {\r\n      backgroundColor: \"#222\",\r\n    },\r\n    headerComplete: {\r\n      backgroundColor: theme.palette.success.dark,\r\n    },\r\n    headerCancelled: {\r\n      backgroundColor: theme.palette.error.dark,\r\n    },\r\n    headerToDo: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      alignContent: \"stretch\",\r\n      backgroundColor: theme.palette.primary.dark,\r\n    },\r\n    headerOngoing: {\r\n      background: `linear-gradient( to right, ${theme.palette.primary.dark}, ${theme.palette.success.dark})`,\r\n    },\r\n    taskCardContentOngoing: {\r\n      paddingLeft: \"0px\",\r\n      paddingRight: \"0px\",\r\n      background: `linear-gradient( to right, ${theme.palette.primary.light}, ${theme.palette.success.light})`,\r\n    },\r\n    taskCardContentToDo: {\r\n      paddingLeft: \"0px\",\r\n      paddingRight: \"0px\",\r\n      backgroundColor: theme.palette.primary.light,\r\n    },\r\n    taskCardContentComplete: {\r\n      paddingLeft: \"0px\",\r\n      paddingRight: \"0px\",\r\n      backgroundColor: theme.palette.success.light,\r\n    },\r\n    taskCardContentCancelled: {\r\n      paddingLeft: \"0px\",\r\n      paddingRight: \"0px\",\r\n      backgroundColor: theme.palette.error.light,\r\n    },\r\n    taskCardContent: {\r\n      paddingLeft: \"0px\",\r\n      paddingRight: \"0px\",\r\n    },\r\n    small: {\r\n      width: \"100%\",\r\n    },\r\n    normalGrid: {\r\n      flexDirection: \"column\",\r\n      paddingLeft: \"8px\",\r\n      paddingRight: \"8px\",\r\n    },\r\n    addButton: {\r\n      color: \"white\",\r\n      background: theme.palette.primary.main,\r\n      fontSize: \"42px\",\r\n      marginBottom: \"-10px\",\r\n      marginRight: \"2px\",\r\n      padding: \"0px 0px 0px 0px\",\r\n      \"&:hover\": {\r\n        background: theme.palette.primary.light,\r\n        color: \"white\",\r\n      },\r\n    },\r\n  };\r\n});\r\n\r\ninterface TaskColumnProps {\r\n  tasklistID: string;\r\n  title: string;\r\n  id: string;\r\n  tasks: TTasks;\r\n  removeATask: (tasklistID: string, task: ITask) => TaskAction;\r\n  modifyATask: (tasklistID: string, task: ITask) => TaskAction;\r\n}\r\n\r\ntype styletype = ReturnType<typeof styles>;\r\n\r\nconst getHeaderClass = (columnId: number, classes: styletype) => {\r\n  switch (columnId) {\r\n    case 0:\r\n      return classes.headerToDo;\r\n    case 1:\r\n      return classes.headerOngoing;\r\n    case 2:\r\n      return classes.headerComplete;\r\n    case 3:\r\n      return classes.headerCancelled;\r\n    default:\r\n      return classes.header;\r\n  }\r\n};\r\n\r\nconst getContentClass = (columnId: number, classes: styletype) => {\r\n  switch (columnId) {\r\n    case 0:\r\n      return classes.taskCardContentToDo;\r\n    case 1:\r\n      return classes.taskCardContentOngoing;\r\n    case 2:\r\n      return classes.taskCardContentComplete;\r\n    case 3:\r\n      return classes.taskCardContentCancelled;\r\n    default:\r\n      return classes.taskCardContent;\r\n  }\r\n};\r\n\r\nconst TaskColumn: FC<TaskColumnProps> = ({\r\n  tasklistID,\r\n  title,\r\n  id,\r\n  tasks,\r\n  removeATask,\r\n  modifyATask\r\n}) => {\r\n  const [openAdd, setOpenAdd] = useState(false);\r\n  const classes = styles();\r\n  const columnId = parseInt(id);\r\n  const headerClass = getHeaderClass(columnId, classes);\r\n  const contentClass = getContentClass(columnId, classes);\r\n  const taskAdder = () => {\r\n    // open up a create task component and pass it the addATask function\r\n    // and the tasklistID and it'll create a task\r\n    setOpenAdd(true);\r\n  };\r\n\r\n  const taskDeleter = (task: ITask) => {\r\n    removeATask(tasklistID, task);\r\n  };\r\n  \r\n  const taskModifier = (task: ITask) => {\r\n    //TODO create a modify task dialog\r\n    //should be visually consistent with the create task dialog\r\n    //pass it the task and tasklistID information\r\n    //have it run the actual store modification\r\n    //we LIKELY want to have this be a function it pushes back up to tasklist\r\n    modifyATask(tasklistID, task);\r\n  };\r\n\r\n  const closeDialog = () => {\r\n    setOpenAdd(false);\r\n  };\r\n\r\n  return (\r\n    <Grid item key={\"column-\" + id} className={classes.small}>\r\n      <Card elevation={3}>\r\n        <CardHeader\r\n          className={headerClass}\r\n          title={title}\r\n          action={\r\n            columnId === 0 && (\r\n              <IconButton\r\n                edge=\"end\"\r\n                size=\"small\"\r\n                className={classes.addButton}\r\n                onClick={taskAdder}\r\n              >\r\n                <Add fontSize=\"inherit\" />\r\n              </IconButton>\r\n            )\r\n          }\r\n        />\r\n        <Droppable droppableId={id}>\r\n          {(provided: DroppableProvided, _snapshot) => (\r\n            <CardContent className={contentClass}>\r\n              <Grid\r\n                container\r\n                justify=\"flex-start\"\r\n                alignItems=\"flex-start\"\r\n                alignContent=\"flex-start\"\r\n                className={classes.normalGrid}\r\n                innerRef={provided.innerRef}\r\n                {...provided.droppableProps}\r\n              >\r\n                <CreateTask\r\n                  open={openAdd}\r\n                  onClose={closeDialog}\r\n                  onComplete={closeDialog}\r\n                  tasklistID={tasklistID}\r\n                />\r\n\r\n                {tasks.map((task: ITask, index: number) => (\r\n                  <Task\r\n                    key={task._id}\r\n                    task={task}\r\n                    index={index}\r\n                    columnId={columnId}\r\n                    onDelete={taskDeleter}\r\n                    onUpdate={taskModifier}\r\n                  />\r\n                ))}\r\n                {provided.placeholder}\r\n              </Grid>\r\n            </CardContent>\r\n          )}\r\n        </Droppable>\r\n      </Card>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst mapActionsToProps = {\r\n  removeATask: removeTask,\r\n  modifyATask: modifyTask,\r\n};\r\n\r\nexport default connect(null, mapActionsToProps)(TaskColumn);\r\n","import React, { FC } from \"react\";\r\nimport { Grid, GridProps } from \"@material-ui/core\";\r\n\r\ninterface GridPlusProps {\r\n  orderBy: \"column\" | \"row\";\r\n  crossFill?: boolean;\r\n  fillCount: number;\r\n  childProps?: GridProps;\r\n  children: React.ReactNode;\r\n  childClassName: string;\r\n}\r\n\r\n// removing unwanted props\r\nconst GridPlus: FC<GridProps & GridPlusProps> = ({\r\n  children,\r\n  item,\r\n  container,\r\n  crossFill,\r\n  orderBy,\r\n  fillCount,\r\n  childClassName,\r\n  childProps,\r\n  ...props\r\n}) => {\r\n  const createAndFillGrids = () => {\r\n    const arr2D = new Array<Array<JSX.Element>>(fillCount);\r\n    for (let i = 0; i < arr2D.length; i++) arr2D[i] = [];\r\n    const childrenArr = React.Children.map(children, (child) => {\r\n      if (!React.isValidElement(child)) {\r\n        return null;\r\n      }\r\n      return child;\r\n    });\r\n    if (childrenArr === undefined || childrenArr === null) return null;\r\n    // would have rather just filtered this... but react children only has map\r\n    const filteredChildren = childrenArr.filter((child) => child !== null);\r\n    if (crossFill) {\r\n      let arrIndex = 0;\r\n      for (\r\n        let i = 0;\r\n        i < filteredChildren.length;\r\n        i++, arrIndex = (arrIndex + 1) % fillCount\r\n      ) {\r\n        arr2D[arrIndex].push(filteredChildren[i]);\r\n      }\r\n    } else {\r\n      for (let i = 0; i < filteredChildren.length; i++) {\r\n        let n = Math.floor(i / fillCount);\r\n        arr2D[n].push(filteredChildren[i]);\r\n      }\r\n    }\r\n\r\n    const arr = new Array<JSX.Element>(fillCount);\r\n    for (let i = 0; i < arr.length; i++) {\r\n      arr[i] = (\r\n        <Grid key={i} item className={childClassName}>\r\n          <Grid {...childProps} container direction={orderBy}>\r\n            {arr2D[i]}\r\n          </Grid>\r\n        </Grid>\r\n      );\r\n    }\r\n    return arr;\r\n  };\r\n\r\n  const gridChildren = createAndFillGrids();\r\n\r\n  return (\r\n    <Grid {...props} container>\r\n      {gridChildren}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default GridPlus;\r\n","import {\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogTitle,\r\n  makeStyles,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\n\r\nimport { DragDropContext, DropResult } from \"react-beautiful-dnd\";\r\nimport React, { FC, useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, useHistory } from \"react-router-dom\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport { RootState } from \"src/redux/reducers\";\r\nimport {\r\n  getStoreStatus,\r\n  getTasklistById,\r\n  separateTasksByType,\r\n} from \"src/redux/selectors\";\r\nimport { Stage, TaskStage } from \"src/staticData/Constants\";\r\nimport {\r\n  ITask,\r\n  ITasklist,\r\n  TasklistDeleteAction,\r\n  TaskStageAction,\r\n  UpdateFailedAction,\r\n} from \"src/staticData/types\";\r\n\r\nimport TaskColumn from \"./TaskColumn\";\r\nimport { restageTask, deleteTasklistAttempt } from \"src/redux/actions\";\r\nimport GridPlus from \"../helpers/GridPlus\";\r\nimport { DeleteForever } from \"@material-ui/icons\";\r\nimport WaitingOverlay from \"../helpers/WaitingOverlay\";\r\n\r\ninterface ReduxProps {\r\n  tasklist: ITasklist | null;\r\n  restageTasks: (\r\n    tasklistID: string,\r\n    taskID: string,\r\n    stage: Stage,\r\n    oldStage: Stage,\r\n    priority: number,\r\n    oldPriority: number\r\n  ) => TaskStageAction;\r\n  deleteTasklist: (\r\n    id: string\r\n  ) => Promise<TasklistDeleteAction | UpdateFailedAction>;\r\n}\r\n\r\ninterface RouteParams {\r\n  id: string;\r\n  edit: string;\r\n}\r\n\r\nconst styles = makeStyles((theme) => ({\r\n  card: {\r\n    width: \"96%\",\r\n    marginLeft: \"2%\",\r\n    marginRight: \"2%\",\r\n  },\r\n  gridChild: {\r\n    width: \"33%\",\r\n  },\r\n  gridChildMedium: {\r\n    width: \"50%\",\r\n  },\r\n  gridChildSmall: {\r\n    width: \"100%\",\r\n    minWidth: \"300px\",\r\n  },\r\n  gridParent: {\r\n    width: \"100%\",\r\n  },\r\n  cancelButton: {\r\n    marginRight: \"20px\",\r\n  },\r\n  deleteDialog: {\r\n    minWidth: \"300px\",\r\n  },\r\n}));\r\n\r\nconst TaskViews = (tasklistID: string, separatedTasks: ITask[][]) => {\r\n  const arr2d = new Array<JSX.Element>(separatedTasks.length);\r\n  // not showing a cancelled tasklist, can hit a trash icon to ditch a task\r\n  // will just mark the task as cancelled\r\n  for (let i = 0; i < separatedTasks.length - 2; i++) {\r\n    const tasks = separatedTasks[i];\r\n    arr2d[i] = (\r\n      <TaskColumn\r\n        key={i}\r\n        tasklistID={tasklistID}\r\n        id={i.toString()}\r\n        title={TaskStage[i]}\r\n        tasks={tasks}\r\n      ></TaskColumn>\r\n    );\r\n  }\r\n  return arr2d;\r\n};\r\n\r\nconst Tasklist: FC<RouteComponentProps<RouteParams> & ReduxProps> = ({\r\n  tasklist,\r\n  restageTasks,\r\n  deleteTasklist,\r\n}) => {\r\n  const [openDeleteDialog, setOpenDeleteDialog] = useState(false);\r\n  const [waitForDelete, setWaitForDelete] = useState(false);\r\n  const [completionPercent, setCompletionPercent] = useState(\"\");\r\n  const classes = styles();\r\n  const isDesktop = useMediaQuery({ minWidth: 960 });\r\n  const isMedium = useMediaQuery({ minWidth: 600 });\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (/* waitForDelete && */ tasklist === null) history.push(\"/\");\r\n  }, [/* waitForDelete, */ tasklist, history]);\r\n\r\n  useEffect(() => {\r\n    if (tasklist !== null) {\r\n      if (tasklist.tasks.length < 1) {\r\n        setCompletionPercent(\"\");\r\n      } else {\r\n        setCompletionPercent(\r\n          (\r\n            ((tasklist.stage3.length + tasklist.stage4.length) /\r\n              tasklist.tasks.length) *\r\n            100\r\n          ).toFixed(0) + \"% Complete\"\r\n        );\r\n      }\r\n    }\r\n  }, [tasklist]);\r\n\r\n  if (tasklist === null)\r\n    return (\r\n      <div>\r\n        <p />\r\n        Tasklist not found!\r\n      </div>\r\n    );\r\n\r\n  const separatedTasks = separateTasksByType(tasklist);\r\n  const taskCards = TaskViews(tasklist._id, separatedTasks);\r\n\r\n  const deleteOpenButton = () => {\r\n    setOpenDeleteDialog(true);\r\n  };\r\n\r\n  const attemptTasklistDelete = () => {\r\n    setWaitForDelete(true);\r\n    setOpenDeleteDialog(false);\r\n    deleteTasklist(tasklist._id);\r\n  };\r\n\r\n  const closeDeleteDialog = () => {\r\n    setOpenDeleteDialog(false);\r\n  };\r\n\r\n  const onDragEnd = (result: DropResult) => {\r\n    const { draggableId, source, destination } = result;\r\n    if (!destination) return;\r\n    if (\r\n      destination.droppableId === source.droppableId &&\r\n      destination.index === source.index\r\n    )\r\n      return;\r\n    restageTasks(\r\n      tasklist._id,\r\n      draggableId,\r\n      TaskStage[parseInt(destination.droppableId)],\r\n      TaskStage[parseInt(source.droppableId)],\r\n      destination.index,\r\n      source.index\r\n    );\r\n    // update task completion ===> change task (draggableId)'s taskstage to\r\n    // destination.droppableId through store action\r\n    // should make specific action that does reordering and re-staging\r\n    // need to give ids a priority --> everything initially ordered\r\n    // by position in actual array, when reordered reorder it s.t.\r\n    // it is placed directly above closest task stage in array\r\n    // and below (check if there's task above and task below)\r\n    // OR\r\n    // give backend list items a priority value\r\n    // order based on priority value, give list starters priority of 1\r\n    // and each one increases, order ascending\r\n    // second option is easier will implement backend changes in support of\r\n    // frontend need\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <WaitingOverlay wait={waitForDelete} />\r\n      <Card className={classes.card}>\r\n        <CardHeader\r\n          title={tasklist.name}\r\n          titleTypographyProps={{ variant: \"h3\" }}\r\n          subheader={\r\n            <div>\r\n              Total tasks: {tasklist.tasks.length} <br />\r\n              {completionPercent}\r\n            </div>\r\n          }\r\n        />\r\n        <CardContent>\r\n          <Typography>{tasklist.description}</Typography>\r\n          <p />\r\n          <DragDropContext onDragEnd={onDragEnd}>\r\n            <GridPlus\r\n              container\r\n              direction=\"row\"\r\n              crossFill\r\n              orderBy=\"column\"\r\n              fillCount={isDesktop ? 3 : isMedium ? 2 : 1}\r\n              className={classes.gridParent}\r\n              justify=\"flex-start\"\r\n              alignItems=\"flex-start\"\r\n              spacing={2}\r\n              childClassName={\r\n                isDesktop\r\n                  ? classes.gridChild\r\n                  : isMedium\r\n                  ? classes.gridChildMedium\r\n                  : classes.gridChildSmall\r\n              }\r\n              childProps={{ spacing: 2 }}\r\n            >\r\n              {taskCards}\r\n            </GridPlus>\r\n          </DragDropContext>\r\n          <p />\r\n          <Button\r\n            startIcon={<DeleteForever />}\r\n            color=\"secondary\"\r\n            variant=\"outlined\"\r\n            onClick={deleteOpenButton}\r\n          >\r\n            Delete tasklist\r\n          </Button>\r\n        </CardContent>\r\n      </Card>\r\n      <Dialog open={openDeleteDialog} onClose={closeDeleteDialog}>\r\n        <DialogTitle className={classes.deleteDialog}>\r\n          Confirm tasklist deletion?\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={closeDeleteDialog}\r\n            color=\"primary\"\r\n            variant=\"outlined\"\r\n            className={classes.cancelButton}\r\n            autoFocus\r\n          >\r\n            cancel\r\n          </Button>\r\n          <Button\r\n            onClick={attemptTasklistDelete}\r\n            color=\"secondary\"\r\n            variant=\"outlined\"\r\n          >\r\n            delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\n// we know that location is there but we cant guarantee state or id\r\n// explicitly any... gross\r\nconst mapStateToProps = (state: RootState, otherProps: any) => {\r\n  if (otherProps.location?.state?.id)\r\n    return {\r\n      tasklist: getTasklistById(state, { id: otherProps.location.state.id }),\r\n      storeState: getStoreStatus(state),\r\n    };\r\n  return { tasklist: null };\r\n};\r\n\r\nconst mapActionsToProps = {\r\n  restageTasks: restageTask,\r\n  deleteTasklist: deleteTasklistAttempt,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionsToProps)(Tasklist);\r\n","import React, { FC, useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { loginAttemptFromCookie } from \"src/redux/actions\";\r\nimport Navbar from \"./Navbar\";\r\nimport Homepage from \"./Homepage\";\r\nimport Register from \"./Register\";\r\nimport Login from \"./Login\";\r\n\r\nimport {\r\n  mainRoute,\r\n  loggedOutRoutes,\r\n  loggedInRoutes,\r\n  nonNavbarRoutes,\r\n} from \"../staticData/Routes\";\r\nimport { FetchFailedAction, LoginCompleteAction } from \"src/staticData/types\";\r\nimport Logout from \"./Logout\";\r\nimport Tasklist from \"./Tasklist/Tasklist\";\r\nimport CreateTasklist from \"./Tasklist/CreateTasklist\";\r\ntype Props = {\r\n  cookieLogin: () => Promise<FetchFailedAction | LoginCompleteAction>;\r\n};\r\n\r\nconst App: FC<Props> = ({ cookieLogin }): React.ReactElement => {\r\n  useEffect(() => {\r\n    cookieLogin();\r\n  }, [cookieLogin]);\r\n  return (\r\n    <Router>\r\n      <Navbar\r\n        mainRoute={mainRoute}\r\n        loggedInRoutes={loggedInRoutes}\r\n        loggedOutRoutes={loggedOutRoutes}\r\n      />\r\n      <br />\r\n      <div className=\"container\">\r\n        <Switch>\r\n          <Route exact path={mainRoute.route} component={Homepage} />\r\n          <Route path={loggedOutRoutes[0].route} component={Register} />\r\n          <Route path={loggedOutRoutes[1].route} component={Login} />\r\n          <Route path={loggedInRoutes[3].route} component={Logout} />\r\n          <Route path={nonNavbarRoutes[0].route} component={Tasklist} />\r\n          <Route path={nonNavbarRoutes[1].route} component={CreateTasklist} />\r\n          <Route path={\"/*\"} component={Homepage} />\r\n          {/* just redirect to home when the thing fails */}\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\n// pass an object entirely composed of actions\r\n// to bind them to dispatch\r\nconst mapActionsToProps = {\r\n  // renaming so i can use it without saying props.\r\n  cookieLogin: loginAttemptFromCookie,\r\n};\r\n\r\nexport default connect(null, mapActionsToProps)(App);\r\n","import React, { FC, ReactElement } from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport {\r\n  createMuiTheme,\r\n  ThemeProvider,\r\n  responsiveFontSizes,\r\n} from \"@material-ui/core/styles\";\r\nimport { RootStore } from \"src/redux/configureStore\";\r\nimport App from \"./App\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport { ThemeOptions, useMediaQuery } from \"@material-ui/core\";\r\n\r\ntype Props = {\r\n  store: RootStore;\r\n};\r\n\r\nconst unchangedThemeOptions: ThemeOptions = {\r\n  palette: {\r\n    type: \"dark\",\r\n    primary: {\r\n      main: \"#00b0ff\",\r\n    },\r\n    secondary: {\r\n      main: \"#ff7043\",\r\n    },\r\n    warning: {\r\n      main: \"#00CAAA\",\r\n    },\r\n  },\r\n};\r\n\r\nconst themeMobile = responsiveFontSizes(\r\n  createMuiTheme({\r\n    ...unchangedThemeOptions,\r\n    typography: {\r\n      fontFamily: \"Roboto\",\r\n      fontSize: 9.8,\r\n    },\r\n  })\r\n);\r\n\r\nconst themeDesktop = responsiveFontSizes(\r\n  createMuiTheme({\r\n    ...unchangedThemeOptions,\r\n    typography: {\r\n      fontFamily: \"Roboto\",\r\n      fontSize: 12,\r\n    },\r\n  })\r\n);\r\n\r\nconst Root: FC<Props> = ({ store }): ReactElement<null> => {\r\n  const themeSwap = useMediaQuery(\"(min-width:600px)\");\r\n  return (\r\n    <Provider store={store}>\r\n      <ThemeProvider theme={themeSwap ? themeDesktop : themeMobile}>\r\n        <CssBaseline>\r\n          <App />\r\n        </CssBaseline>\r\n      </ThemeProvider>\r\n    </Provider>\r\n  );\r\n};\r\n\r\nexport default Root;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport configureStore, { RootStore } from \"./redux/configureStore\";\r\nimport Root from \"./components/Root\";\r\n\r\nconst store: RootStore = configureStore();\r\n\r\nReactDOM.render(<Root store={store} />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}